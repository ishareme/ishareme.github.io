<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>èŠèŠæ¯•ä¸šè®¾è®¡ç³»åˆ— --- ç³»ç»Ÿå®ç°</title>
      <link href="/%E8%81%8A%E8%81%8A%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1%E7%B3%BB%E5%88%972.html"/>
      <content type="html"><![CDATA[<h1 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h1><p><img src="https://user-gold-cdn.xitu.io/2018/8/26/16576a709bd02f5f?w=1409&amp;h=521&amp;f=gif&amp;s=30128195" alt="ç®¡ç†ç³»ç»Ÿ"></p><p><img src="https://user-gold-cdn.xitu.io/2018/8/26/16576a8711c14cbc?w=341&amp;h=569&amp;f=gif&amp;s=48073144" alt="WebApp"></p><h1 id="github"><a href="#github" class="headerlink" title="github"></a>github</h1><p><a href="https://github.com/ishareme/moment-server" target="_blank" rel="noopener">moment-server githubåœ°å€</a></p><p><a href="https://github.com/ishareme/moment" target="_blank" rel="noopener">moment githubåœ°å€</a></p><p><a href="https://github.com/ishareme/moment-manage" target="_blank" rel="noopener">moment-manage githubåœ°å€</a></p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œä¸»è¦æ˜¯å¯¹é¡¹ç›®åšäº†ä»‹ç»ï¼Œå¹¶ä¸”å¯¹ç³»ç»Ÿåˆ†æå’Œç³»ç»Ÿè®¾è®¡åšäº†å¤§æ¦‚çš„ä»‹ç»ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥è¿™ç¯‡æ–‡ç« ä¼šå¯¹ç³»ç»Ÿçš„å®ç°åšä»‹ç»ï¼Œä¸»è¦æ˜¯é€‰æ‹©ä¸€äº›æ¯”è¾ƒä¸»è¦çš„æ¨¡å—æˆ–è€…è¯´å¯æ‹¿å‡ºæ¥ä¸å¤§å®¶åˆ†äº«çš„æ¨¡å—ã€‚å¥½äº†ï¼Œæ¥å…¥æ­£é¢˜å§~~</p><h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><p>æœåŠ¡ç«¯è¿™è¾¹ä½¿ç”¨çš„æ˜¯Expressæ¡†æ¶ï¼Œæ•°æ®åº“ä½¿ç”¨çš„æ˜¯MongoDBï¼Œé€šè¿‡Mongooseæ¨¡å—æ¥æ“ä½œæ•°æ®åº“ã€‚è¿™è¾¹ä¸»è¦æ˜¯æƒ³ä¸‹å¯¹MongoDBåšä¸ªä»‹ç»ï¼Œå½“ç„¶çœ‹å®˜äº†è§£çš„è¯ç›´æ¥å¾€ä¸‹åˆ’<del>~</del>~</p><p>åœ¨é¡¹ç›®å¼€å§‹å‰è¦ç¡®ä¿ç”µè„‘æ˜¯å¦å®‰è£…mongoDBï¼Œ<a href="https://www.mongodb.com/download-center?jmp=nav#atlas" target="_blank" rel="noopener">ä¸‹è½½ç‚¹æˆ‘</a>ï¼Œ<a href="https://robomongo.org/download" target="_blank" rel="noopener">å›¾åƒåŒ–å·¥å…·Robo 3T ç‚¹æˆ‘</a>ï¼Œä¸‹è½½å¥½å…·ä½“æ€ä¹ˆé…ç½®è¿˜è¯·é—®åº¦å¨˜æˆ–Googleå§ï¼Œæœ¬æ–‡ä¸åšä»‹ç»äº†å“ˆã€‚æ³¨æ„ï¼šå®‰è£…å®ŒmongoDBçš„æ—¶å€™è¿›è¡Œé¡¹ç›®æ—¶è¦æŠŠlibç›®å½•ä¸‹çš„mongodæœåŠ¡å™¨æ‰“å¼€å“ˆ~~</p><p>MongoDB æ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ï¼Œæ˜¯ä¸€ä¸ªä»‹äºå…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ä¹‹é—´çš„å¼€æºäº§å“ï¼Œå®ƒæ˜¯åŠŸèƒ½æœ€ä¸ºä¸°å¯Œçš„éå…³ç³»å‹æ•°æ®åº“ï¼Œä¹Ÿæ˜¯æœ€åƒå…³ç³»å‹æ•°æ®åº“çš„ã€‚ä½†æ˜¯å’Œå…³ç³»å‹æ•°æ®åº“ä¸åŒï¼ŒMongoDBæ²¡æœ‰è¡¨å’Œè¡Œçš„æ¦‚å¿µï¼Œè€Œæ˜¯ä¸€ä¸ªé¢å‘<code>é›†åˆã€æ–‡æ¡£</code>çš„æ•°æ®åº“ã€‚å…¶ä¸­çš„æ–‡æ¡£æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œé‡‡ç”¨BSON(Binary Serialized Document Format)ï¼ŒBSONæ˜¯ä¸€ç§ç±»ä¼¼äºJSONçš„äºŒè¿›åˆ¶å½¢å¼çš„å­˜å‚¨æ ¼å¼ï¼Œå¹¶ä¸”BSONå…·æœ‰è¡¨ç¤ºæ•°æ®ç±»å‹çš„æ‰©å±•ï¼Œå› æ­¤æ”¯æŒçš„æ•°æ®éå¸¸ä¸°å¯Œã€‚MongoDBæœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æ•°æ®ç±»å‹å°±æ˜¯<code>å†…åµŒæ–‡æ¡£å’Œæ•°ç»„</code>ï¼Œè€Œä¸”åœ¨æ•°ç»„å†…å¯ä»¥åµŒå…¥å…¶ä»–æ–‡æ¡£ï¼Œè¿™æ ·ä¸€æ¡è®°å½•å°±èƒ½è¡¨ç¤ºéå¸¸å¤æ‚çš„å…³ç³»ã€‚</p><p>Mongooseæ˜¯åœ¨node.jså¼‚æ­¥ç¯å¢ƒä¸‹å¯¹MongoDBè¿›è¡Œç®€ä¾¿æ“ä½œçš„å¯¹è±¡æ¨¡å‹å·¥å…·ï¼Œèƒ½ä»æ•°æ®åº“æå–ä»»ä½•ä¿¡æ¯ï¼Œå¯ä»¥ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•æ¥è¯»å†™æ•°æ®ï¼Œä»è€Œä½¿æ“ä½œMongoDBæ•°æ®åº“éå¸¸ä¾¿æ·ã€‚Mongooseä¸­æœ‰ä¸‰ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä¾¿æ˜¯Schemaï¼ˆæ¨¡å¼ï¼‰ï¼ŒModelï¼ˆæ¨¡å‹ï¼‰ï¼ŒEntityï¼ˆå®ä½“ï¼‰ã€‚</p><ol><li><p>Schema: ä¸€ç§ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨çš„æ•°æ®åº“æ¨¡å‹éª¨æ¶ï¼Œä¸å…·å¤‡æ•°æ®åº“çš„æ“ä½œèƒ½åŠ›ï¼Œåˆ›å»ºå®ƒçš„è¿‡ç¨‹å¦‚åŒå…³ç³»å‹æ•°æ®åº“å»ºè¡¨çš„è¿‡ç¨‹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//Schema</span><br><span class="line">const mongoose = require(&apos;mongoose&apos;);</span><br><span class="line">const Schema = mongoose.Schema;</span><br><span class="line"></span><br><span class="line">const UserSchema = new Schema(&#123;</span><br><span class="line">    token: String,</span><br><span class="line">    is_banned: &#123;type: Boolean, default: false&#125;, //æ˜¯å¦ç¦è¨€</span><br><span class="line">    enable: &#123; type: Boolean, default: true &#125;, //ç”¨æˆ·æ˜¯å¦æœ‰æ•ˆ</span><br><span class="line">    is_actived: &#123;type: Boolean, default: false&#125;, //é‚®ä»¶æ¿€æ´»</span><br><span class="line">    username: String,</span><br><span class="line">    password: String,</span><br><span class="line">    email: String,  //emailå”¯ä¸€æ€§</span><br><span class="line">    code: String,</span><br><span class="line">    email_time: &#123;type: Date&#125;,</span><br><span class="line">    phone: &#123;type: String&#125;,</span><br><span class="line">    description: &#123; type: String, default: &quot;è¿™ä¸ªäººå¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹...&quot; &#125;,</span><br><span class="line">    avatar: &#123; type: String, default: &quot;http://p89inamdb.bkt.clouddn.com/default_avatar.png&quot; &#125;,</span><br><span class="line">    bg_url: &#123; type: String, default: &quot;http://p89inamdb.bkt.clouddn.com/FkagpurBWZjB98lDrpSrCL8zeaTU&quot;&#125;,</span><br><span class="line">    ip: String,</span><br><span class="line">    ip_location: &#123; type: Object &#125;,</span><br><span class="line">    agent: &#123; type: String &#125;, // ç”¨æˆ·ua</span><br><span class="line">    last_login_time: &#123; type: Date &#125;,</span><br><span class="line">    .....</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>Model: ç”±Schemaå‘å¸ƒç”Ÿæˆçš„æ¨¡å‹ï¼Œå…·æœ‰æŠ½è±¡å±æ€§å’Œè¡Œä¸ºçš„æ•°æ®åº“æ“ä½œå¯¹è±¡</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ç”Ÿæˆä¸€ä¸ªå…·ä½“Userçš„modelå¹¶å¯¼å‡º</span><br><span class="line">const User = mongoose.model(&quot;User&quot;, UserSchema);  //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é›†åˆåï¼Œåœ¨æ•°æ®åº“ä¸­ä¼šæŠŠModelåå­—å­—æ¯å…¨éƒ¨å˜å°å†™å’Œåœ¨åé¢åŠ å¤æ•°s</span><br><span class="line"></span><br><span class="line">//æ‰§è¡Œåˆ°è¿™ä¸ªæ—¶å€™ä½ çš„æ•°æ®åº“ä¸­å°±æœ‰äº† users è¿™ä¸ªé›†åˆ</span><br><span class="line"></span><br><span class="line">module.exports = User;</span><br></pre></td></tr></table></figure><ol><li>Entity: ç”±Modelåˆ›å»ºçš„å®ä½“ï¼Œä»–çš„æ“ä½œä¹Ÿä¼šå½±å“æ•°æ®åº“ï¼Œä½†æ˜¯å®ƒæ“ä½œæ•°æ®åº“çš„èƒ½åŠ›æ¯”Modelå¼±<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const newUser = new UserModel(&#123;          //UserModel ä¸ºå¯¼å‡ºæ¥çš„ User</span><br><span class="line">            email: req.body.email,</span><br><span class="line">            code: getCode(),</span><br><span class="line">            email_time: Date.now()</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure></li></ol><p>Mongooseä¸­æœ‰ä¸€ä¸ªä¸œè¥¿ä¸ªäººæ„Ÿè§‰éå¸¸ä¸»è¦ï¼Œé‚£ä¾¿æ˜¯<code>populate</code>ï¼Œé€šè¿‡populateä»–å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸å¦ä¸€ä¸ªé›†åˆå»ºç«‹å…³ç³»ã€‚å¦‚ä¸‹ï¼Œuseré›†åˆå¯ä»¥ä¸articleé›†åˆã€useré›†åˆæœ¬èº«è¿›è¡Œå…³è”ï¼Œæ ¹æ®å…¶å†…åµŒæ–‡æ¡£çš„ç‰¹æ€§ï¼Œè¿™æ ·å­ä»–ä¾¿å¯ä»¥å†…åµŒå­æ–‡æ¡£ï¼Œå­æ–‡æ¡£ä¸­æœ‰å¯ä»¥å†…åµŒå­æ–‡æ¡£ï¼Œè¿™æ ·å­å®ƒè¿”å›çš„æ•°æ®å°±ä¼šå¼‚å¸¸çš„ä¸°å¯Œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const user = await UserModel.findOne(&#123;_id: req.query._id, is_actived: true&#125;, &#123;password: 0&#125;).populate(&#123;</span><br><span class="line">                path: &apos;image_article&apos;,</span><br><span class="line">                model: &apos;ImageArticle&apos;,</span><br><span class="line">                populate: &#123;</span><br><span class="line">                    path: &apos;author&apos;,</span><br><span class="line">                    model: &apos;User&apos;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).populate(&#123;</span><br><span class="line">                path: &apos;collection_film_article&apos;,</span><br><span class="line">                model: &apos;FilmArticle&apos;,</span><br><span class="line">            &#125;).populate(&#123;</span><br><span class="line">                path: &apos;following_user&apos;,</span><br><span class="line">                model: &apos;User&apos;,</span><br><span class="line">            &#125;).populate(&#123;</span><br><span class="line">                path: &apos;follower_user&apos;,</span><br><span class="line">                model: &apos;User&apos;,</span><br><span class="line">            &#125;).exec();</span><br></pre></td></tr></table></figure></p><p>æœåŠ¡ç«¯ä¸»è¦æ˜¯æ“ä½œæ•°æ®åº“ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥(CRUD)ç­‰æ“ä½œã€‚é¡¹ç›®ä¸­çš„æ¥å£ï¼ŒMongooseçš„å„ç§æ–¹æ³•è¿™è¾¹å°±ä¸å¯¹å…¶åšè¯¦ç»†ä»‹ç»ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹<a href="https://mongoosejs.com/docs/guide.html" target="_blank" rel="noopener">Mongooseæ–‡æ¡£</a>ã€‚</p><h1 id="ç”¨æˆ·èº«ä»½è®¤è¯å®ç°"><a href="#ç”¨æˆ·èº«ä»½è®¤è¯å®ç°" class="headerlink" title="ç”¨æˆ·èº«ä»½è®¤è¯å®ç°"></a>ç”¨æˆ·èº«ä»½è®¤è¯å®ç°</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>æœ¬ç³»ç»Ÿçš„ç”¨æˆ·èº«ä»½è®¤è¯æœºåˆ¶é‡‡ç”¨çš„æ˜¯<code>JSON Web Tokenï¼ˆJWTï¼‰</code>ï¼Œå®ƒæ˜¯ä¸€ç§è½»é‡çš„è®¤è¯è§„èŒƒï¼Œä¹Ÿç”¨äºæ¥å£çš„è®¤è¯ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒHTTPåè®®æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œè¿™ä¾¿æ„å‘³ç€æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå½“ç”¨æˆ·æä¾›äº†ç”¨æˆ·åå’Œå¯†ç æ¥å¯¹æˆ‘ä»¬çš„åº”ç”¨è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œç”¨æˆ·éœ€è¦å†è¿›è¡Œä¸€æ¬¡ç”¨æˆ·çš„è®¤è¯æ‰å¯ä»¥ï¼Œå› ä¸ºæ ¹æ®HTTPåè®®ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæœ¬ç³»ç»Ÿé‡‡ç”¨äº†tokençš„é‰´æƒæœºåˆ¶ã€‚è¿™ä¸ªtokenå¿…é¡»è¦åœ¨æ¯æ¬¡è¯·æ±‚æ—¶ä¼ é€’ç»™æœåŠ¡ç«¯ï¼Œå®ƒåº”è¯¥ä¿å­˜åœ¨è¯·æ±‚å¤´é‡Œï¼Œå¦å¤–ï¼ŒæœåŠ¡ç«¯è¦æ”¯æŒCORS(è·¨æ¥æºèµ„æºå…±äº«)ç­–ç•¥ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨æœåŠ¡ç«¯è¿™ä¹ˆåšå°±å¯ä»¥äº†Access-Control-Allow-Origin: *ã€‚</p><p>åœ¨ç”¨æˆ·èº«ä»½è®¤è¯è¿™ä¸€å—æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæœ€å¸¸è§çš„åƒcookie ï¼Œsessionã€‚é‚£ä¹ˆä»–ä»¬ä¸‰ä¹‹é—´åˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè¿™é‡Œæœ‰ä¸¤ç¯‡æ–‡ç« ä»‹ç»çš„æŒºå…¨é¢ã€‚</p><ul><li><a href="http://www.52im.net/thread-1525-1-1.html" target="_blank" rel="noopener">æ­£ç¡®ç†è§£HTTPçŸ­è¿æ¥ä¸­çš„Cookieã€Sessionå’ŒToken</a></li><li><a href="https://zhuanlan.zhihu.com/p/38227861" target="_blank" rel="noopener">å°ç™½å¿…è¯»ï¼šé—²è¯HTTPçŸ­è¿æ¥ä¸­çš„Sessionå’ŒToken</a></li></ul><p>token ä¸ sessionçš„åŒºåˆ«åœ¨äºï¼Œå®ƒä¸åŒäºä¼ ç»Ÿçš„sessionè®¤è¯æœºåˆ¶ï¼Œå®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯å»ä¿ç•™ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯æˆ–å…¶ä¼šè¯çš„ä¿¡æ¯ã€‚ç³»ç»Ÿä¸€æ—¦æ¯”è¾ƒå¤§ï¼Œéƒ½ä¼šé‡‡ç”¨æœºå™¨é›†ç¾¤æ¥åšè´Ÿè½½å‡è¡¡ï¼Œè¿™éœ€è¦å¤šå°æœºå™¨ï¼Œç”±äºsessionæ˜¯ä¿å­˜åœ¨æœåŠ¡ç«¯ï¼Œé‚£ä¹ˆå°±è¦ å»è€ƒè™‘ç”¨æˆ·åˆ°åº•æ˜¯åœ¨å“ªä¸€å°æœåŠ¡å™¨ä¸Šè¿›è¡Œç™»å½•çš„ï¼Œè¿™ä¾¿æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è´Ÿæ‹…ã€‚</p><p>é‚£ä¹ˆå°±æœ‰äººæƒ³é—®äº†ï¼Œä½ è¿™ä¸ªç³»ç»Ÿè¿™ä¹ˆå°ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨ä¼ ç»Ÿçš„sessionæœºåˆ¶å‘¢ï¼Ÿå“ˆ~å› ä¸ºä¹‹å‰è‡ªå·±çš„é¡¹ç›®ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨sessionåšç™»å½•ï¼Œæ²¡ä½¿ç”¨è¿‡tokenï¼Œæƒ³å°è¯•å°è¯•å…¥å…¥å‘~~å“ˆå“ˆå“ˆ~</p><h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h2><p>JWTä¸»è¦çš„å®ç°æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li><p>åœ¨ç”¨æˆ·ç™»å½•æˆåŠŸçš„æ—¶å€™åˆ›å»ºtokenä¿å­˜äºæ•°æ®åº“ä¸­,å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li><li><p>å®¢æˆ·ç«¯ä¹‹åçš„æ¯ä¸€æ¬¡è¯·æ±‚éƒ½è¦å¸¦ä¸Štokenï¼Œåœ¨è¯·æ±‚å¤´é‡ŒåŠ å…¥Authorizationï¼Œå¹¶åŠ ä¸Štoken.</p></li><li><p>åœ¨æœåŠ¡ç«¯è¿›è¡ŒéªŒè¯tokençš„æœ‰æ•ˆæ€§ï¼Œåœ¨æœ‰æ•ˆæœŸå†…è¿”å›200çŠ¶æ€ç ï¼Œtokenè¿‡æœŸåˆ™è¿”å›401çŠ¶æ€ç </p></li></ol><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š </p><p><img src="https://user-gold-cdn.xitu.io/2018/8/19/16551e5acf4fb44e?w=685&amp;h=563&amp;f=png&amp;s=59915" alt="JWTè¯·æ±‚å›¾"></p><center>JWTè¯·æ±‚å›¾</center><p>åœ¨nodeä¸­ä¸»è¦ç”¨äº†<code>jsonwebtoken</code>è¿™ä¸ªæ¨¡å—æ¥åˆ›å»ºJWTï¼Œjsonwebtokençš„ä½¿ç”¨è¯·æŸ¥çœ‹<a href="https://segmentfault.com/a/1190000009494020" target="_blank" rel="noopener">jsonwebtokenæ–‡æ¡£</a>ã€‚é¡¹ç›®ä¸­åˆ›å»ºtokençš„ä¸­é—´ä»¶createTokenå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * createToken.js</span><br><span class="line"> */</span><br><span class="line">const jwt = require(&apos;jsonwebtoken&apos;);  // å¼•å…¥jsonwebtokenæ¨¡å—</span><br><span class="line">const secret = &apos;æˆ‘æ˜¯å¯†é’¥&apos;</span><br><span class="line"></span><br><span class="line">//ç™»å½•æ—¶ï¼šæ ¸å¯¹ç”¨æˆ·åå’Œå¯†ç æˆåŠŸåï¼Œåº”ç”¨å°†ç”¨æˆ·çš„idï¼ˆuser_idï¼‰ä½œä¸ºJWT Payloadçš„ä¸€ä¸ªå±æ€§</span><br><span class="line">module.exports = function(user_id)&#123;</span><br><span class="line">    const token = jwt.sign(&#123;</span><br><span class="line">        user_id: user_id</span><br><span class="line">    &#125;, secret, &#123;  //å¯†é’¥</span><br><span class="line">        expiresIn: &apos;24h&apos; //è¿‡æœŸæ—¶é—´è®¾ç½®ä¸º24hã€‚é‚£ä¹ˆdecodeè¿™ä¸ªtokençš„æ—¶å€™å¾—åˆ°çš„è¿‡æœŸæ—¶é—´ä¸º:åˆ›å»ºtokençš„æ—¶é—´+è®¾ç½®çš„å€¼</span><br><span class="line">    &#125;);</span><br><span class="line">    return token;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>return å‡ºæ¥çš„ token ç±»ä¼¼<code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiYWRtaW4iLCJpYXQiOjE1MzQ2ODQwNzAsImV4cCI6MTUzNDc3MDQ3MH0.Y3kaglqW9Fpe1YxF_uF7zwTV224W4W97MArU0aI0JgM</code>ã€‚æˆ‘ä»¬ä»”ç»†çœ‹è¿™å­—ç¬¦ä¸²ï¼Œåˆ†ä¸ºä¸‰æ®µï¼Œåˆ†åˆ«è¢« â€œ.â€ éš”å¼€ã€‚ç°åœ¨æˆ‘ä»¬åˆ†åˆ«å¯¹å‰ä¸¤æ®µè¿›è¡Œbase64è§£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9  ===&gt; &#123;&quot;alg&quot;:&quot;HS256&quot;,&quot;typ&quot;:&quot;JWT&quot;&#125;  å…¶ä¸­ algæ˜¯åŠ å¯†ç®—æ³•åå­—ï¼Œtypæ˜¯ç±»å‹</span><br><span class="line"></span><br><span class="line">eyJ1c2VyX2lkIjoiYWRtaW4iLCJpYXQiOjE1MzQ2ODQwNzAsImV4cCI6MTUzNDc3MDQ3MH0  ===&gt;  &#123;&quot;user_id&quot;:&quot;admin&quot;,&quot;iat&quot;:1534684070,&quot;exp&quot;:1534770470&#125;  å…¶ä¸­ nameæ˜¯æˆ‘ä»¬å‚¨å­˜çš„å†…å®¹ï¼Œiatåˆ›å»ºçš„æ—¶é—´æˆ³ï¼Œexpåˆ°æœŸæ—¶é—´æˆ³ã€‚</span><br><span class="line"></span><br><span class="line">Y3kaglqW9Fpe1YxF_uF7zwTV224W4W97MArU0aI0JgM  ===&gt; æœ€åä¸€æ®µæ˜¯ç”±å‰é¢ä¸¤æ®µå­—ç¬¦ä¸²ï¼ŒHS256åŠ å¯†åå¾—åˆ°ã€‚æ‰€ä»¥å‰é¢çš„ä»»ä½•ä¸€ä¸ªå­—æ®µä¿®æ”¹ï¼Œéƒ½ä¼šå¯¼è‡´åŠ å¯†åçš„å­—ç¬¦ä¸²ä¸åŒ¹é…ã€‚</span><br></pre></td></tr></table></figure></p><p>å½“æˆ‘ä»¬æ ¹æ®ç”¨æˆ·çš„idåˆ›å»ºè·å–åˆ°tokenä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æŠŠtokenè¿”å›åˆ°å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å¯¹å…¶åœ¨æœ¬åœ°(localStorage)ä¿å­˜, å®¢æˆ·ç«¯ä¹‹åçš„æ¯ä¸€æ¬¡è¯·æ±‚éƒ½è¦å¸¦ä¸Štokenï¼Œåœ¨è¯·æ±‚å¤´é‡ŒåŠ å…¥Authorizationï¼Œå¹¶åŠ ä¸Štokenï¼ŒæœåŠ¡ç«¯è¿›è¡ŒéªŒè¯tokençš„æœ‰æ•ˆæ€§ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•éªŒè¯tokençš„æœ‰æ•ˆæ€§å‘¢ï¼Ÿ æ‰€ä»¥æˆ‘ä»¬éœ€è¦checkTokenè¿™ä¸ªä¸­é—´ä»¶æ¥æ£€æµ‹tokençš„æœ‰æ•ˆæ€§ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * checkToken</span><br><span class="line"> */</span><br><span class="line">const jwt = require(&apos;jsonwebtoken&apos;);</span><br><span class="line">const secret = &apos;æˆ‘æ˜¯å¯†é’¥&apos;</span><br><span class="line"></span><br><span class="line">module.exports = async ( req, res, next ) =&gt; &#123;</span><br><span class="line">    const authorization = req.get(&apos;Authorization&apos;);</span><br><span class="line">    if (!authorization) &#123;</span><br><span class="line">        res.status(401).end();  //æ¥å£éœ€è¦è®¤è¯ä½†æ˜¯æœ‰æ²¡å¸¦ä¸Štokenï¼Œè¿”å›401æœªæˆæƒçŠ¶æ€ç </span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line">    const token = authorization.split(&apos; &apos;)[1];</span><br><span class="line">    try &#123;</span><br><span class="line">        let tokenContent = await jwt.verify(token, secret);   //å¦‚æœtokenè¿‡æœŸæˆ–éªŒè¯å¤±è´¥ï¼Œå°†æŠ›å‡ºé”™è¯¯</span><br><span class="line">        next();     //æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶</span><br><span class="line">    &#125; catch (err) &#123;</span><br><span class="line">        console.log(err)</span><br><span class="line">        res.status(401).end();  //tokenè¿‡æœŸæˆ–è€…éªŒè¯å¤±è´¥è¿”å›401çŠ¶æ€ç </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆç°åœ¨å’±ä»¬åªè¦åœ¨éœ€è¦ç”¨æˆ·è®¤è¯çš„æ¥å£ä¸Šï¼Œåœ¨æ“ä½œæ•°æ®ä¹‹å‰ï¼ŒåŠ ä¸ŠcheckTokenä¸­é—´ä»¶å³å¯ï¼Œå¦‚ä¸‹è°ƒç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">router.post(&apos;/updateUserInfo&apos;, checkToken, User.updateUserInfo)  </span><br><span class="line"></span><br><span class="line">//å¦‚æœcheckTokenæ£€æµ‹ä¸æˆåŠŸï¼Œå®ƒä¾¿è¿”å›401çŠ¶æ€ç ï¼Œä¸ä¼šå¯¹User.updateUserInfoåšä»»ä½•æ“ä½œï¼Œ åªæœ‰æ£€æµ‹tokenæˆåŠŸï¼Œæ‰èƒ½å¤„ç†User.updateUserInfo</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å¦‚ä½•ä¿è¯æ¯æ¬¡è¯·æ±‚éƒ½èƒ½åœ¨è¯·æ±‚å¤´é‡ŒåŠ å…¥Authorizationï¼Œå¹¶åŠ ä¸Štokenï¼Œè¿™å°±è¦ç”¨åˆ°Axiosçš„è¯·æ±‚æ‹¦æˆªï¼Œå¹¶ä¸”ä¹Ÿç”¨åˆ°äº†å®ƒçš„å“åº”æ‹¦æˆªï¼Œå› ä¸ºåœ¨æœåŠ¡ç«¯è¿”å›401çŠ¶æ€ç ä¹‹ååº”è¦æ‰§è¡Œç™»å‡ºæ“ä½œï¼Œæ¸…æ¥šæœ¬åœ°tokençš„å­˜å‚¨ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//requestæ‹¦æˆªå™¨</span></span><br><span class="line">instance.interceptors.request.use(</span><br><span class="line">    config =&gt; &#123;</span><br><span class="line">        <span class="comment">//æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰æ£€æµ‹æœ¬åœ°æ˜¯å¦å­˜æœ‰token,éƒ½è¦æ”¾åœ¨è¯·æ±‚å¤´å‘é€ç»™æœåŠ¡å™¨</span></span><br><span class="line">        <span class="keyword">if</span>(localStorage.getItem(<span class="string">'token'</span>))&#123;</span><br><span class="line">            <span class="keyword">if</span> (config.url.indexOf(<span class="string">'upload-z0.qiniup.com/putb64'</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">                config.headers.Authorization = config.headers[<span class="string">'UpToken'</span>];  <span class="comment">//åŠ ä¸Šä¸ƒç‰›äº‘ä¸Šä¼ token</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                config.headers.Authorization = <span class="string">`token <span class="subst">$&#123;localStorage.getItem(<span class="string">'token'</span>)&#125;</span>`</span>.replace(<span class="regexp">/(^\")|(\"$)/g</span>, <span class="string">''</span>);  <span class="comment">//åŠ ä¸Šç³»ç»Ÿæ¥å£token</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'config'</span>,config)</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'err'</span>,err)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//responseæ‹¦æˆªå™¨</span></span><br><span class="line">instance.interceptors.response.use(</span><br><span class="line">    response =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;,</span><br><span class="line">    error =&gt; &#123; <span class="comment">//é»˜è®¤é™¤äº†2XXä¹‹å¤–çš„éƒ½æ˜¯é”™è¯¯çš„ï¼Œå°±ä¼šèµ°è¿™é‡Œ</span></span><br><span class="line">        <span class="keyword">if</span>(error.response)&#123;</span><br><span class="line">            <span class="keyword">switch</span>(error.response.status)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">                    <span class="built_in">console</span>.log(error.response)</span><br><span class="line">                    store.dispatch(<span class="string">'ADMIN_LOGINOUT'</span>); <span class="comment">//å¯èƒ½æ˜¯tokenè¿‡æœŸï¼Œæ¸…é™¤å®ƒ</span></span><br><span class="line">                    router.replace(&#123; <span class="comment">//è·³è½¬åˆ°ç™»å½•é¡µé¢</span></span><br><span class="line">                        path: <span class="string">'/login'</span>,</span><br><span class="line">                        query: &#123; <span class="attr">redirect</span>: <span class="string">'/dashboard'</span> &#125; <span class="comment">// å°†è·³è½¬çš„è·¯ç”±pathä½œä¸ºå‚æ•°ï¼Œç™»å½•æˆåŠŸåè·³è½¬åˆ°è¯¥è·¯ç”±</span></span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error.response);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­çš„if else æ˜¯å› ä¸ºæœ¬ç³»ç»Ÿçš„å›¾ç‰‡ï¼ŒéŸ³è§†é¢‘æ˜¯æ”¾åœ¨ä¸ƒç‰›äº‘ï¼Œä¸Šä¼ éœ€è¦ä¸ƒç‰›äº‘ä¸Šä¼ base64å›¾ç‰‡çš„æ—¶å€™tokenæ˜¯æ”¾åœ¨è¯·æ±‚å¤´çš„ï¼Œæ­£å¸¸çš„å›¾ç‰‡ä¸Šä¼ ä¸æ˜¯æ”¾åœ¨è¯·æ±‚å¤´ï¼Œæ‰€ä»¥è¿™è¾¹å¯¹tokenåšäº†åŒºåˆ†ï¼Œå¦‚ä½•æ¥å…¥ä¸ƒç‰›äº‘ä¹Ÿä¼šåœ¨ä¸‹é¢æ¨¡å—ä»‹ç»åˆ°ã€‚</p><h1 id="ä¸ƒç‰›äº‘æ¥å…¥"><a href="#ä¸ƒç‰›äº‘æ¥å…¥" class="headerlink" title="ä¸ƒç‰›äº‘æ¥å…¥"></a>ä¸ƒç‰›äº‘æ¥å…¥</h1><p>æœ¬ç³»ç»Ÿçš„å›¾ç‰‡ï¼ŒéŸ³è§†é¢‘æ˜¯æ”¾åœ¨ä¸ƒç‰›äº‘ï¼Œæ‰€ä»¥éœ€è¦æ¥å…¥ä¸ƒç‰›äº‘ã€‚ä¸ƒç‰›äº‘åˆ†äº†ä¸¤ç§æƒ…å†µï¼Œæ­£å¸¸å›¾ç‰‡å’ŒéŸ³è§†é¢‘çš„ä¸Šä¼ å’Œbase64å›¾ç‰‡çš„ä¸Šä¼ ï¼Œå› ä¸ºä¸ƒç‰›äº‘åœ¨å¯¹ä»–ä»¬ä¸¤è€…ä¸Šä¼ çš„<code>Content-Type</code>å’Œ<code>domain(åŸŸ)</code>æœ‰æ‰€ä¸åŒï¼Œæ­£å¸¸å›¾ç‰‡å’ŒéŸ³è§†é¢‘çš„Content-Typeæ˜¯<code>headers: {&#39;Content-Type&#39;:&#39;multipart/form-data&#39;}</code>domainæ˜¯<code>domain=&#39;https://upload-z0.qiniup.com&#39;</code>,è€Œbase64å›¾ç‰‡çš„ä¸Šä¼ åˆ™æ˜¯<code>headers:{&#39;Content-Type&#39;:&#39;application/octet-stream&#39;}</code>domainæ˜¯<code>domain=&#39;https://upload-z0.qiniup.com/putb64/-1&#39;</code>ï¼Œæ‰€ä»¥ä»–ä»¬è¯·æ±‚çš„æ—¶å€™tokenæ”¾çš„åœ°æ–¹ä¸åŒï¼Œbase64å°±åƒä¸Šé¢æ‰€è¯´çš„æ”¾åœ¨è¯·æ±‚å¤´<code>Authorization</code>ä¸­ï¼Œè€Œæ­£å¸¸çš„æ”¾åœ¨<code>form-data</code>ä¸­ã€‚åœ¨æœåŠ¡ç«¯é€šè¿‡æ¥å£è¯·æ±‚æ¥è·å–ä¸ƒç‰›äº‘ä¸Šä¼ tokenï¼Œå®¢æˆ·ç«¯è·å–åˆ°ä¸ƒç‰›äº‘tokenï¼Œé€šè¿‡ä¸åŒæ–¹æ¡ˆå°†tokenå¸¦ä¸Šã€‚</p><ol><li>base64çš„ä¸Šä¼ ï¼š <code>headers:{&#39;Content-Type&#39;:&#39;application/octet-stream&#39;}</code> å’Œ <code>domain=&#39;https://upload-z0.qiniup.com/putb64/-1&#39;</code>ï¼Œtokenæ”¾åœ¨è¯·æ±‚å¤´<code>Authorization</code>ä¸­ã€‚</li><li>æ­£å¸¸å›¾ç‰‡å’ŒéŸ³è§†é¢‘çš„ä¸Šä¼ ï¼š <code>headers: {&#39;Content-Type&#39;:&#39;multipart/form-data&#39;}</code>å’Œ<code>domain=&#39;https://upload-z0.qiniup.com&#39;</code>ï¼Œtoken æ”¾åœ¨ <code>form-data</code>ä¸­ã€‚</li></ol><p>æœåŠ¡ç«¯é€šè¿‡<code>qiniu</code>è¿™ä¸ªæ¨¡å—è¿›è¡Œåˆ›å»ºtokenï¼ŒæœåŠ¡ç«¯ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ„å»ºä¸€ä¸ªä¸ƒç‰›äº‘ä¸Šä¼ å‡­è¯ç±»</span><br><span class="line"> * @class QN</span><br><span class="line"> */</span><br><span class="line">const qiniu = require(&apos;qiniu&apos;)  //å¯¼å…¥qiniuæ¨¡å—</span><br><span class="line">const config = require(&apos;../config&apos;)</span><br><span class="line">class QN &#123;</span><br><span class="line">    /**</span><br><span class="line">     * Creates an instance of qn.</span><br><span class="line">     * @param &#123;string&#125; accessKey -ä¸ƒç‰›äº‘AK</span><br><span class="line">     * @param &#123;string&#125; secretKey -ä¸ƒç‰›äº‘SK</span><br><span class="line">     * @param &#123;string&#125; bucket -ä¸ƒç‰›äº‘ç©ºé—´åç§°</span><br><span class="line">     * @param &#123;string&#125; origin -ä¸ƒç‰›äº‘é»˜è®¤å¤–é“¾åŸŸå,(å¯é€‰å‚æ•°)</span><br><span class="line">     */</span><br><span class="line">    constructor (accessKey, secretKey, bucket, origin) &#123;</span><br><span class="line">        this.ak = accessKey</span><br><span class="line">        this.sk = secretKey</span><br><span class="line">        this.bucket = bucket</span><br><span class="line">        this.origin = origin</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * è·å–ä¸ƒç‰›äº‘æ–‡ä»¶ä¸Šä¼ å‡­è¯</span><br><span class="line">     * @param &#123;number&#125; time - ä¸ƒç‰›äº‘å‡­è¯è¿‡æœŸæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œå¦‚æœä¸ºç©ºï¼Œé»˜è®¤ä¸º7200ï¼Œæœ‰æ•ˆæ—¶é—´ä¸º2å°æ—¶</span><br><span class="line">     */</span><br><span class="line">    upToken (time) &#123;</span><br><span class="line">        const mac = new qiniu.auth.digest.Mac(this.ak, this.sk)</span><br><span class="line">        const options = &#123;</span><br><span class="line">            scope: this.bucket,</span><br><span class="line">            expires: time || 7200</span><br><span class="line">        &#125;</span><br><span class="line">        const putPolicy = new qiniu.rs.PutPolicy(options)</span><br><span class="line">        const uploadToken = putPolicy.uploadToken(mac)</span><br><span class="line">        return uploadToken</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">exports.QN = QN;</span><br><span class="line"></span><br><span class="line">exports.upToken = () =&gt; &#123;</span><br><span class="line">    return new QN(config.qiniu.accessKey, config.qiniu.secretKey, config.qiniu.bucket, config.qiniu.origin).upToken()  //æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºä¸€ä¸ªtoken</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//è·å–ä¸ƒç‰›äº‘tokenæ¥å£</span><br><span class="line">const &#123;upToken&#125; = require(&apos;../utils/qiniu&apos;)</span><br><span class="line"></span><br><span class="line">app.get(&apos;/api/uploadToken&apos;, (req, res, next) =&gt; &#123;</span><br><span class="line">        const token = upToken()</span><br><span class="line">        res.send(&#123;</span><br><span class="line">            status: 1,</span><br><span class="line">            message: &apos;ä¸Šä¼ å‡­è¯è·å–æˆåŠŸ&apos;,</span><br><span class="line">            upToken: token,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>ç”±äºæ­£å¸¸å›¾ç‰‡å’ŒéŸ³è§†é¢‘çš„ä¸Šä¼ å’Œbase64å›¾ç‰‡çš„ä¸Šä¼ ï¼Œå› ä¸ºä¸ƒç‰›äº‘åœ¨å¯¹ä»–ä»¬ä¸¤è€…ä¸Šä¼ çš„<code>Content-Type</code>å’Œ<code>domain(åŸŸ)</code>æœ‰æ‰€ä¸åŒï¼Œæ‰€ä»¥çš„tokenè¯·æ±‚å­˜æ”¾çš„ä½ç½®æœ‰æ‰€ä¸åŒï¼Œå› æ­¤è¦åŒºåˆ†ï¼Œå®¢æˆ·ç«¯è°ƒç”¨ä¸Šä¼ ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//æ ¹æ®è·å–åˆ°çš„ä¸Šä¼ å‡­è¯uploadTokenä¸Šä¼ æ–‡ä»¶åˆ°æŒ‡å®šåŸŸ</span><br><span class="line">    //æ­£å¸¸å›¾ç‰‡å’ŒéŸ³è§†é¢‘çš„ä¸Šä¼ </span><br><span class="line">    uploadFile(formdata, domain=&apos;https://upload-z0.qiniup.com&apos;,config=&#123;headers:&#123;&apos;Content-Type&apos;:&apos;multipart/form-data&apos;&#125;&#125;)&#123;</span><br><span class="line">        console.log(domain)</span><br><span class="line">        console.log(formdata)</span><br><span class="line">        return instance.post(domain, formdata, config)</span><br><span class="line">    &#125;,</span><br><span class="line">    //base64å›¾ç‰‡çš„ä¸Šä¼ </span><br><span class="line">    //æ ¹æ®è·å–åˆ°çš„ä¸Šä¼ å‡­è¯uploadTokenä¸Šä¼ base64åˆ°æŒ‡å®šåŸŸ</span><br><span class="line">    uploadBase64File(base64, token, domain = &apos;https://upload-z0.qiniup.com/putb64/-1&apos;, config = &#123;</span><br><span class="line">        headers: &#123;</span><br><span class="line">            &apos;Content-Type&apos;: &apos;application/octet-stream&apos;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)&#123;</span><br><span class="line">        const pic = base64.split(&apos;,&apos;)[1];</span><br><span class="line">        config.headers[&apos;UpToken&apos;] = `UpToken $&#123;token&#125;`</span><br><span class="line">        return instance.post(domain, pic, config)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">function upload(Vue, data, callbackSuccess, callbackFail) &#123;</span><br><span class="line">    //è·å–ä¸Šä¼ tokenä¹‹åå¤„ç†</span><br><span class="line">    Vue.prototype.axios.getUploadToken().then(res =&gt; &#123;</span><br><span class="line">        if (typeof data === &apos;string&apos;)&#123;  //å¦‚æœæ˜¯base64</span><br><span class="line">            const token = res.data.upToken</span><br><span class="line">            Vue.prototype.axios.uploadBase64File(data, token).then(res =&gt; &#123;</span><br><span class="line">                if (res.status === 200)&#123;</span><br><span class="line">                    callbackSuccess &amp;&amp; callbackSuccess(&#123;</span><br><span class="line">                        data: res.data,</span><br><span class="line">                        result_url: `http://p89inamdb.bkt.clouddn.com/$&#123;res.data.key&#125;`</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).catch((error) =&gt; &#123;</span><br><span class="line">                callbackFail &amp;&amp; callbackFail(&#123;</span><br><span class="line">                    error</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        else if (data instanceof FormData)&#123;  //å¦‚æœæ˜¯FormData</span><br><span class="line">            data.append(&apos;token&apos;, res.data.upToken)</span><br><span class="line">            data.append(&apos;key&apos;, `moment$&#123;Date.now()&#125;$&#123;Math.floor(Math.random() * 100)&#125;`)</span><br><span class="line">            Vue.prototype.axios.uploadFile(data).then(res =&gt; &#123;</span><br><span class="line">                if (res.status === 200)&#123;</span><br><span class="line">                    callbackSuccess &amp;&amp; callbackSuccess(&#123;</span><br><span class="line">                        data: res.data,</span><br><span class="line">                        result_url: `http://p89inamdb.bkt.clouddn.com/$&#123;res.data.key&#125;`</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).catch((error) =&gt; &#123;</span><br><span class="line">                callbackFail &amp;&amp; callbackFail(&#123;</span><br><span class="line">                    error</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        else &#123;</span><br><span class="line">            const formdata = new FormData()  //å¦‚æœä¸æ˜¯formData å°±åˆ›å»ºformData</span><br><span class="line">            formdata.append(&apos;token&apos;, res.data.upToken)</span><br><span class="line">            formdata.append(&apos;file&apos;, data.file || data)</span><br><span class="line">            formdata.append(&apos;key&apos;, `moment$&#123;Date.now()&#125;$&#123;Math.floor(Math.random() * 100)&#125;.$&#123;data.file.type.split(&apos;/&apos;)[1]&#125;`)</span><br><span class="line">            // è·å–åˆ°å‡­è¯ä¹‹åå†å°†æ–‡ä»¶ä¸Šä¼ åˆ°ä¸ƒç‰›äº‘ç©ºé—´</span><br><span class="line">            console.log(&apos;formdata&apos;,formdata)</span><br><span class="line">            Vue.prototype.axios.uploadFile(formdata).then(res =&gt; &#123;</span><br><span class="line">                console.log(&apos;res&apos;,res)</span><br><span class="line">                if (res.status === 200)&#123;</span><br><span class="line">                    callbackSuccess &amp;&amp; callbackSuccess(&#123;</span><br><span class="line">                        data: res.data,</span><br><span class="line">                        result_url: `http://p89inamdb.bkt.clouddn.com/$&#123;res.data.key&#125;` //è¿”å›çš„å›¾ç‰‡é“¾æ¥</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).catch((error) =&gt; &#123;</span><br><span class="line">                console.log(error)</span><br><span class="line">                callbackFail &amp;&amp; callbackFail(&#123;</span><br><span class="line">                    error</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default upload</span><br></pre></td></tr></table></figure><h1 id="è·¯ç”±æƒé™æ¨¡å—"><a href="#è·¯ç”±æƒé™æ¨¡å—" class="headerlink" title="è·¯ç”±æƒé™æ¨¡å—"></a>è·¯ç”±æƒé™æ¨¡å—</h1><p>ç³»ç»Ÿçš„åå°ç®¡ç†é¢å‘çš„æ˜¯åˆä½œä½œè€…å’Œç®¡ç†å‘˜ï¼Œæ¶‰åŠåˆ°ä¸¤ç§è§’è‰²ï¼Œæ•…æ­¤è¦åšæƒé™ç®¡ç†ã€‚ä¸åŒçš„æƒé™å¯¹åº”ç€ä¸åŒçš„è·¯ç”±ï¼ŒåŒæ—¶ä¾§è¾¹æ çš„èœå•ä¹Ÿéœ€æ ¹æ®ä¸åŒçš„æƒé™ï¼Œå¼‚æ­¥ç”Ÿæˆï¼Œä¸åŒäºä»¥å¾€çš„æœåŠ¡ç«¯ç›´æ¥è¿”å›è·¯ç”±è¡¨ï¼Œç”±å‰ç«¯åŠ¨æ€ç”Ÿæˆï¼Œæ¥ä¸‹æ¥ä»‹ç»ä¸‹ç™»å½•å’Œæƒé™éªŒè¯çš„æ€è·¯ï¼š</p><ol><li><p>ç™»å½•ï¼šå½“ç”¨æˆ·å¡«å†™å®Œè´¦å·å’Œå¯†ç åå‘æœåŠ¡ç«¯éªŒè¯æ˜¯å¦æ­£ç¡®ï¼ŒéªŒè¯é€šè¿‡ä¹‹åï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›ä¸€ä¸ªtokenï¼Œæ‹¿åˆ°tokenä¹‹åå‰ç«¯ä¼šæ ¹æ®tokenå†å»æ‹‰å–ä¸€ä¸ªgetAdminInfoçš„æ¥å£æ¥è·å–ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·æƒé™ï¼Œç”¨æˆ·åç­‰ç­‰ä¿¡æ¯ï¼‰ã€‚</p></li><li><p>æƒé™éªŒè¯ï¼šé€šè¿‡tokenè·å–ç”¨æˆ·å¯¹åº”çš„roleï¼ŒåŠ¨æ€æ ¹æ®ç”¨æˆ·çš„roleç®—å‡ºå…¶å¯¹åº”æœ‰æƒé™çš„è·¯ç”±ï¼Œé€šè¿‡vue-routerçš„beforeEachè¿›è¡Œå…¨å±€å‰ç½®å®ˆå«å†é€šè¿‡router.addRoutesåŠ¨æ€æŒ‚è½½è¿™äº›è·¯ç”±ã€‚</p></li></ol><p>ä»£ç æœ‰ç‚¹å¤šï¼Œè¿™è¾¹å°±ç›´æ¥æ”¾æµç¨‹å›¾å“ˆ~~</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/19/16552aedaded68fa?w=700&amp;h=628&amp;f=png&amp;s=64946" alt="æƒé™è·¯ç”±æµç¨‹å›¾"></p><center>æƒé™è·¯ç”±æµç¨‹å›¾</center><p>æœ€è¿‘æ­£å¥½ä¹Ÿåœ¨å…¬å¸åšä¸­åå°é¡¹ç›®ï¼Œå…¬å¸çš„ä¸­åå°é¡¹ç›®çš„è¿™è¾¹æ˜¯ç”±æœåŠ¡ç«¯ç”Ÿæˆè·¯ç”±è¡¨ï¼Œå‰ç«¯è¿›è¡Œç›´æ¥æ¸²æŸ“ï¼Œæ¯•ç«Ÿå…¬å¸çš„ä¸€æ•´å¥—ä¸šåŠ¡æ¯”è¾ƒæˆç†Ÿã€‚ä½†æ˜¯æˆ‘ä»¬ä¼šåœ¨æƒ³èƒ½ä¸èƒ½ç”±å‰ç«¯ç»´æŠ¤è·¯ç”±è¡¨ï¼Œè¿™æ ·ä¸ç”¨åˆ°æ—¶å€™é¡¹ç›®è¿­ä»£ï¼Œå‰ç«¯æ¯å¢åŠ é¡µé¢éƒ½è¦è®©æœåŠ¡ç«¯å…„å¼Ÿé…ä¸€ä¸‹è·¯ç”±å’Œæƒé™ï¼Œå½“ç„¶å‰æå¯èƒ½æ˜¯é¡¹ç›®æ¯”è¾ƒå°çš„æ—¶å€™ã€‚</p><h1 id="è´¦å·æ¨¡å—"><a href="#è´¦å·æ¨¡å—" class="headerlink" title="è´¦å·æ¨¡å—"></a>è´¦å·æ¨¡å—</h1><p>è´¦å·æ¨¡å—æ˜¯ä¸šåŠ¡ä¸­æœ€ä¸ºåŸºç¡€çš„æ¨¡å—ï¼Œæ‰¿æ‹…ç€æ•´ä¸ªç³»ç»Ÿæ‰€æœ‰çš„è´¦å·ç›¸å…³çš„åŠŸèƒ½ã€‚ç³»ç»Ÿå®ç°äº†ç”¨æˆ·æ³¨å†Œã€ç”¨æˆ·ç™»å½•ã€å¯†ç ä¿®æ”¹ã€æ‰¾å›å¯†ç åŠŸèƒ½ã€‚</p><p>ç³»ç»Ÿçš„è´¦å·æ¨¡å—ä½¿ç”¨äº†é‚®ä»¶æœåŠ¡ï¼Œé’ˆå¯¹æ™®é€šç”¨æˆ·çš„æ³¨å†Œé‡‡ç”¨äº†é‚®ä»¶æœåŠ¡æ¥å‘é€éªŒè¯ç ï¼Œä»¥åŠå¯†ç çš„ä¿®æ”¹ç­‰æ“ä½œéƒ½é‡‡ç”¨äº†é‚®ä»¶æœåŠ¡ã€‚åœ¨node.jsä¸­ä¸»è¦é‡‡ç”¨äº†Nodemailerï¼ŒNodemaileræ˜¯ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Node.jsé‚®ä»¶å‘é€ç»„ä»¶ï¼Œå®ƒçš„ä½¿ç”¨å¯ä»¥<a href="https://user-gold-cdn.xitu.io/2018/8/19/16552bfb4463e4dc" target="_blank" rel="noopener">æ‘¸æˆ‘æ‘¸æˆ‘æ‘¸æˆ‘</a>ï¼Œé€šè¿‡æ­¤æ¨¡å—è¿›è¡Œé‚®ä»¶çš„å‘é€ã€‚ä½ ä»¬å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸ç”¨çŸ­ä¿¡æœåŠ¡å‘¢ï¼Ÿå“ˆ~å› ä¸ºçŸ­ä¿¡æœåŠ¡è¦é’±ï¼Œå“ˆå“ˆå“ˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* email é‚®ä»¶æ¨¡å—</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">const nodemailer = require(&apos;nodemailer&apos;);</span><br><span class="line">const smtpTransport = require(&apos;nodemailer-smtp-transport&apos;);</span><br><span class="line">const config = require(&apos;../config&apos;)</span><br><span class="line"></span><br><span class="line">const transporter = nodemailer.createTransport(smtpTransport(&#123;</span><br><span class="line">    host: &apos;smtp.qq.com&apos;,</span><br><span class="line">    secure: true,</span><br><span class="line">    port: 465,  // SMTP ç«¯å£</span><br><span class="line">    auth: &#123;</span><br><span class="line">        user: config.email.account,</span><br><span class="line">        pass: config.email.password  //è¿™é‡Œå¯†ç ä¸æ˜¯qqå¯†ç ï¼Œæ˜¯ä½ è®¾ç½®çš„smtpæˆæƒç </span><br><span class="line">    &#125;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line">let clientIsValid = false;</span><br><span class="line">const verifyClient = () =&gt; &#123;</span><br><span class="line">    transporter.verify((error, success) =&gt; &#123;</span><br><span class="line">        if (error) &#123;</span><br><span class="line">            clientIsValid = false;</span><br><span class="line">            console.warn(&apos;é‚®ä»¶å®¢æˆ·ç«¯åˆå§‹åŒ–è¿æ¥å¤±è´¥ï¼Œå°†åœ¨ä¸€å°æ—¶åé‡è¯•&apos;);</span><br><span class="line">            setTimeout(verifyClient, 1000 * 60 * 60);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            clientIsValid = true;</span><br><span class="line">            console.log(&apos;é‚®ä»¶å®¢æˆ·ç«¯åˆå§‹åŒ–è¿æ¥æˆåŠŸï¼Œéšæ—¶å¯å‘é€é‚®ä»¶&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">verifyClient();</span><br><span class="line"></span><br><span class="line">const sendMail = mailOptions =&gt; &#123;</span><br><span class="line">    if (!clientIsValid) &#123;</span><br><span class="line">        console.warn(&apos;ç”±äºæœªåˆå§‹åŒ–æˆåŠŸï¼Œé‚®ä»¶å®¢æˆ·ç«¯å‘é€è¢«æ‹’ç»&apos;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    mailOptions.from = &apos;&quot;ShineTomorrow&quot; &lt;admin@momentin.cn&gt;&apos;</span><br><span class="line">    transporter.sendMail(mailOptions, (error, info) =&gt; &#123;</span><br><span class="line">        if (error) return console.warn(&apos;é‚®ä»¶å‘é€å¤±è´¥&apos;, error);</span><br><span class="line">        console.log(&apos;é‚®ä»¶å‘é€æˆåŠŸ&apos;, info.messageId, info.response);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">exports.sendMail = sendMail;</span><br></pre></td></tr></table></figure><p>è´¦å·çš„æ³¨å†Œå…ˆæ˜¯å¡«å†™emailï¼Œå¡«å†™å¥½é‚®ç®±ä¹‹åä¼šé€šè¿‡Nodemailerå‘é€ä¸€å°å«æœ‰æœ‰æ•ˆæœŸçš„éªŒè¯ç é‚®ä»¶ï¼Œä¹‹åå¡«å†™éªŒè¯ç ã€æ˜µç§°å’Œå¯†ç å³å¯å®Œæˆæ³¨å†Œï¼Œå¹¶ä¸”ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œå¯¹å¯†ç é‡‡ç”¨äº†å®‰å…¨å“ˆå¸Œç®—æ³•ï¼ˆSecure Hash Algorithmï¼‰è¿›è¡ŒåŠ å¯†ã€‚è´¦å·çš„ç™»å½•ä»¥è´¦å·æˆ–è€…é‚®ç®±å·åŠ ä¸Šå¯†ç è¿›è¡Œç™»å½•ï¼Œå¹¶ä¸”é‡‡ç”¨ä¸Šæ–‡æ‰€è¯´çš„JSON Web Tokenï¼ˆJWTï¼‰èº«ä»½è®¤è¯æœºåˆ¶ï¼Œä»è€Œå®ç°ç”¨æˆ·å’Œç”¨æˆ·ç™»å½•çŠ¶æ€æ•°æ®çš„å¯¹åº”ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/19/16552c1407819375?w=426&amp;h=756&amp;f=png&amp;s=98007" alt="é‚®ä»¶é•¿è¿™æ ·"></p><center>æˆ‘çš„é‚®ä»¶é•¿è¿™æ ·ğŸ‘†(å¯è‡ªå·±å†™é‚®ä»¶æ¨¡æ¿)</center><h1 id="å®æ—¶æ¶ˆæ¯æ¨é€"><a href="#å®æ—¶æ¶ˆæ¯æ¨é€" class="headerlink" title="å®æ—¶æ¶ˆæ¯æ¨é€"></a>å®æ—¶æ¶ˆæ¯æ¨é€</h1><p>å½“ç”¨æˆ·è¢«äººå…³æ³¨ã€è¯„è®ºè¢«ä»–äººå›å¤å’Œç‚¹èµç­‰ä¸€äº›ç¤¾äº¤æ€§çš„æ“ä½œçš„æ—¶å€™ï¼Œåœ¨æ•°æ®å­˜å‚¨å®Œæˆåï¼ŒæœåŠ¡ç«¯åº”éœ€è¦åŠæ—¶å‘ç”¨æˆ·æ¨é€æ¶ˆæ¯æ¥æé†’ç”¨æˆ·ã€‚æ¶ˆæ¯æ¨é€æ¨¡å—é‡‡ç”¨äº†<code>Socket.io</code>æ¥å®ç°ï¼Œsocket.ioå°è£…äº†websocketï¼Œä¸æ”¯æŒwebsocketçš„æƒ…å†µè¿˜æä¾›äº†é™çº§AJAXè½®è¯¢,åŠŸèƒ½å®Œå¤‡ï¼Œè®¾è®¡ä¼˜é›…ï¼Œæ˜¯å¼€å‘å®æ—¶åŒå‘é€šè®¯çš„ä¸äºŒæ‰‹æ®µã€‚</p><p>é€šè¿‡ socket.ioï¼Œç”¨æˆ·æ¯æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œè¿™ä¸ªé¡µé¢éƒ½ä¼šå’ŒæœåŠ¡ç«¯å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚åœ¨æœåŠ¡ç«¯å¯ä»¥é€šè¿‡è¿æ¥çš„socketçš„idå±æ€§æ¥åŒ¹é…åˆ°ä¸€ä¸ªå»ºç«‹è¿æ¥çš„é¡µé¢ã€‚æ‰€ä»¥ç”¨æˆ·çš„IDå’Œsocketçš„idï¼Œæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå³ä¸€ä¸ªç”¨æˆ·å¯èƒ½åœ¨ç™»å½•åæ‰“å¼€å¤šä¸ªé¡µé¢ã€‚è€Œsocket.ioæ²¡æœ‰æä¾›ä»æœåŠ¡ç«¯å‘æŸä¸ªç”¨æˆ·å•ç‹¬å‘é€æ¶ˆæ¯çš„åŠŸèƒ½ï¼Œæ›´æ²¡æœ‰æä¾›å‘æŸä¸ªç”¨æˆ·æ‰“å¼€çš„æ‰€æœ‰é¡µé¢æ¨é€æ¶ˆæ¯çš„åŠŸèƒ½ã€‚ä½†æ˜¯socket.ioæä¾›äº†roomçš„æ¦‚å¿µï¼Œå³ç¾¤ç»„ã€‚åœ¨å»ºç«‹websocketæ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©åŠ å…¥æŸä¸ªroomï¼Œå¦‚æœè¿™ä¸ªroomæ²¡æœ‰å­˜åœ¨åˆ™è‡ªåŠ¨æ–°å»ºä¸€ä¸ªï¼Œå¦åˆ™ç›´æ¥åŠ å…¥ï¼ŒæœåŠ¡ç«¯å¯ä»¥å‘æŸä¸ªroomä¸­çš„æ‰€æœ‰å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯ã€‚</p><p>æ ¹æ®è¿™ä¸ªç‰¹æ€§ï¼Œè®¾è®¡å°†ç”¨æˆ·çš„IDä½œä¸ºroomçš„åå­—ï¼Œå½“æŸä¸ªç”¨æˆ·æ‰“å¼€é¡µé¢å»ºç«‹è¿æ¥æ—¶ï¼Œä¼šé€‰æ‹©åŠ å…¥ä»¥è‡ªå·±ç”¨æˆ·IDä¸ºåå­—çš„roomã€‚è¿™æ ·ï¼Œåœ¨ç”¨æˆ·IDä¸ºåå­—çš„ roomä¸­ï¼ŒåŠ å…¥çš„éƒ½æ˜¯ç”¨æˆ·è‡ªå·±æ‰“å¼€çš„é¡µé¢å»ºç«‹çš„è¿æ¥ã€‚ä»è€Œå‘æŸä¸ªç”¨æˆ·æ¨é€æ¶ˆæ¯ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å‘ä»¥æ­¤ç”¨æˆ·çš„IDä¸ºåå­—çš„roomå‘é€æ¶ˆæ¯ï¼Œè¿™æ ·å°±ä¼šæ¨é€åˆ°ç”¨æˆ·æ‰“å¼€çš„æ‰€æœ‰é¡µé¢ã€‚</p><p>æœ‰äº†æƒ³æ³•åæˆ‘ä»¬å°±å¼€å§‹é²å§~ï¼Œåœ¨æœåŠ¡ç«¯ä¸­<code>socket.io</code>åœ¨å®¢æˆ·ç«¯ä¸­ä½¿ç”¨<code>vue-socket.io</code>ï¼Œ æœåŠ¡ç«¯ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* app.jsä¸­</span><br><span class="line">*/</span><br><span class="line">const server = require(&apos;http&apos;).createServer(app);</span><br><span class="line">const io = require(&apos;socket.io&apos;)(server);</span><br><span class="line">global.io = io;  //å…¨å±€è®¾ä¸Šioå€¼ï¼Œ å› ä¸ºåœ¨å…¶ä»–æ¨¡å—è¦ç”¨åˆ°</span><br><span class="line">io.on(&apos;connection&apos;, function (socket) &#123;</span><br><span class="line">    // setTimeout(()=&gt;&#123;</span><br><span class="line">    //     socket.emit(&apos;nodeEvent&apos;, &#123; hello: &apos;world&apos; &#125;);</span><br><span class="line">    // &#125;, 5000)</span><br><span class="line">    socket.on(&apos;login_success&apos;, (data) =&gt; &#123;  //æ¥å—å®¢æˆ·ç«¯è§¦å‘çš„login_successäº‹ä»¶</span><br><span class="line">        //ä½¿ç”¨user_idä½œä¸ºæˆ¿é—´å·</span><br><span class="line">        socket.join(data.user_id);</span><br><span class="line">        console.log(&apos;login_success&apos;,data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">io.on(&apos;disconnect&apos;, function (socket) &#123;</span><br><span class="line">    socket.emit(&apos;user disconnected&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server.listen(config.port, () =&gt; &#123;</span><br><span class="line">    console.log(`The server is running at http://localhost:$&#123;config.port&#125;`);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* æŸä¸šåŠ¡æ¨¡å—</span><br><span class="line">*/</span><br><span class="line">//ä¾‹å¦‚æŸæ–‡ç« å¢åŠ è¯„è®º</span><br><span class="line">io.in(newMusicArticle.author.user_id._id).emit(&apos;receive_message&apos;, newMessage); //å®æ—¶é€šçŸ¥å®¢æˆ·ç«¯receive_messageäº‹ä»¶</span><br><span class="line">sendMail(&#123;       //å‘é€é‚®ä»¶</span><br><span class="line">    to: newMusicArticle.author.user_id.email,</span><br><span class="line">    subject: `Moment | ä½ æœ‰æœªè¯»æ¶ˆæ¯å“¦~`,</span><br><span class="line">    text: `å•¦å•¦å•¦ï¼Œæˆ‘æ˜¯å–æŠ¥çš„å°è¡Œå®¶~~ ğŸ¤”`,</span><br><span class="line">    html: emailTemplate.comment(sender, newMusicArticle, content, !!req.body.reply_to_id)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å®¢æœç«¯ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &apos;App&apos;,</span><br><span class="line">        data () &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        sockets:&#123;</span><br><span class="line">            connect()&#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            receive_message(val)&#123;  //æ¥å—æœåŠ¡ç«¯è§¦å‘çš„äº‹ä»¶ï¼Œè¿›è¡Œå®¢æˆ·ç«¯å®æ—¶æ›´æ–°æ•°æ®</span><br><span class="line">                if (val)&#123;</span><br><span class="line">                    console.log(&apos;æœåŠ¡ç«¯å®æ—¶é€šä¿¡&apos;, val)</span><br><span class="line">                    this.$notify(val.content)</span><br><span class="line">                    console.log(&apos;this method was fired by the socket server. eg: io.emit(&quot;customEmit&quot;, data)&apos;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        mixins: [mixin],</span><br><span class="line">        mounted()&#123;</span><br><span class="line">            if (!!JSON.parse(window.localStorage.getItem(&apos;user_info&apos;)))&#123;</span><br><span class="line">                this.$socket.emit(&apos;login_success&apos;, &#123;  //é€šçŸ¥æœåŠ¡ç«¯login_success äº‹ä»¶ï¼Œ ä¼ å…¥id</span><br><span class="line">                    user_id: JSON.parse(window.localStorage.getItem(&apos;user_info&apos;))._id</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><h1 id="è¯„è®ºæ¨¡å—"><a href="#è¯„è®ºæ¨¡å—" class="headerlink" title="è¯„è®ºæ¨¡å—"></a>è¯„è®ºæ¨¡å—</h1><p>è¯„è®ºæ¨¡å—æ˜¯ä¸ºäº†ç§»åŠ¨ç«¯WebAppä¸‹çš„æ–‡ç« ä¸‹ä¸ºç”¨æˆ·æä¾›å…³äºè¯„è®ºçš„ä¸€äº›æ“ä½œã€‚ç³»ç»Ÿå®ç°äº†å¯¹æ–‡ç« çš„è¯„è®ºï¼Œè¯„è®ºçš„ç‚¹èµåŠŸèƒ½ï¼Œçƒ­é—¨è¯„è®ºç½®é¡¶ä»¥åŠè¯„è®ºçš„å›å¤åŠŸèƒ½ã€‚åœ¨è¯„è®ºæ–¹é¢å­˜åœ¨ç€å„ç§å„æ ·çš„å®‰å…¨æ€§é—®é¢˜ï¼Œæ¯”å¦‚XSSæ”»å‡»ï¼ˆCross Site Scriptingï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ä»¥åŠæ•æ„Ÿè¯ç­‰é—®é¢˜ã€‚é¢„é˜²XSSæ”»å‡»ä½¿ç”¨äº†<code>xss</code>æ¨¡å—, æ•æ„Ÿè¯è¿‡æ»¤ä½¿ç”¨<code>text-censor</code>æ¨¡å—ã€‚</p><h1 id="ä¸€äº›æ€è€ƒ"><a href="#ä¸€äº›æ€è€ƒ" class="headerlink" title="ä¸€äº›æ€è€ƒ"></a>ä¸€äº›æ€è€ƒ</h1><ol><li>æ¥å£æ•°æ®é—®é¢˜</li></ol><p>åœ¨å¼€å‘çš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæ¥å£æ•°æ®é—®é¢˜ã€‚æœ‰æ—¶å€™æœåŠ¡ç«¯è¿”å›çš„æ•°æ®å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œå‰ç«¯è¦å¯¹æ•°æ®è¿›è¡Œå†ä¸€æ­¥çš„å¤„ç†ã€‚</p><p>ä¾‹å¦‚æœåŠ¡ç«¯è¿”å›çš„æŸä¸ªå­—æ®µä¸ºnullæˆ–è€…æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ç»“æ„å¤ªæ·±ï¼Œå‰ç«¯éœ€è¦ä¸æ–­å»åˆ¤æ–­æ•°æ®ç»“æ„æ˜¯å¦çœŸçš„è¿”å›äº†æ­£ç¡®çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯ä¸ªnull æˆ–è€…undefined~</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/26/165750eb5f3cf2bf?w=763&amp;h=370&amp;f=png&amp;s=108610" alt=""></p><p>æˆ‘ä»¬å‰ç«¯éƒ½è¦è¿™ä¹ˆå»å¤„ç†è¿‡æ»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;author&quot;&gt;</span><br><span class="line">    æ–‡ / &#123;&#123;(musicArticleInfo.author &amp;&amp; musicArticleInfo.author.user_id) ? musicArticleInfo.author.user_id.username : &apos;æˆ‘å«è¿™ä¸ªåå­—&apos;&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™å°±å¼•å‡ºäº†ä¸€ä¸ªæ€è€ƒï¼š</p><p>å¯¹æ•°æ®çš„è¿›ä¸€æ­¥å°è£…å¤„ç†ï¼Œå¿…ç„¶æ¸²æŸ“æ€§èƒ½æ–¹é¢ä¼šå­˜åœ¨é—®é¢˜ï¼Œè€Œä¸”æˆ‘ä»¬è¦æ—¶åˆ»æ‹…å¿ƒæ•°æ®è¿”å›çš„é—®é¢˜ã€‚å¦‚æœåº”ç”¨åˆ°å…¬å¸çš„ä¸šåŠ¡ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å¤„ç†å‘¢ ï¼Ÿ</p><ol><li>é¡µé¢æ€§èƒ½ä¼˜åŒ–å’ŒSEOé—®é¢˜</li></ol><p>é¦–å±æ¸²æŸ“é—®é¢˜ä¸€ç›´æ˜¯å•é¡µåº”ç”¨çš„ç—›ç‚¹ï¼Œé‚£ä¹ˆé™¤äº†å¸¸ç”¨çš„æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘ä»¬è¿˜æœ‰ä»€ä¹ˆæ–¹æ³•ä¼˜åŒ–çš„å— ï¼Ÿ è¿™ä¸ªé¡¹ç›®è™½ç„¶é¢å‘çš„æ˜¯ç§»åŠ¨ç«¯ç”¨æˆ·ï¼Œå¯èƒ½ä¸å­˜åœ¨SEOé—®é¢˜ï¼Œå¦‚æœåšæˆpcç«¯çš„è¯ï¼Œåƒæ–‡ç« è¿™ç±»çš„åº”ç”¨ï¼ŒSEOéƒ½æ˜¯å¿…é¡»å“ã€‚<br><br><br><br><br><br><br>å¯¹äºä¸Šé¢æå‡ºçš„é—®é¢˜ï¼Œnodeçš„å‡ºç°è®©æˆ‘ä»¬çœ‹åˆ°äº†è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±å¸¸è¯´çš„<strong>Nodeä¸­é—´å±‚</strong>ï¼Œå½“ç„¶æœ¬é¡¹ç›®ä¸­æ˜¯ä¸å­˜åœ¨Nodeä¸­é—´å±‚ï¼Œè€Œæ˜¯ç›´æ¥ä½œä¸ºåç«¯è¯­è¨€å¤„ç†æ•°æ®åº“ã€‚</p><p>ç”±äºå¤§éƒ¨åˆ†çš„å…¬å¸åç«¯è¦ä¹ˆæ˜¯phpè¦ä¹ˆæ˜¯javaï¼Œä¸€èˆ¬ä¸æŠŠnodeç›´æ¥ä½œä¸ºåç«¯è¯­è¨€ï¼Œå¦‚æœæœ‰ä½¿ç”¨åˆ°nodeï¼Œä¸€èˆ¬æ˜¯ä½œä¸ºä¸€ä¸ªä¸­é—´å±‚çš„å½¢å¼å­˜åœ¨ã€‚</p><p>å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜çš„è§£å†³ï¼šæˆ‘ä»¬å¯ä»¥åœ¨ä¸­é—´å±‚åšæ¥å£è½¬å‘ï¼Œåœ¨è½¬å‘çš„è¿‡ç¨‹ä¸­åšæ•°æ®å¤„ç†ã€‚è€Œä¸ç”¨æ‹…å¿ƒæ•°æ®è¿”å›çš„é—®é¢˜ã€‚</p><p>å¯¹äºç¬¬äºŒä¸ªé—®é¢˜çš„è§£å†³ï¼šæœ‰äº†Nodeä¸­é—´å±‚çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æŠŠé¦–å±æ¸²æŸ“çš„ä»»åŠ¡äº¤ç»™nodejså»åšï¼Œæ¬¡å±çš„æ¸²æŸ“ä¾ç„¶èµ°ä¹‹å‰çš„æµè§ˆå™¨æ¸²æŸ“ã€‚<br><br><br><br><br><br><br>æœ‰Nodeä¸­é—´å±‚çš„è¯ï¼Œæ–°çš„æ¶æ„å¦‚ä¸‹ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/26/1657571ab2ef3d3d?w=872&amp;h=375&amp;f=png&amp;s=15216" alt="æ–°æ¶æ„"></p><p>å‰åç«¯çš„èŒèƒ½ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/26/165757633f790cfb?w=859&amp;h=469&amp;f=png&amp;s=23919" alt=""></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å·²ç»æ¯•ä¸šä¸€æ®µæ—¶é—´äº†ï¼Œå†™æ–‡ç« æ˜¯ä¸ºäº†å›é¡¾ã€‚æœ¬äººæ°´å¹³ä¸€èˆ¬ï¼Œè§è°…è§è°…ã€‚è¿™ä¸ªäº§å“çš„å®ç°ï¼Œä¸€ä¸ªäººæ‰›ï¼Œåœ¨å…¶ä¸­å……å½“äº†å„ç§è§’è‰²ï¼Œè¦æœ‰ä¸€ç‚¹ç‚¹äº§å“æ€ç»´ï¼Œè¦æœ‰ä¸€ç‚¹ç‚¹è®¾è®¡çš„æƒ³æ³•ï¼Œè¦ä¼šæ•°æ®åº“è®¾è®¡ï¼Œè¦ä¼šåç«¯å¼€å‘ï¼ŒæŒºç¹ççš„ã€‚æœ€éš¾çš„ç‚¹ä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æ•°æ®åº“è®¾è®¡ï¼Œæ•°æ®åº“è¦ä¸€å¼€å§‹å°±è¦è®¾è®¡çš„å¾ˆå®Œæ•´ï¼Œä¸ç„¶åˆ°åé¢çš„æ·»æ·»è¡¥è¡¥ï¼Œå°±ä¼šå¾ˆä¹±å¾ˆä¹±ï¼Œå½“ç„¶è¿™ä¸ªåŸºç¡€æ˜¯äº§å“è¦éå¸¸æ¸…æ™°ï¼Œåˆšå¼€å§‹è‡ªå·±å¿ƒä¸­å¯¹äº§å“å¯èƒ½æ˜¯ä¸ªæ¨¡ç³Šçš„å®šä¹‰ï¼Œæƒ³æƒ³å·®ä¸å¤šæ˜¯é‚£æ ·ï¼Œäºæ˜¯ä¹å°±å¼€å§‹æ<del>å¯¼è‡´äºåé¢æ•°æ®åº“è®¾è®¡çš„ä¸æ˜¯å¾ˆæ»¡æ„ã€‚ç”±äºæ—¶é—´å…³ç³»ï¼Œç°åœ¨çš„äº§å“ä¸­æœ‰äº›å°æ¨¡å—è¿˜æ²¡å®Œæˆï¼Œä½†æ˜¯å¤§éƒ¨åˆ†çš„åŠŸèƒ½ç»“æ„å·²ç»å®Œæˆï¼Œç®—æ˜¯ä¸ªæˆå‹çš„äº§å“ï¼Œå½“ç„¶æ˜¯ä¸€ä¸ªæ²¡æœ‰ç»è¿‡æµ‹è¯•çš„äº§å“å“ˆå“ˆå“ˆå“ˆï¼Œè¦æ˜¯æœ‰æµ‹è¯•çš„è¯ï¼Œé‚£å°±å“ˆå“ˆå“ˆå“ˆä½ æ‡‚å¾— ~</del>ã€‚</p><p>å‰è·¯æ¼«æ¼«ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢~</p><p><br></p><p><strong>å®Œ</strong></p><p><strong>è°¢è°¢~~</strong></p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Express </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
            <tag> Vue </tag>
            
            <tag> Node.js </tag>
            
            <tag> MongoDB </tag>
            
            <tag> Mongoose </tag>
            
            <tag> Sockit.io </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>èŠèŠæ¯•ä¸šè®¾è®¡ç³»åˆ— --- é¡¹ç›®ä»‹ç»</title>
      <link href="/%E8%81%8A%E8%81%8A%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1%E7%B3%BB%E5%88%971.html"/>
      <content type="html"><![CDATA[<h1 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h1><p><img src="https://user-gold-cdn.xitu.io/2018/8/26/16576a709bd02f5f?w=1409&amp;h=521&amp;f=gif&amp;s=30128195" alt="ç®¡ç†ç³»ç»Ÿ"></p><p><img src="https://user-gold-cdn.xitu.io/2018/8/26/16576a8711c14cbc?w=341&amp;h=569&amp;f=gif&amp;s=48073144" alt="WebApp"></p><h1 id="github"><a href="#github" class="headerlink" title="github"></a>github</h1><p><a href="https://github.com/ishareme/moment-server" target="_blank" rel="noopener">moment-server githubåœ°å€</a></p><p><a href="https://github.com/ishareme/moment" target="_blank" rel="noopener">moment githubåœ°å€</a></p><p><a href="https://github.com/ishareme/moment-manage" target="_blank" rel="noopener">moment-manage githubåœ°å€</a></p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p>æœ¬è®ºæ–‡å¯¹åœ¨ç§»åŠ¨äº’è”ç½‘çš„å¤§ç¯å¢ƒä¸‹ï¼Œäººä»¬å¯¹é˜…è¯»çš„éœ€æ±‚å’Œå­˜åœ¨çš„é—®é¢˜ä»¥åŠå‘å±•è¶‹åŠ¿è¿›è¡Œäº†æ·±å…¥åˆ†æç ”ç©¶ä¹‹åï¼Œä¸»è¦ç›®çš„æ˜¯è®¾è®¡ä¸€å¥—ç®€çº¦ä¼˜é›…é£æ ¼çš„UIï¼Œå³UserInterfaceï¼ˆç”¨æˆ·ç•Œé¢ï¼‰ï¼Œé‡‡ç”¨<code>Express</code>ä¸ºNode.jsçš„webå¼€å‘æ¡†æ¶ï¼Œ<code>Mongoose</code>æ¨¡å—æ¥ç®¡ç†éå…³ç³»å‹æ•°æ®åº“MongoDBï¼Œåœ¨å‰ç«¯å·¥ç¨‹ä¸­ä¸»è¦è¿ç”¨äº†æ¸è¿›å¼JavaScriptæ¡†æ¶<code>Vue.js</code>ï¼Œä½¿ç”¨<code>Vue-router</code>åšå‰ç«¯é¡µé¢è·¯ç”±çš„è·³è½¬ï¼Œä½¿ç”¨<code>Axios</code>ä½œä¸ºHTTPè¯·æ±‚åº“ï¼ŒåŒæ—¶ä½¿ç”¨<code>Vuex</code>è´Ÿè´£å‰ç«¯å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œä½¿ç”¨<code>ElementUI</code>ä½œä¸ºç•Œé¢åŸºç¡€ç»„ä»¶åº“ï¼Œä½¿ç”¨<code>Webpack</code>è¿›è¡Œæ¨¡å—åŒ–æ‰“åŒ…ï¼Œå¹¶ç»“åˆHTML5ç›¸å…³æŠ€æœ¯æœ€ç»ˆå®ç°ä¸€ä¸ªåŒ…å«<strong>å›¾æ–‡ç±»ã€é˜…è¯»ç±»ã€å½±è§†ç±»ã€éŸ³ä¹ç±»å’Œç”µå°ç±»äº”å¤§ç‰ˆå—çš„æ–‡è‰ºç±»é˜…è¯»ç³»ç»Ÿ</strong>ï¼Œå–åä¸º<code>Moment</code>ï¼Œæ„ä¸ºç‰‡åˆ»ï¼Œæ—¨åœ¨ä¸ºäººä»¬æä¾›ä¸€ä¸ªå¹³å°ï¼Œè®©äººä»¬åœ¨ç¢ç‰‡åŒ–çš„æ—¶é—´é‡Œè¿›è¡Œæœ‰æ•ˆé˜…è¯»ã€‚å°†å®ç°ç³»ç»Ÿä¸­çš„ä¸¤å¤§ä¸»è¦éƒ¨åˆ†ï¼š<strong>é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ</strong> å’Œ <strong>é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp</strong>ã€‚        <br> <br>                      &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;â€” æ‘˜è‡ªæœ¬äººè®ºæ–‡</p></blockquote><p>å¥½äº†å¥½äº†ï¼Œä»¥ä¸Šçº¯å±è£…xï¼Œä¸‰æµçš„å­¦æ ¡ä¸‰æµçš„æ¯•ä¸šè®¾è®¡ï¼Œçœ‹å®˜éšæ„å°±å¥½ã€‚å¼•è¨€ä¸­åšäº†æ¯•ä¸šè®¾è®¡é¡¹ç›®çš„ä»‹ç»ï¼Œå®ç°ä¸€ä¸ªåŒ…å«å›¾æ–‡ç±»ã€é˜…è¯»ç±»ã€å½±è§†ç±»ã€éŸ³ä¹ç±»å’Œç”µå°ç±»äº”å¤§ç‰ˆå—çš„<strong>æ–‡è‰ºç±»é˜…è¯»ç³»ç»Ÿ</strong>ï¼Œå–åä¸º<code>Moment</code>ã€‚ä¸»è¦è¿ç”¨åˆ°çš„æŠ€æœ¯æ ˆæœ‰ï¼š</p><ul><li>Node.js â€” Express</li><li>MongoDB â€” Mongoose</li><li>Vue</li><li>Vue-router</li><li>Axios</li><li>Vuex</li><li>ElementUI</li><li>Socket.io</li><li>â€¦</li></ul><p>åœ¨é¡¹ç›®å¼€å§‹ä¹‹å‰è¿˜å¾ˆæ¿€åŠ¨ä¹˜è¿˜æ˜¯å­¦ç”Ÿçš„æ—¶å€™åœ¨è…¾è®¯äº‘ä¸Šä¹°äº†äº‘æœåŠ¡å™¨ï¼Œæ³¨å†Œäº†ç¬¬äºŒä¸ªåŸŸå<code>momentin.cn</code>ï¼Œåˆ°åé¢éƒ¨ç½²ä¸Šå»å‘ç°æ¥å£è¯·æ±‚å¤ªæ…¢äº†ï¼Œäºæ˜¯ä¹è¿˜æ˜¯æ”¾å¼ƒäº†ï¼Œå…¶å®æœ€é‡è¦çš„è¿˜æ˜¯bugå¤šå¤šå“ˆå“ˆå“ˆï¼Œæ€§èƒ½ä¼˜åŒ–è¿˜æ²¡åšå¥½ã€‚ä¸è¿‡åé¢ä¼šç»§ç»­éƒ¨ç½²ä¸Šçº¿ã€‚</p><h1 id="ç³»ç»Ÿä¸šåŠ¡åˆ†æ"><a href="#ç³»ç»Ÿä¸šåŠ¡åˆ†æ" class="headerlink" title="ç³»ç»Ÿä¸šåŠ¡åˆ†æ"></a>ç³»ç»Ÿä¸šåŠ¡åˆ†æ</h1><p>ä½œä¸ºä¸€ä¸ªæ–‡è‰ºç±»é˜…è¯»ç³»ç»Ÿï¼Œæœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯ä¸ºç”¨æˆ·æä¾›ä¼˜è´¨çš„é˜…è¯»ä½“éªŒå’Œä¸°å¯Œçš„é˜…è¯»å†…å®¹ã€‚ä»è€Œï¼Œä»¥æ­¤ä½œä¸ºç›®æ ‡ï¼Œæœ¬ç³»ç»Ÿä¸šåŠ¡ä¸­å¯¹é˜…è¯»æ–‡ç« çš„åˆ†ç±»åˆåˆ†ä¸ºå›¾æ–‡ç±»ã€é˜…è¯»ç±»ã€å½±è§†ç±»ã€éŸ³ä¹ç±»å’Œç”µå°ç±»è¿™äº”ä¸ªç‰ˆå—ï¼Œäºç›®äºè€³å¯¹æ–‡ç« çš„å½¢å¼è¿›è¡Œå¤šæ ·åŒ–ã€‚åˆå°†æ•´ä¸ªæ–‡è‰ºç±»é˜…è¯»ç³»ç»Ÿçš„ä¸šåŠ¡åˆ’åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿå’Œé¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebAppï¼Œç³»ç»Ÿçš„éœ€æ±‚åˆ†æå°†å›´ç»•è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œå±•å¼€ã€‚</p><h2 id="é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp"><a href="#é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp" class="headerlink" title="é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp"></a>é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp</h2><p>é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebAppæœ€é‡è¦çš„ä¸šåŠ¡æ˜¯æä¾›æ–‡ç« çš„é˜…è¯»ï¼Œè¿™ä¸ªä¸šåŠ¡æ˜¯é¢å‘æ‰€æœ‰å¯ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·ã€‚å½“ç„¶è€ƒè™‘åˆ°ç”¨æˆ·ä¸ä»…ä»…æ»¡è¶³äºé˜…è¯»ï¼Œä¹Ÿéœ€è¦ä»¥æ–‡ç« ä½œä¸ºåª’ä»‹è¿›è¡Œç”¨æˆ·ä¹‹é—´çš„ç¤¾äº¤æ€§æ´»åŠ¨ï¼Œå› æ­¤ç³»ç»Ÿå¢åŠ äº†å›¾æ–‡å¹¿åœºæ¨¡å—ï¼Œç±»ä¼¼äºä¸€ä¸ªåœˆå­ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥å‘å¸ƒå›¾æ–‡åŠæŸ¥çœ‹ï¼Œå†æ¯”å¦‚å…³æ³¨ï¼Œäº’ç›¸è¯„è®ºç­‰å„ç§äº’åŠ¨ã€‚ç¤¾äº¤æ€§çš„æ“ä½œåå¾€å¾€éœ€è¦ç»™ç”¨æˆ·ä¸€äº›æé†’ï¼Œä¸ç„¶å°†å¤±å»æ„ä¹‰ï¼Œè€Œä¸”å¿…é¡»ä¿è¯è¿™ä¸ªæé†’æ˜¯å®æ—¶çš„ï¼Œæ‰€ä»¥éœ€è¦å¯¹ç”¨æˆ·è¿›è¡Œå®æ—¶çš„æ¶ˆæ¯æ¨é€ã€‚å½“ç„¶ç”¨æˆ·éš¾å…å¯¹æ–‡ç« æœ¬èº«è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚è¯„è®ºã€ç‚¹èµã€æ”¶è—ç­‰æ“ä½œã€‚æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œé˜…è¯»ï¼Œä½†æ˜¯ä¸€æ—¦æ¶‰åŠåˆ°ç¤¾äº¤æ€§æ“ä½œçš„è¯å°±è¦ä»¥ç”¨æˆ·æœ‰ç™»å½•æ³¨å†Œçš„å‰æã€‚</p><h2 id="é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ"><a href="#é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ"></a>é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ</h2><p>è¿™ä¸ªç³»ç»Ÿçš„ç®¡ç†ï¼Œç³»ç»Ÿä¸»è¦åˆ†ä¸ºä¸¤ç§è§’è‰²è¿›è¡Œç®¡ç†ã€‚ç³»ç»Ÿç®¡ç†å‘˜è§’è‰²å¯ä»¥çœ‹åˆ°ç§»åŠ¨ç«¯WebAppæ•´ä½“æ•°æ®æƒ…å†µï¼Œå¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œç®¡ç†åŒ…æ‹¬åˆä½œä½œè€…å’Œæ‰€æœ‰æ™®é€šç”¨æˆ·ï¼Œä»¥åŠå¯ä»¥å¯¹å›¾æ–‡ã€é˜…è¯»ã€å½±è§†ã€éŸ³ä¹ã€ç”µå°æ‰€æœ‰æ–‡ç« è¿›è¡Œç®¡ç†ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ç³»ç»Ÿçš„å…¶ä»–æ¨¡å—è¿›è¡Œç®¡ç†ï¼Œä¾‹å¦‚å¹¿å‘Šæ¨¡å—ã€è½®æ’­å›¾æ¨¡å—ã€å…¬å‘Šæ¨¡å—ç­‰ã€‚è€Œä½œè€…è§’è‰²çš„æƒé™å°±ç›¸å¯¹æ¯”è¾ƒå°‘ï¼Œä»…åŒ…å«å¯¹æ–‡ç« çš„ç®¡ç†ã€‚</p><p>æ³¨ï¼š ç”±äºæ—¶é—´å…³ç³» WebAppæ•´ä½“æ•°æ®æƒ…å†µè¿™å—ï¼Œå®ƒçš„æ•°æ®åº“å­—æ®µæ˜¯æœ‰ï¼Œä½†æ˜¯å½“æ—¶åŒ†åŒ†å¿™å¿™æ²¡æ—¶é—´å†™æ¥å£ï¼Œç›®å‰ä»¥é™æ€å±•ç¤ºã€‚ç³»ç»Ÿç®¡ç†è¿™ä¸€å—ä¹Ÿæœªå¤„ç†å®Œæ¯•ã€‚</p><h1 id="ç³»ç»Ÿè®¾è®¡"><a href="#ç³»ç»Ÿè®¾è®¡" class="headerlink" title="ç³»ç»Ÿè®¾è®¡"></a>ç³»ç»Ÿè®¾è®¡</h1><h2 id="ç³»ç»Ÿæ¶æ„è®¾è®¡"><a href="#ç³»ç»Ÿæ¶æ„è®¾è®¡" class="headerlink" title="ç³»ç»Ÿæ¶æ„è®¾è®¡"></a>ç³»ç»Ÿæ¶æ„è®¾è®¡</h2><p><img src="https://user-gold-cdn.xitu.io/2018/8/9/1651f1aeaf2894a8?w=613&amp;h=594&amp;f=png&amp;s=43570" alt="ç³»ç»Ÿæ¶æ„"></p><p>ç³»ç»Ÿæ¶æ„ï¼Ÿï¼Ÿè¿™ä¹ˆè£…é€¼çš„è¯å“ˆå“ˆå“ˆå“ˆï¼Œå…¶å®ä¹Ÿå°±ä¼ ç»Ÿçš„B/Sæ¶æ„ï¼Œå‰åç«¯åˆ†ç¦»ã€‚å‰ç«¯é€šè¿‡å‘èµ·ajaxæ¥å£è¯·æ±‚ï¼ŒwebæœåŠ¡å™¨å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†å¹¶æ“ä½œæ•°æ®åº“æœåŠ¡å™¨ï¼Œè¿”å›jsonæ ¼å¼æ•°æ®åˆ°å‰ç«¯ï¼Œå‰ç«¯æ‹¿åˆ°æ•°æ®åï¼Œå¤„ç†æ•°æ®å¹¶è¿›è¡Œæ¸²æŸ“ã€‚</p><h2 id="åŠŸèƒ½æ¨¡å—è®¾è®¡"><a href="#åŠŸèƒ½æ¨¡å—è®¾è®¡" class="headerlink" title="åŠŸèƒ½æ¨¡å—è®¾è®¡"></a>åŠŸèƒ½æ¨¡å—è®¾è®¡</h2><p><img src="https://user-gold-cdn.xitu.io/2018/8/9/1651f235d31bd879?w=947&amp;h=659&amp;f=png&amp;s=96879" alt="åŠŸèƒ½æ¨¡å—"></p><p>è¿™æ˜¯å½“åˆé¡¹ç›®å¼€å§‹å‰çš„ä¸€ä¸ªç²—ç•¥åŠŸèƒ½æ¨¡å—è®¾è®¡ï¼Œå…¶ä¸­ä¸€å°éƒ¨åˆ†æ¨¡å—ç”±äºå½“åˆæ—¶é—´å…³ç³»è¿˜æœªåšå…¨ï¼Œä¸è¿‡å¤§éƒ¨åˆ†åŠŸèƒ½æ¨¡å—å·²ç»å®ç°ã€‚</p><h2 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h2><p>ç³»ç»Ÿæ•°æ®åº“çš„å­˜å‚¨ä¸»è¦åŒ…å«äº†ï¼šæ–‡ç« æ•°æ®å­˜å‚¨ï¼Œç”¨æˆ·æ•°æ®å­˜å‚¨ï¼Œç®¡ç†å‘˜å’Œåˆä½œä½œè€…æ•°æ®å­˜å‚¨ï¼Œæ–‡ç« è¯„è®ºå­˜å‚¨ï¼Œç”¨æˆ·é—´å…³ç³»å­˜å‚¨ã€‚å…¶ä¸­çš„æ–‡ç« æ•°æ®å­˜å‚¨åˆåˆ†ä¸ºå›¾æ–‡æ–‡ç« æ•°æ®å­˜å‚¨ã€é˜…è¯»æ–‡ç« æ•°æ®å­˜å‚¨ã€å½±è§†æ–‡ç« æ•°æ®å­˜å‚¨ã€éŸ³ä¹æ–‡ç« æ•°æ®å­˜å‚¨ã€ç”µå°æ–‡ç« æ•°æ®å­˜å‚¨ã€‚å…¶ä¸­çš„æ–‡ç« è¯„è®ºæ•°æ®å­˜å‚¨åˆåˆ†ä¸ºé˜…è¯»è¯„è®ºæ•°æ®å­˜å‚¨ã€å½±è§†è¯„è®ºæ•°æ®å­˜å‚¨ã€éŸ³ä¹è¯„è®ºæ•°æ®å­˜å‚¨ã€ç”µå°è¯„è®ºæ•°æ®å­˜å‚¨ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/18/1654d73d702c2790?w=843&amp;h=816&amp;f=png&amp;s=55313" alt="æ•°æ®åº“è®¾è®¡"></p><h1 id="æ¥ä¸‹æ¥"><a href="#æ¥ä¸‹æ¥" class="headerlink" title="æ¥ä¸‹æ¥"></a>æ¥ä¸‹æ¥</h1><p>ç°åœ¨å’±ä»¬ä¹Ÿå¯¹é¡¹ç›®åšäº†ä¸ªä»‹ç»ï¼Œå¹¶ä¸”å¯¹ç³»ç»Ÿåˆ†æå’Œç³»ç»Ÿè®¾è®¡åšäº†å¤§æ¦‚çš„ä»‹ç»ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥çš„æ–‡ç« ä¼šå¯¹ç³»ç»Ÿçš„å®ç°åšä»‹ç»ï¼Œä¼šä»‹ç»åˆ°é¡¹ç›®ä¸­ä¸»è¦çš„ä¸€äº›åŠŸèƒ½æ¨¡å—ï¼Œæˆ–è€…è¯´å¯æ‹¿å‡ºæ¥ä¸å¤§å®¶åˆ†äº«çš„æ¨¡å—ï¼Œä»¥åŠä»‹ç»è¿™ä¸ªé¡¹ç›®ä¹‹åè‡ªå·±çš„ä¸€ç‚¹ç‚¹æ€è€ƒã€‚</p><p>æœ¬äººæ°´å¹³ä¸€èˆ¬ï¼Œä»‹ç»çš„å¯èƒ½ä¹Ÿæ˜¯ä¸€äº›åŸºç¡€ï¼Œè§è°…è§è°…~~</p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Express </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
            <tag> Vue </tag>
            
            <tag> Node.js </tag>
            
            <tag> MongoDB </tag>
            
            <tag> Mongoose </tag>
            
            <tag> Sockit.io </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mongoose</title>
      <link href="/Mongoose.html"/>
      <content type="html"><![CDATA[<h2 id="ä½•ä¸ºMongooseï¼Ÿ"><a href="#ä½•ä¸ºMongooseï¼Ÿ" class="headerlink" title="ä½•ä¸ºMongooseï¼Ÿ"></a>ä½•ä¸ºMongooseï¼Ÿ</h2><p>ç®€å•çš„è¯´ï¼ŒMongooseå°±æ˜¯å¯¹nodeç¯å¢ƒä¸­MongoDBæ•°æ®åº“æ“ä½œçš„å°è£…ï¼Œä¸€ä¸ªå¯¹è±¡æ¨¡å‹å·¥å…·ï¼Œå°†æ•°æ®åº“ä¸­çš„æ•°æ®è½¬æ¢ä¸ºJavaScriptå¯¹è±¡ä»¥ä¾›æˆ‘ä»¬åœ¨åº”ç”¨ä¸­ä½¿ç”¨ã€‚</p><h2 id="Schemaã€Modelã€Entity"><a href="#Schemaã€Modelã€Entity" class="headerlink" title="Schemaã€Modelã€Entity"></a>Schemaã€Modelã€Entity</h2><p>åœ¨ä½¿ç”¨Mongooseå‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ Mongoose ä¸­çš„ä¸‰ä¸ªæ¦‚å¿µï¼šSchemaã€Modelã€Entity</p><h3 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h3><p><code>Schema</code>æ˜¯ä¸€ç§ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨çš„æ•°æ®åº“æ¨¡å‹éª¨æ¶ï¼Œä¸å…·å¤‡æ•°æ®åº“çš„æ“ä½œèƒ½åŠ›ï¼Œå…¶å®ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯è¡¨ç»“æ„çš„å®šä¹‰ã€‚</p><p>å¦‚ä½•åˆ›å»ºä¸€ä¸ªSchemaï¼Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const UserSchema = new Schema(&#123;</span><br><span class="line">    token: String,</span><br><span class="line">    is_banned: &#123;type: Boolean, default: false&#125;, //æ˜¯å¦ç¦è¨€</span><br><span class="line">    enable: &#123; type: Boolean, default: true &#125;, //ç”¨æˆ·æ˜¯å¦æœ‰æ•ˆ</span><br><span class="line">    is_actived: &#123;type: Boolean, default: false&#125;, //é‚®ä»¶æ¿€æ´»</span><br><span class="line">    username: String,</span><br><span class="line">    password: String,</span><br><span class="line">    email: String,  //emailå”¯ä¸€æ€§</span><br><span class="line">    code: String,</span><br><span class="line">    email_time: &#123;type: Date&#125;,</span><br><span class="line">    phone: &#123;type: String&#125;,</span><br><span class="line">    description: &#123; type: String, default: &quot;è¿™ä¸ªäººå¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹...&quot; &#125;,</span><br><span class="line">    avatar: &#123; type: String, default: &quot;http://p89inamdb.bkt.clouddn.com/default_avatar.png&quot; &#125;,</span><br><span class="line">    bg_url: &#123; type: String, default: &quot;http://p89inamdb.bkt.clouddn.com/FkagpurBWZjB98lDrpSrCL8zeaTU&quot;&#125;,</span><br><span class="line">    ip: String,</span><br><span class="line">    ip_location: &#123; type: Object &#125;,</span><br><span class="line">    agent: &#123; type: String &#125;, // ç”¨æˆ·ua</span><br><span class="line">    last_login_time: &#123; type: Date &#125;,</span><br><span class="line">    openid: &#123;</span><br><span class="line">        WeiChat: String,</span><br><span class="line">        WeiBo: String,</span><br><span class="line">        QQ: String,</span><br><span class="line">    &#125;,</span><br><span class="line">    create_time: &#123; type: Date &#125;,</span><br><span class="line">    // retrieve_time: &#123; type: Number &#125;, // ç”¨æˆ·å‘é€æ¿€æ´»è¯·æ±‚çš„æ—¶é—´</span><br><span class="line">    image_article: [&#123; type: mongoose.Schema.Types.ObjectId, ref: &apos;ImageArticle&apos;, &#125;],</span><br><span class="line">    collection_image_article: [&#123; type: mongoose.Schema.Types.ObjectId, ref: &apos;ImageArticle&apos;, &#125;],</span><br><span class="line">    collection_reading_article: [&#123; type: mongoose.Schema.Types.ObjectId, ref: &apos;ReadingArticle&apos;, &#125;],</span><br><span class="line">    collection_music_article: [&#123; type: mongoose.Schema.Types.ObjectId, ref: &apos;MusicArticle&apos;, &#125;],</span><br><span class="line">    collection_film_article: [&#123; type: mongoose.Schema.Types.ObjectId, ref: &apos;FilmArticle&apos;, &#125;],</span><br><span class="line">    collection_sound_article: [&#123; type: mongoose.Schema.Types.ObjectId, ref: &apos;SoundArticle&apos;, &#125;],</span><br><span class="line">    following_user: [&#123;type: mongoose.Schema.Types.ObjectId, ref: &apos;User&apos;&#125;], //å…³æ³¨</span><br><span class="line">    follower_user: [&#123;type: mongoose.Schema.Types.ObjectId, ref: &apos;User&apos;&#125;] //ç²‰ä¸</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><p>ç”±Schemaå‘å¸ƒç”Ÿæˆçš„æ¨¡å‹ï¼Œå…·æœ‰æŠ½è±¡å±æ€§å’Œè¡Œä¸ºçš„æ•°æ®åº“æ“ä½œå¯¹è±¡ã€‚æ­£æ˜¯Modelçš„å­˜åœ¨ï¼Œè®©æˆ‘ä»¬æ“ä½œæ•°æ®åº“æ›´åŠ æ–¹ä¾¿å¿«æ·ã€‚<br>ä¾èµ–<code>Schema</code>ç”Ÿæˆä¸€ä¸ª<code>Model</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const User = mongoose.model(&quot;User&quot;, UserSchema);</span><br><span class="line">module.exports = User;</span><br></pre></td></tr></table></figure><h3 id="Entity"><a href="#Entity" class="headerlink" title="Entity"></a>Entity</h3><p>ç”±Modelåˆ›å»ºçš„å®ä½“ï¼Œå®ƒçš„æ“ä½œä¹Ÿä¼šå½±å“æ•°æ®åº“ã€‚<br>ä¾èµ–<code>Model</code>ï¼Œåˆ›é€ ä¸€ä¸ª<code>Entity</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const UserModel = require(&apos;../../models/user/user&apos;)</span><br><span class="line">const newUser = new UserModel(&#123;</span><br><span class="line">    username: &apos;å°±è¿™æ ·å­å§&apos;,</span><br><span class="line">    password: sha1(&apos;xxx&apos;),</span><br><span class="line">    token: createToken(&apos;å°±è¿™æ ·å­å§&apos;),</span><br><span class="line">    email: &apos;651734877@qq.com&apos;,</span><br><span class="line">    phone: &apos;13003919397&apos;,</span><br><span class="line">    agent: req.headers[&apos;user-agent&apos;],</span><br><span class="line">    ip: ip,</span><br><span class="line">    ip_location: geoip.lookup(ip)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">exports.get = (req, res) =&gt; &#123;   </span><br><span class="line">  const articleId = req.query[&apos;id&apos;];   </span><br><span class="line">  ArticlesModel.findById(articleId, (err, result) =&gt; &#123;   </span><br><span class="line">    if (err) &#123;   </span><br><span class="line">      return res.status(400).send(&#123;   </span><br><span class="line">            message: &apos;æŸ¥æ‰¾å¤±è´¥&apos;,  data: []   </span><br><span class="line">      &#125;);   </span><br><span class="line">    &#125; else &#123;   </span><br><span class="line">      res.jsonp(&#123;   </span><br><span class="line">        data: [result]   </span><br><span class="line">      &#125;);   </span><br><span class="line">    &#125;   </span><br><span class="line">  &#125;);  </span><br><span class="line">&#125;;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">exports.add = (req, res) =&gt; &#123;    </span><br><span class="line">  const article = new ArticlesModel(req.body);   </span><br><span class="line">  article.save((err) =&gt; &#123;   </span><br><span class="line">    if (err) &#123;   </span><br><span class="line">      return res.status(400).send(&#123;   </span><br><span class="line">        message: &apos;æ–°å¢å¤±è´¥&apos;,   </span><br><span class="line">        data: []   </span><br><span class="line">      &#125;);   </span><br><span class="line">    &#125; else &#123;   </span><br><span class="line">      res.send(&#123;   </span><br><span class="line">        data: [article]   </span><br><span class="line">      &#125;);   </span><br><span class="line">    &#125;   </span><br><span class="line">  &#125;); </span><br><span class="line"></span><br><span class="line">&#125;;   </span><br><span class="line"></span><br><span class="line">exports.remove = (req, res) =&gt; &#123;  </span><br><span class="line">  const id = req.query[&apos;id&apos;];   </span><br><span class="line"></span><br><span class="line">  ArticlesModel.remove(&#123;&apos;_id&apos;: id&#125;, (err) =&gt; &#123;   </span><br><span class="line">    if (err) &#123;   </span><br><span class="line">       return res.status(400).send(&#123;   </span><br><span class="line">            message: &apos;åˆ é™¤å¤±è´¥&apos;,  </span><br><span class="line">            data: []   </span><br><span class="line">        &#125;);   </span><br><span class="line">    &#125; else &#123;   </span><br><span class="line">      res.send(&#123;status: 1&#125;);   </span><br><span class="line">    &#125;   </span><br><span class="line">  &#125;)  </span><br><span class="line">&#125;;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">exports.update = (req, res) =&gt; &#123;  </span><br><span class="line">  const id = req.body[&apos;id&apos;];   </span><br><span class="line">  ArticlesModel.findById(id, (err, result) =&gt; &#123;   </span><br><span class="line">    if (err) &#123;   </span><br><span class="line">       return res.send(&#123;   </span><br><span class="line">            message: &apos;æ›´æ–°å¤±è´¥&apos;,  </span><br><span class="line">            data: []   </span><br><span class="line">       &#125;);   </span><br><span class="line">    &#125; else &#123;   </span><br><span class="line">       delete req.body[&apos;id&apos;];   </span><br><span class="line">       const articles = _.extend(result, req.body);</span><br><span class="line">       articles.save((err, result) =&gt; &#123;   </span><br><span class="line">          if (err) &#123;   </span><br><span class="line">             return res.status(400).send(&#123;   </span><br><span class="line">                  message: &apos;æ›´æ–°å¤±è´¥&apos;,   </span><br><span class="line">                  data: []   </span><br><span class="line">              &#125;);   </span><br><span class="line">          &#125; else &#123;   </span><br><span class="line">             res.jsonp(&#123; data: [articles] &#125;);   </span><br><span class="line">          &#125;   </span><br><span class="line">       &#125;)   </span><br><span class="line">    &#125;   </span><br><span class="line">  &#125;)  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><p>ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹æ•ˆæœã€‚<br>åœ¨mongo Shellä¸­ï¼Œæˆ‘ä»¬åˆ›å»º10000æ¡æ•°æ®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mongo</span><br><span class="line"></span><br><span class="line">for (var i = 0; i &lt; 10000; i++)&#123;</span><br><span class="line">    db.users.insert(&#123;&apos;name&apos;:&apos;user&apos; + i&#125;); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><img src="http://oubl6fzsm.bkt.clouddn.com/mongoose-explain.jpg" alt="image"><br>å›¾ä¸­å¯ä»¥çœ‹å‡º<code>executionTimeMillis</code>å­—æ®µä¸º7ï¼Œ è¡¨ç¤ºçŸ¥æ™“æ—¶é—´ä¸º7æ¯«ç§’ã€‚<br>ç°åœ¨æˆ‘ä»¬æ¥æ·»åŠ ç´¢å¼•åæ‰§è¡ŒæŸ¥è¯¢ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.hello.ensureIndex(&#123;name: 1&#125;);</span><br><span class="line">db.hello.find(&#123;&apos;name&apos;: &apos;user1000&apos;&#125;).explain(&apos;executionStats&apos;)</span><br></pre></td></tr></table></figure></p><p><img src="http://oubl6fzsm.bkt.clouddn.com/mongoose-explain2.jpg" alt="image"><br>å›¾ä¸­å¯ä»¥çœ‹å‡º<code>executionTimeMillis</code>å­—æ®µä¸º1ã€‚</p><p>ä»ä¸Šé¢çš„å®ä¾‹å¯ä»¥çœ‹å‡ºï¼ŒåŠ äº†ç´¢å¼•åï¼Œèƒ½å¿«é€Ÿçš„æŸ¥è¯¢ä¸€æ¡ï¼Œè¿™å¯ä»¥çœ‹åˆ°ç´¢å¼•æå¤§çš„æå‡äº†æŸ¥è¯¢é€Ÿåº¦ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨Mongooseåˆ›å»ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const ArticlesSchema = new Schema(&#123;   </span><br><span class="line">  username: &#123;  </span><br><span class="line">    ...</span><br><span class="line">    index: true   </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><strong>æ³¨</strong>: å¯¹äºæ·»åŠ çš„æ¯ä¸€æ¡ç´¢å¼•ï¼Œæ¯æ¬¡å†™æ“ä½œï¼ˆæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰éƒ½å°†è€—è´¹æ›´å¤šçš„æ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸ä»…è¦æ›´æ–°æ–‡æ¡£ï¼Œè¿˜è¦æ›´æ–°é›†åˆä¸Šçš„æ‰€æœ‰ç´¢å¼•ã€‚å› æ­¤ï¼Œmongodbé™åˆ¶æ¯ä¸ªé›†åˆæœ€å¤šæœ‰64ä¸ªç´¢å¼•ã€‚é€šå¸¸ï¼Œåœ¨ä¸€ä¸ªç‰¹å®šçš„é›†åˆä¸Šï¼Œä¸åº”è¯¥æ‹¥æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„ç´¢å¼•ã€‚</p><h2 id="éªŒè¯å™¨Validate"><a href="#éªŒè¯å™¨Validate" class="headerlink" title="éªŒè¯å™¨Validate"></a>éªŒè¯å™¨Validate</h2><h3 id="å†…ç½®éªŒè¯å™¨"><a href="#å†…ç½®éªŒè¯å™¨" class="headerlink" title="å†…ç½®éªŒè¯å™¨"></a>å†…ç½®éªŒè¯å™¨</h3><p>Mongooseæä¾›äº†å‡ ä¸ªå†…ç½®éªŒè¯å™¨ã€‚</p><ul><li>æ‰€æœ‰çš„SchemaTypeéƒ½æœ‰å†…ç½®çš„requireéªŒè¯å™¨ã€‚</li><li>æ•°å€¼ï¼ˆ Numbers ï¼‰æœ‰æœ€å¤§ï¼ˆmanï¼‰å’Œæœ€å°ï¼ˆminï¼‰çš„éªŒè¯å™¨ã€‚</li><li>å­—ç¬¦ä¸²ï¼ˆStringï¼‰æœ‰enumï¼ŒmaxLengthå’ŒminLengthéªŒè¯å™¨ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const UsersSchema = new Schema(&#123;  </span><br><span class="line">  ...</span><br><span class="line">  age: &#123;   </span><br><span class="line">    type: Number,   </span><br><span class="line">    min: [18, &quot;è‡ªå®šä¹‰é”™è¯¯æç¤º&quot;]   </span><br><span class="line">    max: 30,   </span><br><span class="line">    required: true   </span><br><span class="line">  &#125;,   </span><br><span class="line">  sex: &#123;   </span><br><span class="line">    type: String,   </span><br><span class="line">    enum: &#123;   </span><br><span class="line">      values: [&apos;male&apos;, &apos;female&apos;],</span><br><span class="line">      message: &apos;`&#123;PATH&#125;` æ˜¯ `&#123;VALUE&#125;`ï¼Œ æ‚¨å¿…é¡»ç¡®è®¤æ‚¨çš„æ€§åˆ«!&apos;   </span><br><span class="line">    &#125;,   </span><br><span class="line">    required: true   </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;);  </span><br><span class="line"></span><br><span class="line">mongoose.model(&apos;users&apos;, UsersSchema);</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰éªŒè¯å™¨"><a href="#è‡ªå®šä¹‰éªŒè¯å™¨" class="headerlink" title="è‡ªå®šä¹‰éªŒè¯å™¨"></a>è‡ªå®šä¹‰éªŒè¯å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const UsersSchema = new Schema(&#123;  </span><br><span class="line">  ...   </span><br><span class="line">  phone: &#123;   </span><br><span class="line">    type: String,   </span><br><span class="line">    validate: &#123;   </span><br><span class="line">      validator: function (v) &#123;</span><br><span class="line">          return /1[3|5|8]\d&#123;9&#125;/.test(v);</span><br><span class="line">      &#125;,</span><br><span class="line">      message: &apos;`&#123;PATH&#125;` å¿…é¡»æ˜¯æœ‰æ•ˆçš„11ä½æ‰‹æœºå·ç !&apos;  </span><br><span class="line">    &#125;,   </span><br><span class="line">    required: true   </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">UsersSchema.path(&apos;phone&apos;).validate(function (v) &#123;</span><br><span class="line">    return /1[3|5|8]\d&#123;9&#125;/.test(v);</span><br><span class="line">&#125;, &apos;`&#123;PATH&#125;` å¿…é¡»æ˜¯æœ‰æ•ˆçš„11ä½æ‰‹æœºå·ç !&apos;);</span><br></pre></td></tr></table></figure><h3 id="é”™è¯¯æç¤º"><a href="#é”™è¯¯æç¤º" class="headerlink" title="é”™è¯¯æç¤º"></a>é”™è¯¯æç¤º</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const user = new UsersModel(req.body);</span><br><span class="line"></span><br><span class="line">user.save((err, result) =&gt; &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    console.error(err.errors[&apos;name&apos;][&apos;message&apos;]);</span><br><span class="line">    return res.status(400)</span><br><span class="line">      .send(&#123;</span><br><span class="line">        message: err</span><br><span class="line">       &#125;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    res.jsonp(user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="è”è¡¨æŸ¥è¯¢"><a href="#è”è¡¨æŸ¥è¯¢" class="headerlink" title="è”è¡¨æŸ¥è¯¢"></a>è”è¡¨æŸ¥è¯¢</h2><p>å¦‚æœä½ ä½¿ç”¨è¿‡MySqlï¼Œè‚¯å®šç”¨è¿‡joinï¼Œç”¨æ¥è”è¡¨æŸ¥è¯¢ï¼Œä½†Mongooseä¸­å¹¶æ²¡æœ‰joinï¼Œä¸è¿‡å®ƒæä¾›äº†ä¸€ç§æ›´æ–¹ä¾¿å¿«æ·çš„æ–¹æ³•ï¼š<code>Population</code>ã€‚<br>ç”¨ç®€çŸ­çš„è¯æ¥æ¦‚æ‹¬Populationçš„ä½¿ç”¨ï¼šåœ¨ä¸€ä¸ªCollection(articles)ä¸­å®šä¹‰ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªCollection(comment)çš„_idå­—æ®µçš„å­—æ®µ(comment)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">//FilmComment</span><br><span class="line">const filmCommentSchema = new Schema(&#123;</span><br><span class="line">    ...</span><br><span class="line">    article_id: &#123;type: mongoose.Schema.Types.ObjectId, ref: &apos;FilmArticle&apos;, required: true&#125;,</span><br><span class="line">    ...</span><br><span class="line">    reply_to_id: &#123;type: mongoose.Schema.Types.ObjectId, ref: &apos;FilmComment&apos;&#125;   //refçš„å€¼æ˜¯æ¨¡å‹(model)åç§° //è¢«å›å¤çš„è¯„è®ºid</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br><span class="line">const FilmComment = mongoose.model(&apos;FilmComment&apos;, filmCommentSchema);</span><br><span class="line">module.exports = FilmComment</span><br><span class="line"></span><br><span class="line">//FilmArticle</span><br><span class="line">const filmArticleSchema = new Schema(&#123;</span><br><span class="line">    ...</span><br><span class="line">    comment: [&#123;type: mongoose.Schema.Types.ObjectId, ref: &apos;FilmComment&apos;&#125;],</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br><span class="line">let FilmArticle = mongoose.model(&apos;FilmArticle&apos;, filmArticleSchema);</span><br><span class="line">module.exports = FilmArticle</span><br><span class="line"></span><br><span class="line">const newFilmComment = req.body.reply_to_id ? new FilmCommentModel(&#123;</span><br><span class="line">    article_id: req.body.article_id,</span><br><span class="line">    content: content,</span><br><span class="line">    create_time: Date.now(),</span><br><span class="line">    reply_to_id: req.body.reply_to_id</span><br><span class="line">&#125;) : new FilmCommentModel(&#123;</span><br><span class="line">    article_id: req.body.article_id,</span><br><span class="line">    content: content,</span><br><span class="line">    create_time: Date.now(),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">await FilmCommentModel.create(newFilmComment)</span><br><span class="line">const newFilmArticle = await FilmArticleModel.findByIdAndUpdate(req.body.article_id, &#123;</span><br><span class="line">    $push&apos;: &#123;</span><br><span class="line">        comment: newFilmComment._id</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;, &#123;new: true&#125;).populate(&#123;</span><br><span class="line">    path: &apos;comment&apos;,</span><br><span class="line">    model: &apos;FilmComment&apos;,</span><br><span class="line">    populate: &#123;</span><br><span class="line">        path: &apos;reply_to_id&apos;,</span><br><span class="line">        model: &apos;FilmComment&apos;,</span><br><span class="line">        populate: &#123;</span><br><span class="line">            path: &apos;user_id&apos;,</span><br><span class="line">            select: &#123;</span><br><span class="line">                password: 0, token: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            model: &apos;User&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="è™šæ‹Ÿå±æ€§VirtualType"><a href="#è™šæ‹Ÿå±æ€§VirtualType" class="headerlink" title="è™šæ‹Ÿå±æ€§VirtualType"></a>è™šæ‹Ÿå±æ€§VirtualType</h2><p>è™šæ‹Ÿå±æ€§å¹¶ä¸ä¼šå­˜å‚¨åˆ°MongoDBä¸­ï¼Œåˆ©ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ ¼å¼åŒ–å’Œè‡ªå®šä¹‰ç»„åˆå±æ€§å€¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const UsersSchema = new Schema(&#123;  </span><br><span class="line">  ...   </span><br><span class="line">  address: &#123;   </span><br><span class="line">    city: &#123;type: String&#125;,   </span><br><span class="line">    street: &#123;type: String&#125;   </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;);</span><br><span class="line">const address = UsersSchema.virtual(&apos;address.full&apos;);   </span><br><span class="line"></span><br><span class="line">address.get(function () &#123;   </span><br><span class="line">  return this.address.city + &apos; &apos; + this.address.street;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p>æˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡æ’ä»¶å½¢å¼æ¥æ‹“å±•Schemaçš„åŠŸèƒ½ã€‚</p><p>æ¯”å¦‚æ–‡ç« ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹æ–‡ç« æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šæ·»åŠ ä¸€ä¸ªæœ€åç¼–è¾‘æ—¶é—´ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥æ¯æ¬¡ä¿®æ”¹æ—¶éƒ½æ‰‹åŠ¨æ›´æ–°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ’ä»¶æ¥è‡ªåŠ¨æ›´æ–°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// plugins/plugins.js  </span><br><span class="line">module.exports = &#123;   </span><br><span class="line">  lastModified(schema) &#123;</span><br><span class="line">    schema.add(&#123; lastMod: Date &#125;)</span><br><span class="line">    schema.pre(&apos;save&apos;, function (next) &#123;    //å‰ç½®é’©å­</span><br><span class="line">      this.lastMod = new Date;   </span><br><span class="line">      next()   </span><br><span class="line">    &#125;)   </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// articles/filmArticles.js</span><br><span class="line"></span><br><span class="line">const plugins = require(&apos;../plugins/plugins&apos;);  </span><br><span class="line"></span><br><span class="line">filmArticlesSchema.plugin(plugins.lastModified);</span><br></pre></td></tr></table></figure></p><h2 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h2><p>MongoDBä¸­èšåˆ(aggregate)ä¸»è¦ç”¨äºå¤„ç†æ•°æ®(è¯¸å¦‚ç»Ÿè®¡å¹³å‡å€¼,æ±‚å’Œç­‰)ï¼Œå¹¶è¿”å›è®¡ç®—åçš„æ•°æ®ç»“æœã€‚æœ‰ç‚¹ç±»ä¼¼sqlè¯­å¥ä¸­çš„ count(*)ã€‚</p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mongoose </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>HTTPç¼“å­˜ç­–ç•¥ä¸å¢é‡æ›´æ–°æ€»ç»“</title>
      <link href="/HTTP%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5%E4%B8%8E%E5%A2%9E%E9%87%8F%E6%9B%B4%E6%96%B0.html"/>
      <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p>æœ¬è®ºæ–‡å¯¹åœ¨ç§»åŠ¨äº’è”ç½‘çš„å¤§ç¯å¢ƒä¸‹ï¼Œäººä»¬å¯¹é˜…è¯»çš„éœ€æ±‚å’Œå­˜åœ¨çš„é—®é¢˜ä»¥åŠå‘å±•è¶‹åŠ¿è¿›è¡Œäº†æ·±å…¥åˆ†æç ”ç©¶ä¹‹åï¼Œä¸»è¦ç›®çš„æ˜¯è®¾è®¡ä¸€å¥—ç®€çº¦ä¼˜é›…é£æ ¼çš„UIï¼Œå³UserInterfaceï¼ˆç”¨æˆ·ç•Œé¢ï¼‰ï¼Œé‡‡ç”¨<code>Express</code>ä¸ºNode.jsçš„webå¼€å‘æ¡†æ¶ï¼Œ<code>Mongoose</code>æ¨¡å—æ¥ç®¡ç†éå…³ç³»å‹æ•°æ®åº“MongoDBï¼Œåœ¨å‰ç«¯å·¥ç¨‹ä¸­ä¸»è¦è¿ç”¨äº†æ¸è¿›å¼JavaScriptæ¡†æ¶<code>Vue.js</code>ï¼Œä½¿ç”¨<code>Vue-router</code>åšå‰ç«¯é¡µé¢è·¯ç”±çš„è·³è½¬ï¼Œä½¿ç”¨<code>Axios</code>ä½œä¸ºHTTPè¯·æ±‚åº“ï¼ŒåŒæ—¶ä½¿ç”¨<code>Vuex</code>è´Ÿè´£å‰ç«¯å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œä½¿ç”¨<code>ElementUI</code>ä½œä¸ºç•Œé¢åŸºç¡€ç»„ä»¶åº“ï¼Œä½¿ç”¨<code>Webpack</code>è¿›è¡Œæ¨¡å—åŒ–æ‰“åŒ…ï¼Œå¹¶ç»“åˆHTML5ç›¸å…³æŠ€æœ¯æœ€ç»ˆå®ç°ä¸€ä¸ªåŒ…å«<strong>å›¾æ–‡ç±»ã€é˜…è¯»ç±»ã€å½±è§†ç±»ã€éŸ³ä¹ç±»å’Œç”µå°ç±»äº”å¤§ç‰ˆå—çš„æ–‡è‰ºç±»é˜…è¯»ç³»ç»Ÿ</strong>ï¼Œå–åä¸º<code>Moment</code>ï¼Œæ„ä¸ºç‰‡åˆ»ï¼Œæ—¨åœ¨ä¸ºäººä»¬æä¾›ä¸€ä¸ªå¹³å°ï¼Œè®©äººä»¬åœ¨ç¢ç‰‡åŒ–çš„æ—¶é—´é‡Œè¿›è¡Œæœ‰æ•ˆé˜…è¯»ã€‚å°†å®ç°ç³»ç»Ÿä¸­çš„ä¸¤å¤§ä¸»è¦éƒ¨åˆ†ï¼š<strong>é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ</strong> å’Œ <strong>é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp</strong>ã€‚        <br> <br>                      &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;â€” æ‘˜è‡ªæœ¬äººè®ºæ–‡</p></blockquote><p>å¥½äº†å¥½äº†ï¼Œä»¥ä¸Šçº¯å±è£…xï¼Œä¸‰æµçš„å­¦æ ¡ä¸‰æµçš„æ¯•ä¸šè®¾è®¡ï¼Œçœ‹å®˜éšæ„å°±å¥½ã€‚å¼•è¨€ä¸­åšäº†æ¯•ä¸šè®¾è®¡é¡¹ç›®çš„ä»‹ç»ï¼Œå®ç°ä¸€ä¸ªåŒ…å«å›¾æ–‡ç±»ã€é˜…è¯»ç±»ã€å½±è§†ç±»ã€éŸ³ä¹ç±»å’Œç”µå°ç±»äº”å¤§ç‰ˆå—çš„<strong>æ–‡è‰ºç±»é˜…è¯»ç³»ç»Ÿ</strong>ï¼Œå–åä¸º<code>Moment</code>ã€‚ä¸»è¦è¿ç”¨åˆ°çš„æŠ€æœ¯æ ˆæœ‰ï¼š</p><ul><li>Node.js â€” Express</li><li>MongoDB â€” Mongoose</li><li>Vue</li><li>Vue-router</li><li>Axios</li><li>Vuex</li><li>ElementUI</li><li>Socket.io</li><li>â€¦</li></ul><p>åœ¨é¡¹ç›®å¼€å§‹ä¹‹å‰è¿˜å¾ˆæ¿€åŠ¨ä¹˜è¿˜æ˜¯å­¦ç”Ÿçš„æ—¶å€™åœ¨è…¾è®¯äº‘ä¸Šä¹°äº†äº‘æœåŠ¡å™¨ï¼Œæ³¨å†Œäº†ç¬¬äºŒä¸ªåŸŸå<code>momentin.cn</code>ï¼Œåˆ°åé¢éƒ¨ç½²ä¸Šå»å‘ç°æ¥å£è¯·æ±‚å¤ªæ…¢äº†ï¼Œäºæ˜¯ä¹è¿˜æ˜¯æ”¾å¼ƒäº†ï¼Œå…¶å®æœ€é‡è¦çš„è¿˜æ˜¯bugå¤šå¤šå“ˆå“ˆå“ˆï¼Œæ€§èƒ½ä¼˜åŒ–è¿˜æ²¡åšå¥½ã€‚ä¸è¿‡åé¢ä¼šç»§ç»­éƒ¨ç½²ä¸Šçº¿ã€‚</p><h1 id="ç³»ç»Ÿä¸šåŠ¡åˆ†æ"><a href="#ç³»ç»Ÿä¸šåŠ¡åˆ†æ" class="headerlink" title="ç³»ç»Ÿä¸šåŠ¡åˆ†æ"></a>ç³»ç»Ÿä¸šåŠ¡åˆ†æ</h1><p>ä½œä¸ºä¸€ä¸ªæ–‡è‰ºç±»é˜…è¯»ç³»ç»Ÿï¼Œæœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯ä¸ºç”¨æˆ·æä¾›ä¼˜è´¨çš„é˜…è¯»ä½“éªŒå’Œä¸°å¯Œçš„é˜…è¯»å†…å®¹ã€‚ä»è€Œï¼Œä»¥æ­¤ä½œä¸ºç›®æ ‡ï¼Œæœ¬ç³»ç»Ÿä¸šåŠ¡ä¸­å¯¹é˜…è¯»æ–‡ç« çš„åˆ†ç±»åˆåˆ†ä¸ºå›¾æ–‡ç±»ã€é˜…è¯»ç±»ã€å½±è§†ç±»ã€éŸ³ä¹ç±»å’Œç”µå°ç±»è¿™äº”ä¸ªç‰ˆå—ï¼Œäºç›®äºè€³å¯¹æ–‡ç« çš„å½¢å¼è¿›è¡Œå¤šæ ·åŒ–ã€‚åˆå°†æ•´ä¸ªæ–‡è‰ºç±»é˜…è¯»ç³»ç»Ÿçš„ä¸šåŠ¡åˆ’åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿå’Œé¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebAppï¼Œç³»ç»Ÿçš„éœ€æ±‚åˆ†æå°†å›´ç»•è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œå±•å¼€ã€‚</p><h2 id="é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp"><a href="#é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp" class="headerlink" title="é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp"></a>é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebApp</h2><p>é¢å‘ç”¨æˆ·çš„ç§»åŠ¨ç«¯WebAppæœ€é‡è¦çš„ä¸šåŠ¡æ˜¯æä¾›æ–‡ç« çš„é˜…è¯»ï¼Œè¿™ä¸ªä¸šåŠ¡æ˜¯é¢å‘æ‰€æœ‰å¯ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·ã€‚å½“ç„¶è€ƒè™‘åˆ°ç”¨æˆ·ä¸ä»…ä»…æ»¡è¶³äºé˜…è¯»ï¼Œä¹Ÿéœ€è¦ä»¥æ–‡ç« ä½œä¸ºåª’ä»‹è¿›è¡Œç”¨æˆ·ä¹‹é—´çš„ç¤¾äº¤æ€§æ´»åŠ¨ï¼Œå› æ­¤ç³»ç»Ÿå¢åŠ äº†å›¾æ–‡å¹¿åœºæ¨¡å—ï¼Œç±»ä¼¼äºä¸€ä¸ªåœˆå­ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥å‘å¸ƒå›¾æ–‡åŠæŸ¥çœ‹ï¼Œå†æ¯”å¦‚å…³æ³¨ï¼Œäº’ç›¸è¯„è®ºç­‰å„ç§äº’åŠ¨ã€‚ç¤¾äº¤æ€§çš„æ“ä½œåå¾€å¾€éœ€è¦ç»™ç”¨æˆ·ä¸€äº›æé†’ï¼Œä¸ç„¶å°†å¤±å»æ„ä¹‰ï¼Œè€Œä¸”å¿…é¡»ä¿è¯è¿™ä¸ªæé†’æ˜¯å®æ—¶çš„ï¼Œæ‰€ä»¥éœ€è¦å¯¹ç”¨æˆ·è¿›è¡Œå®æ—¶çš„æ¶ˆæ¯æ¨é€ã€‚å½“ç„¶ç”¨æˆ·éš¾å…å¯¹æ–‡ç« æœ¬èº«è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚è¯„è®ºã€ç‚¹èµã€æ”¶è—ç­‰æ“ä½œã€‚</p><h2 id="é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ"><a href="#é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ"></a>é¢å‘ç®¡ç†å‘˜å’Œåˆä½œä½œè€…çš„åå°ç®¡ç†ç³»ç»Ÿ</h2><p>è¿™ä¸ªç³»ç»Ÿçš„ç®¡ç†ï¼Œç³»ç»Ÿä¸»è¦åˆ†ä¸ºä¸¤ç§è§’è‰²è¿›è¡Œç®¡ç†ã€‚ç³»ç»Ÿç®¡ç†å‘˜è§’è‰²å¯ä»¥çœ‹åˆ°ç§»åŠ¨ç«¯WebAppæ•´ä½“æ•°æ®æƒ…å†µï¼Œå¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œç®¡ç†åŒ…æ‹¬åˆä½œä½œè€…å’Œæ‰€æœ‰æ™®é€šç”¨æˆ·ï¼Œä»¥åŠå¯ä»¥å¯¹å›¾æ–‡ã€é˜…è¯»ã€å½±è§†ã€éŸ³ä¹ã€ç”µå°æ‰€æœ‰æ–‡ç« è¿›è¡Œç®¡ç†ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ç³»ç»Ÿçš„å…¶ä»–æ¨¡å—è¿›è¡Œç®¡ç†ï¼Œä¾‹å¦‚å¹¿å‘Šæ¨¡å—ã€è½®æ’­å›¾æ¨¡å—ã€å…¬å‘Šæ¨¡å—ç­‰ã€‚è€Œä½œè€…è§’è‰²çš„æƒé™å°±ç›¸å¯¹æ¯”è¾ƒå°‘ï¼Œä»…åŒ…å«å¯¹æ–‡ç« çš„ç®¡ç†ã€‚</p><p>æ³¨ï¼š ç”±äºæ—¶é—´å…³ç³» WebAppæ•´ä½“æ•°æ®æƒ…å†µè¿™å—ï¼Œå®ƒçš„æ•°æ®åº“å­—æ®µæ˜¯æœ‰ï¼Œä½†æ˜¯å½“æ—¶åŒ†åŒ†å¿™å¿™æ²¡æ—¶é—´å†™æ¥å£ï¼Œç›®å‰ä»¥é™æ€å±•ç¤ºã€‚ç³»ç»Ÿç®¡ç†è¿™ä¸€å—ä¹Ÿæ²¡å¤„ç†å®Œæ¯•ã€‚</p><h1 id="ç³»ç»Ÿè®¾è®¡"><a href="#ç³»ç»Ÿè®¾è®¡" class="headerlink" title="ç³»ç»Ÿè®¾è®¡"></a>ç³»ç»Ÿè®¾è®¡</h1><h2 id="ç³»ç»Ÿæ¶æ„è®¾è®¡"><a href="#ç³»ç»Ÿæ¶æ„è®¾è®¡" class="headerlink" title="ç³»ç»Ÿæ¶æ„è®¾è®¡"></a>ç³»ç»Ÿæ¶æ„è®¾è®¡</h2><p><img src="https://user-gold-cdn.xitu.io/2018/8/9/1651f1aeaf2894a8?w=613&amp;h=594&amp;f=png&amp;s=43570" alt="ç³»ç»Ÿæ¶æ„"></p><p>ç³»ç»Ÿæ¶æ„ï¼Ÿï¼Ÿè¿™ä¹ˆè£…é€¼çš„è¯å“ˆå“ˆå“ˆå“ˆï¼Œå…¶å®ä¹Ÿå°±ä¼ ç»Ÿçš„B/Sæ¶æ„ï¼Œå‰åç«¯åˆ†ç¦»ã€‚å‰ç«¯é€šè¿‡å‘èµ·ajaxæ¥å£è¯·æ±‚ï¼ŒwebæœåŠ¡å™¨å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†å¹¶æ“ä½œæ•°æ®åº“æœåŠ¡å™¨ï¼Œè¿”å›jsonæ ¼å¼æ•°æ®åˆ°å‰ç«¯ï¼Œå‰ç«¯æ‹¿åˆ°æ•°æ®åï¼Œå¤„ç†æ•°æ®å¹¶è¿›è¡Œæ¸²æŸ“ã€‚</p><h2 id="åŠŸèƒ½æ¨¡å—è®¾è®¡"><a href="#åŠŸèƒ½æ¨¡å—è®¾è®¡" class="headerlink" title="åŠŸèƒ½æ¨¡å—è®¾è®¡"></a>åŠŸèƒ½æ¨¡å—è®¾è®¡</h2><p><img src="https://user-gold-cdn.xitu.io/2018/8/9/1651f235d31bd879?w=947&amp;h=659&amp;f=png&amp;s=96879" alt="åŠŸèƒ½æ¨¡å—"></p><p>è¿™æ˜¯å½“åˆé¡¹ç›®å¼€å§‹å‰çš„ä¸€ä¸ªç²—ç•¥åŠŸèƒ½æ¨¡å—è®¾è®¡ï¼Œå…¶ä¸­ä¸€å°éƒ¨åˆ†æ¨¡å—ç”±äºå½“åˆæ—¶é—´å…³ç³»è¿˜æœªåšå…¨ï¼Œä¸è¿‡å¤§éƒ¨åˆ†åŠŸèƒ½æ¨¡å—å·²ç»å®ç°ã€‚</p><h2 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h2><p>ç³»ç»Ÿæ•°æ®åº“çš„å­˜å‚¨ä¸»è¦åŒ…å«äº†ï¼šæ–‡ç« æ•°æ®å­˜å‚¨ï¼Œç”¨æˆ·æ•°æ®å­˜å‚¨ï¼Œç®¡ç†å‘˜å’Œåˆä½œä½œè€…æ•°æ®å­˜å‚¨ï¼Œæ–‡ç« è¯„è®ºå­˜å‚¨ï¼Œç”¨æˆ·é—´å…³ç³»å­˜å‚¨ã€‚å…¶ä¸­çš„æ–‡ç« æ•°æ®å­˜å‚¨åˆåˆ†ä¸ºå›¾æ–‡æ–‡ç« æ•°æ®å­˜å‚¨ã€é˜…è¯»æ–‡ç« æ•°æ®å­˜å‚¨ã€å½±è§†æ–‡ç« æ•°æ®å­˜å‚¨ã€éŸ³ä¹æ–‡ç« æ•°æ®å­˜å‚¨ã€ç”µå°æ–‡ç« æ•°æ®å­˜å‚¨ã€‚å…¶ä¸­çš„æ–‡ç« è¯„è®ºæ•°æ®å­˜å‚¨åˆåˆ†ä¸ºé˜…è¯»è¯„è®ºæ•°æ®å­˜å‚¨ã€å½±è§†è¯„è®ºæ•°æ®å­˜å‚¨ã€éŸ³ä¹è¯„è®ºæ•°æ®å­˜å‚¨ã€ç”µå°è¯„è®ºæ•°æ®å­˜å‚¨ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2018/8/18/1654d73d702c2790?w=843&amp;h=816&amp;f=png&amp;s=55313" alt="æ•°æ®åº“è®¾è®¡"></p><h1 id="æ¥ä¸‹æ¥"><a href="#æ¥ä¸‹æ¥" class="headerlink" title="æ¥ä¸‹æ¥"></a>æ¥ä¸‹æ¥</h1><p>ç°åœ¨å’±ä»¬ä¹Ÿå¯¹é¡¹ç›®åšäº†ä¸ªä»‹ç»ï¼Œå¹¶ä¸”åšäº†å¤§æ¦‚çš„ç³»ç»Ÿåˆ†æå’Œç³»ç»Ÿè®¾è®¡ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ç³»åˆ—æ–‡ç« ä¸­ä¼šä»‹ç»åˆ°é¡¹ç›®ä¸­ä¸»è¦çš„ä¸€äº›åŠŸèƒ½æ¨¡å—ï¼Œæˆ–è€…è¯´å¯æ‹¿å‡ºæ¥ä¸å¤§å®¶æ¢è®¨çš„æ¨¡å—ã€‚æœ¬äººæ°´å¹³ä¸€èˆ¬ï¼Œä»‹ç»çš„å¯èƒ½ä¹Ÿæ˜¯ä¸€äº›åŸºç¡€ï¼Œè§è°…è§è°…ï¼Œå½“æ—¶è‡ªå·±ä¼šç»§ç»­åŠªåŠ›~~</p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Express </tag>
            
            <tag> æ¯•ä¸šè®¾è®¡ </tag>
            
            <tag> Vue </tag>
            
            <tag> Node.js </tag>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>videoæ ‡ç­¾ç§»åŠ¨ç«¯å…¼å®¹æ€§é—®é¢˜æ€»ç»“</title>
      <link href="/video-compatible.html"/>
      <content type="html"><![CDATA[<p>ç”±äºvideoæ ‡ç­¾åœ¨å„ä¸ªå¹³å°ä¸‹å­˜åœ¨çš„å„ç§å„æ ·çš„å…¼å®¹æ€§é—®é¢˜ï¼Œé‡åˆ°äº†å„ç§å‘ï¼Œç›®å‰æ€»ç»“äº†ä¸‹ç¯‡ï¼Œå¾…æ›´æ–°~~</p><a id="more"></a><h4 id="å¾®ä¿¡ä¸‹å†…ç½®çš„æ’­æ”¾å™¨"><a href="#å¾®ä¿¡ä¸‹å†…ç½®çš„æ’­æ”¾å™¨" class="headerlink" title="å¾®ä¿¡ä¸‹å†…ç½®çš„æ’­æ”¾å™¨"></a>å¾®ä¿¡ä¸‹å†…ç½®çš„æ’­æ”¾å™¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;video class=&quot;js-video&quot;</span><br><span class="line">        loop</span><br><span class="line">        airplay=&quot;allow&quot;</span><br><span class="line">        x5-playsinline /**/</span><br><span class="line">        playsinline /*IOSå¾®ä¿¡æµè§ˆå™¨æ”¯æŒå°æ’­æ”¾*/ </span><br><span class="line">        webkit-playsinline /*è¿™ä¸ªå±æ€§æ˜¯ios 10ä¸­è®¾ç½®å¯ä»¥è®©è§†é¢‘åœ¨å°çª—å†…æ’­æ”¾ï¼Œä¹Ÿå°±æ˜¯ä¸æ˜¯å…¨å±æ’­æ”¾*/  </span><br><span class="line">        preload=&quot;auto&quot; /*é¢„åŠ è½½*/</span><br><span class="line">&gt;</span><br><span class="line">&lt;/video&gt;</span><br></pre></td></tr></table></figure><h4 id="å®‰å“å¾®ä¿¡ä¸‹ä¸èƒ½è‡ªåŠ¨æ’­æ”¾"><a href="#å®‰å“å¾®ä¿¡ä¸‹ä¸èƒ½è‡ªåŠ¨æ’­æ”¾" class="headerlink" title="å®‰å“å¾®ä¿¡ä¸‹ä¸èƒ½è‡ªåŠ¨æ’­æ”¾"></a>å®‰å“å¾®ä¿¡ä¸‹ä¸èƒ½è‡ªåŠ¨æ’­æ”¾</h4><p>å®‰å“å¾®ä¿¡ä¸‹autoplayæ— æ•ˆï¼Œä¸èƒ½è‡ªåŠ¨æ’­æ”¾ï¼Œå¯ä»¥é€šè¿‡<strong>ç”¨æˆ·äº¤äº’è¿›è¡Œæ‰‹åŠ¨æ’­æ”¾</strong>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//åœ¨å®‰å“å¾®ä¿¡ä¸‹</span><br><span class="line">$(&apos;body&apos;).one(&apos;touchstart&apos;, function () &#123;</span><br><span class="line">    //ioså¾®ä¿¡ä¸‹å¯ä»¥è‡ªåŠ¨æ’­æ”¾</span><br><span class="line">    if (is.iOS) &#123;</span><br><span class="line">         return;</span><br><span class="line">    </span><br><span class="line">    $(&apos;.video-icon&apos;).hide()</span><br><span class="line">    $(&apos;.js-video&apos;)[0].play();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="safariä¸‹æ— æ³•è‡ªåŠ¨æ’­æ”¾"><a href="#safariä¸‹æ— æ³•è‡ªåŠ¨æ’­æ”¾" class="headerlink" title="safariä¸‹æ— æ³•è‡ªåŠ¨æ’­æ”¾"></a>safariä¸‹æ— æ³•è‡ªåŠ¨æ’­æ”¾</h4><p>åœ¨safariä¸‹ï¼Œautoplayä¹Ÿæ— æ•ˆï¼Œåœ¨iphoneä¸Šåšæµ‹è¯•ï¼Œå‘ç°autoplayå±æ€§åœ¨safarié‡Œæ— æ•ˆï¼Œè‹¹æœå¯¹videoæ ‡ç­¾çš„autoplayå±æ€§åšäº†å¦‚ä¸‹è§„å®šï¼š</p><blockquote><p>In Safari on iOS (for all devices, including iPad), where the user may be on a cellular network and be charged per data unit, preload and autoplay are disabled.</p></blockquote><p>å…¶å®safariçš„å¹¶ä¸æ˜¯autoplayçš„é—®é¢˜ï¼Œè€Œæ˜¯è§†é¢‘æœ‰å£°éŸ³å¯¼è‡´äºsafariä¸èƒ½è‡ªåŠ¨æ’­æ”¾ï¼Œ<strong>ç»™videoçš„muted[æ˜¯å¦é™éŸ³]è®¾ç½®ä¸ºtrue</strong>ï¼Œè§†é¢‘ä¾¿ä¼šè‡ªåŠ¨æ’­æ”¾ï¼Œä½†æ˜¯è§†é¢‘æ²¡æœ‰å£°éŸ³(é™çº§å¤„ç†)</p><p>safariä¸‹ï¼Œè®¾ç½®mutedä¸ºtrue<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//safariä¸‹</span><br><span class="line">if(is.safari)&#123;</span><br><span class="line">   $(&apos;.js-video&apos;)[0].play();</span><br><span class="line">    $(&apos;.js-video&apos;)[0].muted = true; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="videoçš„posterçš„é—®é¢˜"><a href="#videoçš„posterçš„é—®é¢˜" class="headerlink" title="videoçš„posterçš„é—®é¢˜"></a>videoçš„posterçš„é—®é¢˜</h4><ul><li>åœ¨å®‰å“çš„æœ‰äº›æœºå­ä¸‹ï¼Œç»™videoå¢åŠ äº†posterï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰æ•ˆæœï¼Œposteråœ¨androidå…¼å®¹çš„å¹¶ä¸å¥½ï¼Œä¸å¦‚åœ¨è§†é¢‘ä¸Šå±‚åŠ ä¸ªdivé“ºå¼ å›¾ç‰‡</li><li>iPhoneXçš„videoåœ¨æœ‰posterçš„æƒ…å†µä¸‹ï¼Œæ’­æ”¾è§†é¢‘posterä¸ä¼šè‡ªåŠ¨å»æ‰ï¼Œè¦è‡ªå·±é€»è¾‘æ‰‹åŠ¨å»æ‰poster(ä¹‹å‰æµ‹åˆ°è¿‡)</li></ul><h4 id="é»‘å±é—®é¢˜"><a href="#é»‘å±é—®é¢˜" class="headerlink" title="é»‘å±é—®é¢˜"></a>é»‘å±é—®é¢˜</h4><p>éƒ¨åˆ†ç¯å¢ƒä¸­è§†é¢‘ä»å¼€å§‹æ’­åˆ°èƒ½å±•ç°ç”»é¢ä¼šæœ‰çŸ­æš‚çš„é»‘å±ï¼ˆå¤„ç†è§†é¢‘æºæ•°æ®çš„æ—¶é—´ï¼‰ï¼Œä¸ºäº†é¿å…è¿™ä¸ªé»‘å±ï¼Œå¯ä»¥åœ¨è§†é¢‘ä¸ŠåŠ ä¸ªæµ®å±‚æˆ–è®¾ç½®å®¹å™¨èƒŒæ™¯å¹¶åœ¨æ’­æ”¾å‰éšè—videoï¼Œç„¶åç›‘å¬ç›¸å…³äº‹ä»¶ï¼Œå¼€å§‹æ’­æ”¾æˆ–è®¤ä¸ºæœ‰ç”»é¢çš„æ—¶å€™å†åˆ‡æ¢åˆ°Videoç•Œé¢ã€‚</p><p>è§£å†³æ–¹æ¡ˆ<br>å¾®ä¿¡ä¸‹ï¼Œé€šè¿‡ç”¨æˆ·äº¤äº’è¿›è¡Œæ’­æ”¾ï¼Œæœ€å¥½ç»™ä»–ä¸€ä¸ªæ’­æ”¾å°icon</p><h4 id="å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜"><a href="#å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜" class="headerlink" title="å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜"></a>å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜</h4><p>å¯¹äºå°è§†é¢‘ä¸ºäº†ç¾è§‚ï¼Œä¸€èˆ¬éƒ½æ˜¯æŠŠcontrolå±æ€§æ‹¿æ‰ï¼Œè€Œåœ¨å¾®åšä¸‹è§†é¢‘é»˜è®¤æ˜¯å…¨å±æ’­æ”¾çš„ï¼Œç‚¹å‡»è¿”å›è§†é¢‘åœ¨æ²¡æœ‰æ§åˆ¶æ¡controlçš„æƒ…å†µä¸‹ä¼šä¸èƒ½å†æ¬¡æ’­æ”¾ï¼Œå› æ­¤åœ¨weiboä¸‹è¦åŠ ä¸Šcontrol</p><p>è§£å†³æ–¹æ¡ˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(is.Weibo)&#123;</span><br><span class="line">    $(&apos;.js-video&apos;)[0].control = true; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>   ã€€ã€€ã€€ã€€ã€€ã€€      ã€€ã€€ã€€ã€€ã€€ã€€                           ã€€ã€€ã€€ã€€ã€€ã€€       </p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> video </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/practice-summary-andy-move2.html"/>
      <content type="html"><![CDATA[<hr><p>title: å®ä¹ &amp;andyMoveå°ç»“<br>date: 2018-03-06 17:01:01<br>comments: true</p><p>tags:</p><pre><code>- ç¾å›¾- H5é¡¹ç›®</code></pre><p>categories:</p><pre><code>- æ¸£æŠ€æœ¯</code></pre><p>â€“</p><p>è¿™å­¦æœŸçš„å®ä¹ ä¹Ÿå¿«ç»“æŸäº†ï¼Œæƒ³æƒ³è¿˜æ˜¯æŒºæ„Ÿæ…¨çš„ã€‚è¿™æ¬¡å¯¹andyMoveçš„æ€»ç»“å°±å½“åšå¯¹è‡ªå·±è¿™å­¦æœŸå®ä¹ çš„æ€»ç»“å§ã€‚</p><p>åœ¨ç¾å›¾ä¹Ÿå¿«æ»¡4ä¸ªæœˆäº†ï¼Œæ€»æ„Ÿè§‰è‡ªå·±è¿›æ­¥çš„éå¸¸æ…¢ï¼Œæœ‰æ—¶å€™ä¼šåœ¨æƒ³æ˜¯ä¸æ˜¯è‡ªå·±å˜å¾—ä¸ä¸Šå¿ƒäº†ï¼Ÿå˜å¾—ä¸è¿›å–äº†ï¼Ÿå¯¹ï¼ï¼ä½ å°±æ˜¯ä¸è¿›å–äº†ï¼Œæ¾æ‡ˆäº†ï¼ï¼ä¸ï¼Œè¿™å®Œå…¨ä¸æ˜¯æˆ‘ï¼ï¼ï¼ï¼å½“ç„¶åœ¨è¿™å››ä¸ªæœˆé‡Œæˆ–å¤šæˆ–å°‘è¿˜æ˜¯æ¯”åˆšè¿›ç¾å›¾çš„æ—¶å€™æœ‰æ‰€æ”¶è·ã€‚ä»åˆšå¼€å§‹ä»€ä¹ˆéƒ½ä¸å¤ªæ‡‚çš„æƒ…å†µä¸‹å¼€å§‹çš„ç¬¬ä¸€ä¸ªH5,åˆ°ç°åœ¨ç›¸å¯¹æ¯”è¾ƒæ¸…æ¥šçš„å¼€å‘(bugæ»¡å¤©é£)ã€‚çœŸçš„éå¸¸æ„Ÿè°¢æœ‰è¿™ä¸ªå¹³å°è®©æˆ‘æ›´åŠ æ¸…æ¥šçš„çœ‹æ¸…è‡ªå·±çš„ä¸è¶³ï¼Œåœ¨è¿™é‡ŒçœŸçš„éå¸¸æ„Ÿè°¢æ¿æ —å…„ä¸€å¯¹ä¸€çš„è¾…å¯¼ï¼Œè‡ªå·±çš„æ¸£æŠ€æœ¯å¯¹ä»–é€ æˆçš„ä¸ä¾¿æ·±æ„Ÿè‡ªè´£ã€‚éå¸¸æ„Ÿè°¢æ™“ä¸œå…„ç…§é¡¾~~</p><h2 id="åæ€"><a href="#åæ€" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li><p>ä¸ç®¡åšä»€ä¹ˆäº‹ï¼Œ<strong>ç»†èŠ‚</strong>çœŸçš„å¾ˆé‡è¦ï¼Œåœ¨å¼€å‘ä¸­ï¼Œæ­£å¦‚æ™“ä¸œè¯´çš„å¤šå»æ³¨æ„ä¸€äº›ç»†èŠ‚çš„ä¸œè¥¿ï¼Œè¿™ä¸ªé¡¹ç›®å°±ä¼šæ›´å¥½ï¼Œä¸è¦é©¬è™çš„å»å¯¹å¾…å®ƒï¼Œæ¯”å¦‚åŠ¨ç”»å¾®è°ƒçš„æ—¶å€™æ¯”è¾ƒéº»çƒ¦ï¼Œä¸€æ—¦ä½ é©¬è™åº”ä»˜çš„è¯ï¼Œç»†èŠ‚å¤„ç†ä¸åˆ°ä½ï¼ŒåŠ¨ç”»ä¸å†™åè€Œä¼šæ¯”è¾ƒå¥½ï¼ï¼è¯´çš„å°±æ˜¯ä½ è¦ç»†å¿ƒï¼ï¼å¤šæ³¨æ„~~</p></li><li><p>åœ¨å¼€å‘<strong>æ•ˆç‡</strong>æ–¹é¢çœŸçš„éœ€è¦å†æå‡æå‡ï¼Œæ¯”å¦‚åƒä¸€äº›æ¯”è¾ƒéº»çƒ¦çš„animationåŠ¨ç”»å¯ä»¥å…ˆä¸ç”¨å¤„ç†ï¼Œå†™animationæœ‰æ—¶å€™çœŸçš„ä¼šæŒºèŠ±è´¹æ—¶é—´çš„ï¼Œå¯¼è‡´äºé¡¹ç›®è¿›å±•çš„æ¯”è¾ƒæ…¢ï¼Œæœ‰å¯èƒ½ä¼šè¯¯æœŸï¼Œæ‰€ä»¥å¯ä»¥å…ˆæŠŠé¡¹ç›®åšå‡ºæ¥ï¼ŒæŠŠé¡¹ç›®å…ˆè·‘é€šï¼Œé€»è¾‘å¤„ç†å¥½äº†å†å»å¤„ç†animationç­‰ç­‰ã€‚</p></li><li><p><strong>ä»£ç æ–¹é¢</strong>æ­£å¦‚æ™“ä¸œè¯´çš„ç›®å‰è‡ªå·±å†™çš„ <strong>ä»£ç </strong>å¯èƒ½è¿˜æ˜¯æ¯”è¾ƒé¢æ¡åŒ–ï¼Œæ²¡æœ‰å¾ˆå¥½çš„å»ä¼˜åŒ–ï¼Œé‡å¤æ€§å¤ªå¼ºï¼Œæ²¡æœ‰æ¨¡å—åŒ–</p></li><li><p><strong>js css æ²¡æœ‰æ¨¡å—åŒ–</strong>ï¼Œè¦æœ‰<strong>æ¨¡å—åŒ–</strong>çš„æ€æƒ³ï¼Œå‡å°‘ä»£ç è€¦åˆï¼Œè¿™ä¸€ç‚¹éå¸¸éå¸¸é‡è¦ï¼ï¼ï¼è°¨è®°ï¼ï¼ï¼å†™åˆ°é‡å¤çš„ä»£ç çš„æ—¶å€™ä¸€ç‚¹è¦æƒ³ç€æ€ä¹ˆå»ä¼˜åŒ–ï¼ï¼ï¼æ‹¿åˆ°PSDçš„æ—¶å€™<strong>ä¸è¦é©¬ä¸Šå°±å¼€å§‹åˆ‡</strong>ï¼Œåº”è¯¥è¦æƒ³å¥½å¥½çš„æƒ³æƒ³å¦‚ä½•å»æ¨¡å—åŒ–ï¼Œå¦‚ä½•å»å¸ƒå±€ï¼ŒæŠŠé€»è¾‘ç†æ¸…æ¥šï¼Œä¸ç„¶ä½ ä¼šåšå¾ˆå¤šæ— ç”¨åŠŸï¼ï¼ï¼</p></li><li><p><strong>bugä¿®æ”¹æ–¹é¢</strong>æäº¤æµ‹è¯•ç‰ˆå®Œä¹‹åæµ‹è¯•ä¾¿ä¼šå¼€å§‹æµ‹è¯•é€æ­¥æäº¤bugå‡ºæ¥ï¼Œè¦æ—¶å¸¸å»<strong>å…³æ³¨jira</strong>ä¸Šè‡ªå·±çš„bugï¼ŒåŠæ—¶ä¿®å¤ï¼ï¼åŠæ—¶ï¼ï¼ä¿®å¤å®Œæ¯•ä¸€å®šè¦å…³é—­bugç»™å‡ºåˆç†çš„bugä¿®å¤è§£é‡Šã€‚bugä¿®å¤æ—¶è‡ªå·±è¦å…ˆæµ‹ä¸€éåœ¨æäº¤ç»™æµ‹è¯•ï¼Œå¯èƒ½æœ‰æ—¶å€™bugå¹¶æœªè§£å†³ï¼Œå¯¼è‡´äºæµ‹è¯•é‚£è¾¹åšæ— ç”¨åŠŸã€‚[ä½ è¿˜è¦ä¸è¦è„¸å®³äººå®¶ç™½å¿™æ´»ã€‚ã€‚ã€‚]</p></li><li><p><strong>ä¸è¦å®³æ€•éº»çƒ¦</strong>åœ¨åšlancomeçš„æ—¶å€™éœ€æ±‚çš„å˜åŠ¨ï¼Œè®©æˆ‘è§‰å¾—æœ‰äº›éº»çƒ¦ï¼Œæ•…è€Œå°±æƒ³åˆ°æŠŠéœ€æ±‚ç æ‰ï¼Œäº‹åæƒ³æƒ³é‚£æ—¶å€™çš„è‡ªå·±çœŸçš„å¾ˆåƒåœ¾ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å°±å»è§£å†³ï¼Œè€Œä¸æ˜¯æƒ³ç€å¦‚ä½•ä¸å»è§£å†³ï¼ï¼</p></li><li><p><strong>ä¾èµ–</strong>æ–¹é¢ï¼Œèƒ½ä¸éº»çƒ¦åˆ«äººçš„å°±ä¸éº»çƒ¦åˆ«äººï¼Œååœ¨æ¿æ —æ—è¾¹ï¼Œæœ‰æ—¶å€™å°±äº§ç”Ÿäº†è¿‡åº¦ä¾èµ–çš„é—®é¢˜ï¼Œä¸€é‡åˆ°bugè‡ªå·±ä¸èƒ½è§£å†³çš„æƒ…å†µï¼Œå°±å»é—®ï¼Œ[æ€ªå¯¹ä¸èµ·æ¿æ —å…„ï¼ŒçœŸçš„è¶…è°¢è°¢]ï¼Œè‡ªå·±å¹¶æ²¡æœ‰å¥½å¥½æƒ³æƒ³è‡ªå·±å¦‚ä½•è§£å†³ï¼Œäº§ç”Ÿè¿‡åº¦ä¾èµ–ã€‚å‡¡äº‹ä¸€å®šè¦è‡ªå·±è§£å†³ï¼Œè‡ªå·±è§£å†³ï¼ï¼ï¼ï¼</p></li><li><p>åœ¨<strong>æ²Ÿé€šæ–¹é¢</strong>ï¼Œæ€åº¦è°¦å’Œå¤šæ²Ÿé€šï¼Œä¸è¦æŠŠè‡ªå·±çš„æƒ…ç»ªå½±å“åˆ°åˆ«äººï¼Œç‰¹åˆ«æ˜¯äº§å“è¿è¥è®¾è®¡æµ‹è¯•è¿™äº›å¤§ä½¬<del>~[[å—å°å¥´ä¸€è·ª</del>]</p></li></ul><h2 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h2><p>ä¸‹é¢æ˜¯ä¸€äº›è¿™æ¬¡å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°çš„ä¸€äº›é—®é¢˜ï¼š</p><h4 id="QQå¹³å°ï¼Œç»“æœé¡µä¸èƒ½æ»‘åŠ¨"><a href="#QQå¹³å°ï¼Œç»“æœé¡µä¸èƒ½æ»‘åŠ¨" class="headerlink" title="QQå¹³å°ï¼Œç»“æœé¡µä¸èƒ½æ»‘åŠ¨"></a>QQå¹³å°ï¼Œç»“æœé¡µä¸èƒ½æ»‘åŠ¨</h4><p>ç”±äºiOSä¸‹z-indexçš„å±‚çº§å½±å“ï¼Œå¯¼è‡´äºæœ‰äº›å¹³å°åœ¨iosä¸‹ä¼šå¾ˆéš¾å‡ºç°æ»‘åŠ¨çš„æƒ…å†µ(ä¸é¡ºç•…),ä»¥åŠtransitionå’ŒanimationåŒæ—¶ä½¿ç”¨iosç«¯å¯èƒ½ä¼šå‡ºç°é—®é¢˜</p><p>ç›®å‰è§£å†³æ–¹æ¡ˆ:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">css:</span><br><span class="line"></span><br><span class="line">ç›®å‰</span><br><span class="line">page&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    //transition: transform .5s;</span><br><span class="line">    //opacity: 0;</span><br><span class="line">    overflow-x: hidden;</span><br><span class="line">    overflow-y: auto;</span><br><span class="line">    &amp;.transition&#123;</span><br><span class="line">        transition: all .3s;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.show&#123;</span><br><span class="line">        transform: translateX(0);</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.hide-after&#123;</span><br><span class="line">        transform: translateX(100%);</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.hide-before&#123;</span><br><span class="line">        transform: translateX(-100%);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä¹‹å‰</span><br><span class="line">page&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    transition: transform .5s;</span><br><span class="line">    opacity: 0;</span><br><span class="line">    overflow-x: hidden;</span><br><span class="line">    overflow-y: auto;</span><br><span class="line">    &amp;.in &#123;</span><br><span class="line">        opacity: 1;</span><br><span class="line">        z-index: 2;</span><br><span class="line">        //animation: in 0.5s ease both;</span><br><span class="line">        //</span><br><span class="line">        //@keyframes in &#123;</span><br><span class="line">        //    0% &#123; opacity: 0; &#125;</span><br><span class="line">        //    100% &#123; opacity: 1; &#125;</span><br><span class="line">        //&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;.out &#123;</span><br><span class="line">        opacity: 0.5;</span><br><span class="line">        z-index: 1;</span><br><span class="line">        //transform: translateX(-100%);</span><br><span class="line">        //transition: all .5s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="ä¸Šä¼ å®Œå›¾ç‰‡è¦è¿›è¡Œé¢„åŠ è½½"><a href="#ä¸Šä¼ å®Œå›¾ç‰‡è¦è¿›è¡Œé¢„åŠ è½½" class="headerlink" title="ä¸Šä¼ å®Œå›¾ç‰‡è¦è¿›è¡Œé¢„åŠ è½½"></a>ä¸Šä¼ å®Œå›¾ç‰‡è¦è¿›è¡Œé¢„åŠ è½½</h4><p>åœ¨ä¸Šä¼ å®Œå›¾ç‰‡ç”Ÿæˆurlçš„æ—¶å€™ä¸€èˆ¬éƒ½éœ€è¦åœ¨æ¥ä¸‹æ¥çš„é¡µé¢ä¸­ç”¨åˆ°ï¼Œæ•…è¦å¯¹å…¶è¿›è¡Œé¢„åŠ è½½ã€‚åœ¨åšå¸§åŠ¨ç”»æ›´æ¢å›¾ç‰‡çš„æ—¶å€™è¦æ³¨æ„ï¼Œä¹Ÿæ˜¯è¦é¢„åŠ è½½</p><h4 id="iosç§€ç§€ç«¯ç»“æœé¡µè½¬å‘qqå’Œqqç©ºé—´è½¬å‘ä¸äº†"><a href="#iosç§€ç§€ç«¯ç»“æœé¡µè½¬å‘qqå’Œqqç©ºé—´è½¬å‘ä¸äº†" class="headerlink" title="iosç§€ç§€ç«¯ç»“æœé¡µè½¬å‘qqå’Œqqç©ºé—´è½¬å‘ä¸äº†"></a>iosç§€ç§€ç«¯ç»“æœé¡µè½¬å‘qqå’Œqqç©ºé—´è½¬å‘ä¸äº†</h4><p>è¿™ä¸ªè¦æ³¨æ„ï¼Œåœ¨åšæ‹¼æ¥urlçš„æ—¶å€™è¦å¯¹å¸¦æœ‰ä¸­æ–‡æˆ–è€…å…¶ä»–å­—ç¬¦åšencodeURIComponentå¤„ç†ï¼Œå†åˆ°è¦ç”¨çš„åœ°æ–¹(åˆ†äº«é¡µ)è¿›è¡ŒdecodeURIComponentè·å–ï¼Œä¸Šæ¬¡åœ¨ç¾¤é‡Œé¢çœ‹åˆ°shareçš„imageURLä¸ºç©ºæˆ–è€…è¿™ä¸ªå›¾ç‰‡å¤ªå¤§çš„è¯åœ¨ç«¯å†…åˆ†äº«qqä¹Ÿä¼šè°ƒä¸èµ·æ¥</p><h4 id="å›¾ç‰‡repeaté‡å¤é—®é¢˜"><a href="#å›¾ç‰‡repeaté‡å¤é—®é¢˜" class="headerlink" title="å›¾ç‰‡repeaté‡å¤é—®é¢˜"></a>å›¾ç‰‡repeaté‡å¤é—®é¢˜</h4><p>jsåŠ¨æ€åŠ ä¸Šå›¾ç‰‡çš„æ—¶å€™è¦è®°å¾—åŠ ä¸Šbackground-repeat:no-repeatï¼Œä¸è¦åªåŠ background-image</p><h4 id="shareé¡µä¹Ÿè¦åšåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„"><a href="#shareé¡µä¹Ÿè¦åšåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„" class="headerlink" title="shareé¡µä¹Ÿè¦åšåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„"></a>shareé¡µä¹Ÿè¦åšåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„</h4><p>åœ¨shareé¡µçš„æ—¶å€™ä¸€èˆ¬ä¹Ÿè¦åŠ ä¸Šåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„~~</p><h4 id="å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜"><a href="#å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜" class="headerlink" title="å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜"></a>å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜</h4><p>å¾®åšä¸‹è§†é¢‘é»˜è®¤æ˜¯å…¨å±æ’­æ”¾çš„ï¼Œç‚¹å‡»è¿”å›è§†é¢‘åœ¨æ²¡æœ‰æ§åˆ¶æ¡controlçš„æƒ…å†µä¸‹ä¼šä¸èƒ½å†æ¬¡æ’­æ”¾ï¼Œå› æ­¤åœ¨weiboä¸‹è¦åŠ ä¸Šcontrol</p><h4 id="gifåœ¨Androidä¸‹ä¼šå‡ºç°æ˜¾ç¤ºä¸€æ®µæ—¶é—´ä¹‹åä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ä¿å­˜å’Œè½¬å‘-åç«¯ç®—æ³•å·²è§£å†³ï¼Œæ— éœ€é™çº§"><a href="#gifåœ¨Androidä¸‹ä¼šå‡ºç°æ˜¾ç¤ºä¸€æ®µæ—¶é—´ä¹‹åä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ä¿å­˜å’Œè½¬å‘-åç«¯ç®—æ³•å·²è§£å†³ï¼Œæ— éœ€é™çº§" class="headerlink" title="gifåœ¨Androidä¸‹ä¼šå‡ºç°æ˜¾ç¤ºä¸€æ®µæ—¶é—´ä¹‹åä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ä¿å­˜å’Œè½¬å‘(åç«¯ç®—æ³•å·²è§£å†³ï¼Œæ— éœ€é™çº§)"></a>gifåœ¨Androidä¸‹ä¼šå‡ºç°æ˜¾ç¤ºä¸€æ®µæ—¶é—´ä¹‹åä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ä¿å­˜å’Œè½¬å‘(åç«¯ç®—æ³•å·²è§£å†³ï¼Œæ— éœ€é™çº§)</h4><p>æ­¤æ¬¡é‡‡ç”¨é™çº§çš„æ–¹æ¡ˆï¼Œç›´æ¥æ”¾å›¾ç‰‡ï¼Œå­å…ƒç´ gifçš„opacityä¸º0</p><h4 id="video-åœ¨å¾®ä¿¡ä¸‹ä¼šæ˜¾ç¤ºå†…ç½®çš„æ’­æ”¾å™¨"><a href="#video-åœ¨å¾®ä¿¡ä¸‹ä¼šæ˜¾ç¤ºå†…ç½®çš„æ’­æ”¾å™¨" class="headerlink" title="video åœ¨å¾®ä¿¡ä¸‹ä¼šæ˜¾ç¤ºå†…ç½®çš„æ’­æ”¾å™¨"></a>video åœ¨å¾®ä¿¡ä¸‹ä¼šæ˜¾ç¤ºå†…ç½®çš„æ’­æ”¾å™¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;video class=&quot;js-video&quot;</span><br><span class="line">        loop</span><br><span class="line">        airplay=&quot;allow&quot;</span><br><span class="line">        x5-playsinline</span><br><span class="line">        playsinline</span><br><span class="line">        webkit-playsinline</span><br><span class="line">        preload=&quot;auto&quot;</span><br><span class="line">&gt;</span><br><span class="line">&lt;/video&gt;</span><br></pre></td></tr></table></figure><h4 id="iPhoneXåœ¨videoé—®é¢˜"><a href="#iPhoneXåœ¨videoé—®é¢˜" class="headerlink" title="iPhoneXåœ¨videoé—®é¢˜"></a>iPhoneXåœ¨videoé—®é¢˜</h4><p>iPhoneXçš„videoåœ¨æœ‰posterçš„æƒ…å†µä¸‹ï¼Œæ’­æ”¾è§†é¢‘posterä¸ä¼šè‡ªåŠ¨å»æ‰ï¼Œè¦è‡ªå·±é€»è¾‘æ‰‹åŠ¨å»æ‰poster</p><h4 id="å°½é‡ä¸è¦å»ç”¨touchstart"><a href="#å°½é‡ä¸è¦å»ç”¨touchstart" class="headerlink" title="å°½é‡ä¸è¦å»ç”¨touchstart"></a>å°½é‡ä¸è¦å»ç”¨touchstart</h4><p>touchstartæ—¶é—´é—´éš”å¤ªå°ï¼Œæœ‰å¯èƒ½ä¸ä¼šç”Ÿæ•ˆï¼Œä¸€èˆ¬ä½¿ç”¨tapï¼Œclickï¼Œtouchendï¼Œè€Œtouchstartä¸»è¦ç”¨äºäº‹ä»¶çŠ¶æ€æ–¹é¢</p><h4 id="åœ¨å¼€å‘è¦å°½å¯èƒ½æ¨¡å—åŒ–"><a href="#åœ¨å¼€å‘è¦å°½å¯èƒ½æ¨¡å—åŒ–" class="headerlink" title="åœ¨å¼€å‘è¦å°½å¯èƒ½æ¨¡å—åŒ–"></a>åœ¨å¼€å‘è¦å°½å¯èƒ½æ¨¡å—åŒ–</h4><p>å¯¹äºcssä¹Ÿæ˜¯ï¼Œç±»ä¼¼çš„csså¯ä»¥æŠ½å‡ºæ¨¡å—ï¼Œjsæ›´æ˜¯ï¼Œé€»è¾‘å°½å¯èƒ½å†™æˆæ¨¡å—</p><h4 id="å¼€å‘è¿‡ç¨‹ä¸­å¤šå»æ³¨æ„ä¸€äº›æ€§èƒ½ä¼˜åŒ–"><a href="#å¼€å‘è¿‡ç¨‹ä¸­å¤šå»æ³¨æ„ä¸€äº›æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="å¼€å‘è¿‡ç¨‹ä¸­å¤šå»æ³¨æ„ä¸€äº›æ€§èƒ½ä¼˜åŒ–"></a>å¼€å‘è¿‡ç¨‹ä¸­å¤šå»æ³¨æ„ä¸€äº›æ€§èƒ½ä¼˜åŒ–</h4><h4 id="ä»£ç è¦å°½å¯èƒ½ç®€æ´ï¼Œèƒ½ä¼˜åŒ–çš„é€»è¾‘å°½å¯èƒ½ä¼˜åŒ–ï¼Œä»¥åè¦å…¨ä½¿ç”¨ES6ï¼ï¼ES6ï¼ï¼ï¼ï¼"><a href="#ä»£ç è¦å°½å¯èƒ½ç®€æ´ï¼Œèƒ½ä¼˜åŒ–çš„é€»è¾‘å°½å¯èƒ½ä¼˜åŒ–ï¼Œä»¥åè¦å…¨ä½¿ç”¨ES6ï¼ï¼ES6ï¼ï¼ï¼ï¼" class="headerlink" title="ä»£ç è¦å°½å¯èƒ½ç®€æ´ï¼Œèƒ½ä¼˜åŒ–çš„é€»è¾‘å°½å¯èƒ½ä¼˜åŒ–ï¼Œä»¥åè¦å…¨ä½¿ç”¨ES6ï¼ï¼ES6ï¼ï¼ï¼ï¼"></a>ä»£ç è¦å°½å¯èƒ½ç®€æ´ï¼Œèƒ½ä¼˜åŒ–çš„é€»è¾‘å°½å¯èƒ½ä¼˜åŒ–ï¼Œä»¥åè¦å…¨ä½¿ç”¨ES6ï¼ï¼ES6ï¼ï¼ï¼ï¼</h4><h4 id="åœ¨ç§»åŠ¨ç«¯çš„è¯æœ€å¥½ä¸è¦å»ç”¨flexbox"><a href="#åœ¨ç§»åŠ¨ç«¯çš„è¯æœ€å¥½ä¸è¦å»ç”¨flexbox" class="headerlink" title="åœ¨ç§»åŠ¨ç«¯çš„è¯æœ€å¥½ä¸è¦å»ç”¨flexbox"></a>åœ¨ç§»åŠ¨ç«¯çš„è¯æœ€å¥½ä¸è¦å»ç”¨flexbox</h4><p>flexboxçš„å…¼å®¹æ€§æ€§ç›®å‰è¿˜æ˜¯ä¸å¤Ÿå¥½ï¼Œå°½é‡å»å…‹æœè¿™ä¸ªä¹ æƒ¯</p><h4 id="è§†é¢‘æ’­æ”¾å»¶è¿Ÿé—®é¢˜-åç«¯ç®—æ³•å·²è§£å†³"><a href="#è§†é¢‘æ’­æ”¾å»¶è¿Ÿé—®é¢˜-åç«¯ç®—æ³•å·²è§£å†³" class="headerlink" title="è§†é¢‘æ’­æ”¾å»¶è¿Ÿé—®é¢˜(åç«¯ç®—æ³•å·²è§£å†³)"></a>è§†é¢‘æ’­æ”¾å»¶è¿Ÿé—®é¢˜(åç«¯ç®—æ³•å·²è§£å†³)</h4><h4 id="iosä½ç«¯æœºä¸‹gifä¿å­˜ä¸ºé™æ€-iosæ—©äº›ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç›®å‰æ— è§£"><a href="#iosä½ç«¯æœºä¸‹gifä¿å­˜ä¸ºé™æ€-iosæ—©äº›ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç›®å‰æ— è§£" class="headerlink" title="iosä½ç«¯æœºä¸‹gifä¿å­˜ä¸ºé™æ€(iosæ—©äº›ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç›®å‰æ— è§£)"></a>iosä½ç«¯æœºä¸‹gifä¿å­˜ä¸ºé™æ€(iosæ—©äº›ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç›®å‰æ— è§£)</h4><h4 id="å¼€å§‹å¼€å‘ä¹‹å‰å°±åº”è¯¥é€šçŸ¥è¿è¥æŠŠæ–‡æ¡ˆç»™å¥½"><a href="#å¼€å§‹å¼€å‘ä¹‹å‰å°±åº”è¯¥é€šçŸ¥è¿è¥æŠŠæ–‡æ¡ˆç»™å¥½" class="headerlink" title="å¼€å§‹å¼€å‘ä¹‹å‰å°±åº”è¯¥é€šçŸ¥è¿è¥æŠŠæ–‡æ¡ˆç»™å¥½"></a>å¼€å§‹å¼€å‘ä¹‹å‰å°±åº”è¯¥é€šçŸ¥è¿è¥æŠŠæ–‡æ¡ˆç»™å¥½</h4><p>ä¸ç„¶åœ¨å¼€å‘æœŸé—´ä¼šå»å¾ˆé¢‘ç¹çš„è·Ÿæ¢æ–‡æ¡ˆï¼ŒæŒºè´¹æ—¶çš„</p><h4 id="åŸ‹ç‚¹ç»Ÿè®¡ä¹Ÿåº”è¯¥ç»™å¥½"><a href="#åŸ‹ç‚¹ç»Ÿè®¡ä¹Ÿåº”è¯¥ç»™å¥½" class="headerlink" title="åŸ‹ç‚¹ç»Ÿè®¡ä¹Ÿåº”è¯¥ç»™å¥½"></a>åŸ‹ç‚¹ç»Ÿè®¡ä¹Ÿåº”è¯¥ç»™å¥½</h4><p>ä¸è¦åˆ°äº†è¦ä¸Šçº¿çš„æ—¶å€™æ‰ç»™åˆ°å“ªé‡Œå“ªé‡Œéœ€è¦åŸ‹ç‚¹</p><h4 id="è¿˜æœ‰ä¸€ä¸ªå°è¯·æ±‚å°±æ˜¯å¸Œæœ›åœ¨å¼€å‰ç«¯éœ€æ±‚ä¼šçš„æ—¶å€™ï¼Œå¸Œæœ›æ™“ä¸œæ¿æ —èƒ½è¿‡å¸¦ä¸Šæˆ‘ä»¬å‚åŠ å‚åŠ ä¼šè®®ï¼Œè®©æˆ‘ä»¬ä¹Ÿä½“éªŒä½“éªŒä¸€ä¸‹ä¼šè®®å¹³å¸¸æ˜¯æ€ä¹ˆè¿›è¡Œè®¨è®ºçš„ï¼Œæ€ä¹ˆè®¨è®ºéœ€æ±‚çš„ï¼Œä»¥åŠä¸€äº›ç»†èŠ‚çš„ä¸œè¥¿"><a href="#è¿˜æœ‰ä¸€ä¸ªå°è¯·æ±‚å°±æ˜¯å¸Œæœ›åœ¨å¼€å‰ç«¯éœ€æ±‚ä¼šçš„æ—¶å€™ï¼Œå¸Œæœ›æ™“ä¸œæ¿æ —èƒ½è¿‡å¸¦ä¸Šæˆ‘ä»¬å‚åŠ å‚åŠ ä¼šè®®ï¼Œè®©æˆ‘ä»¬ä¹Ÿä½“éªŒä½“éªŒä¸€ä¸‹ä¼šè®®å¹³å¸¸æ˜¯æ€ä¹ˆè¿›è¡Œè®¨è®ºçš„ï¼Œæ€ä¹ˆè®¨è®ºéœ€æ±‚çš„ï¼Œä»¥åŠä¸€äº›ç»†èŠ‚çš„ä¸œè¥¿" class="headerlink" title="è¿˜æœ‰ä¸€ä¸ªå°è¯·æ±‚å°±æ˜¯å¸Œæœ›åœ¨å¼€å‰ç«¯éœ€æ±‚ä¼šçš„æ—¶å€™ï¼Œå¸Œæœ›æ™“ä¸œæ¿æ —èƒ½è¿‡å¸¦ä¸Šæˆ‘ä»¬å‚åŠ å‚åŠ ä¼šè®®ï¼Œè®©æˆ‘ä»¬ä¹Ÿä½“éªŒä½“éªŒä¸€ä¸‹ä¼šè®®å¹³å¸¸æ˜¯æ€ä¹ˆè¿›è¡Œè®¨è®ºçš„ï¼Œæ€ä¹ˆè®¨è®ºéœ€æ±‚çš„ï¼Œä»¥åŠä¸€äº›ç»†èŠ‚çš„ä¸œè¥¿"></a>è¿˜æœ‰ä¸€ä¸ªå°è¯·æ±‚å°±æ˜¯å¸Œæœ›åœ¨å¼€å‰ç«¯éœ€æ±‚ä¼šçš„æ—¶å€™ï¼Œå¸Œæœ›æ™“ä¸œæ¿æ —èƒ½è¿‡å¸¦ä¸Šæˆ‘ä»¬å‚åŠ å‚åŠ ä¼šè®®ï¼Œè®©æˆ‘ä»¬ä¹Ÿä½“éªŒä½“éªŒä¸€ä¸‹ä¼šè®®å¹³å¸¸æ˜¯æ€ä¹ˆè¿›è¡Œè®¨è®ºçš„ï¼Œæ€ä¹ˆè®¨è®ºéœ€æ±‚çš„ï¼Œä»¥åŠä¸€äº›ç»†èŠ‚çš„ä¸œè¥¿</h4><p>å°±åƒè¿™æ¬¡çš„andy-moveè¿›è¡Œäº‘ç¾åŒ–æ¥å£çš„æ—¶å€™å¯èƒ½ä¹Ÿæ˜¯è‡ªå·±æ¯”è¾ƒç¬¨åˆšå¼€å§‹æ²¡ç†è§£æ¸…æ¥šæ¿æ —çš„è¦æ±‚ï¼Œå¯¼è‡´è¿™ä¸ªæ–¹é¢æ¥å£è€æ˜¯ä¸åŒ¹é…é—®é¢˜</p><h1 id="ä¹‹å-ä¸å¯¹ï¼ç°åœ¨"><a href="#ä¹‹å-ä¸å¯¹ï¼ç°åœ¨" class="headerlink" title="ä¹‹å(ä¸å¯¹ï¼ç°åœ¨~~)"></a>ä¹‹å(ä¸å¯¹ï¼ç°åœ¨~~)</h1><h3 id="1ã€è°ƒæ•´å¥½çŠ¶æ€ï¼Œå……æ»¡æ¿€æƒ…æ‰æ˜¯æˆ‘ï¼ï¼"><a href="#1ã€è°ƒæ•´å¥½çŠ¶æ€ï¼Œå……æ»¡æ¿€æƒ…æ‰æ˜¯æˆ‘ï¼ï¼" class="headerlink" title="1ã€è°ƒæ•´å¥½çŠ¶æ€ï¼Œå……æ»¡æ¿€æƒ…æ‰æ˜¯æˆ‘ï¼ï¼"></a>1ã€è°ƒæ•´å¥½çŠ¶æ€ï¼Œå……æ»¡æ¿€æƒ…æ‰æ˜¯æˆ‘ï¼ï¼</h3><h3 id="2ã€-ä¸“å¿ƒäºå­¦ä¹ "><a href="#2ã€-ä¸“å¿ƒäºå­¦ä¹ " class="headerlink" title="2ã€ ä¸“å¿ƒäºå­¦ä¹ "></a>2ã€ ä¸“å¿ƒäºå­¦ä¹ </h3><p>ä¹°äº†ä¹¦ä¹°äº†æ¤…å­ä¹°äº†æ˜¾ç¤ºå™¨ï¼Œå¯¹ï¼ï¼å°±æ˜¯è¦è¯»ä¹¦ï¼ï¼å“ˆå“ˆå“ˆ<br>è¿™æ˜¯åœ¨æ˜¥èŠ‚æ”¾å‡å‰è‡ªå·±ç»™è¿‡å¹´å›æ¥çš„è‡ªå·±å®šä¸‹çš„å­¦ä¹ </p><h4 id="2018-å¦‚ä½•æŠŠè‡ªæˆ‘å­¦ä¹ å’Œå·¥ä½œæ—¶é—´åˆ†é…å¼„å¥½ï¼Ÿ-ç²—ç•¥"><a href="#2018-å¦‚ä½•æŠŠè‡ªæˆ‘å­¦ä¹ å’Œå·¥ä½œæ—¶é—´åˆ†é…å¼„å¥½ï¼Ÿ-ç²—ç•¥" class="headerlink" title="2018 å¦‚ä½•æŠŠè‡ªæˆ‘å­¦ä¹ å’Œå·¥ä½œæ—¶é—´åˆ†é…å¼„å¥½ï¼Ÿ (ç²—ç•¥)"></a>2018 å¦‚ä½•æŠŠè‡ªæˆ‘å­¦ä¹ å’Œå·¥ä½œæ—¶é—´åˆ†é…å¼„å¥½ï¼Ÿ (ç²—ç•¥)</h4><ul><li>å‘¨ä¸€-å‘¨äº”ï¼š ä¸Šç­ â€” 6ç‚¹åŠä¸‹ç­ï¼Œåˆ©ç”¨å¥½ä¸Šç­çš„æ—¶é—´å¤„ç†å¥½ï¼Œåƒå®Œé¥­å›å»</li><li>æ²¡ä»»åŠ¡çš„æ—¶å€™å¦‚ä½•å¤„ç†ï¼Ÿ 1ã€ä¸»åŠ¨è¯·æ±‚åŠ ä»»åŠ¡  2ã€åƒè¿™ä¸ªæ—¶å€™ï¼Ÿ åœ¨å…¬å¸çœ‹ä¹¦åˆä¸å¥½â€¦.å†™ä¸œ                          è¥¿ï¼Ÿå†™æ’ä»¶ï¼Ÿ<br>å¢åŠ è¡¨ç°æœºä¼šï¼Œä¸ä¼šçš„å…ˆæ¥ï¼Œæ¥å®Œä¸ä¼šçš„å†é—®<br>,ä¸ä¼šçš„è‡ªå·±è¦å…ˆæ€è€ƒå†é—®ï¼Œä¸è¦ä¸€ä¸æ‡‚å°±é—®</li><li><p>å‘¨å…­å‘¨æ—¥ï¼š å…¨çœ‹ä¹¦å’Œå¤„ç†æ¯•ä¸šè®¾è®¡ï¼Œ æ™šä¸Šæœ‰æ—¶é—´å†å›å­¦æ ¡</p></li><li><p>ç”Ÿæ´»ï¼š ä¹°ä¸ªæ˜¾ç¤ºå™¨ã€ä¹°ä¸ªæ¤…å­ã€å®¶é‡Œæ‰“æ‰«å¹²å‡€ã€è‡ªå·±åšé¥­</p></li></ul><h4 id="ä¹¦-è¦çœ‹å®Œ"><a href="#ä¹¦-è¦çœ‹å®Œ" class="headerlink" title="ä¹¦ [è¦çœ‹å®Œ]"></a>ä¹¦ [è¦çœ‹å®Œ]</h4><ul><li>ES6 [es6è¿˜æ˜¯å¾ˆè–„å¼±]</li><li>æ·±å…¥æµ…å‡ºWebpack</li><li>Webé«˜æ•ˆç¼–ç¨‹ä¸ä¼˜åŒ–å®è·µ</li><li>ä½“ç³»è®¾è®¡ä¸å®è·µ</li><li>Vue</li><li>Webå‰ç«¯é«˜æ•ˆå¼€å‘</li><li>å¾®ä¿¡å°ç¨‹åº</li></ul><h3 id="3ã€åšå¥½æ¯•è®¾ã€é¡ºåˆ©æ¯•ä¸š"><a href="#3ã€åšå¥½æ¯•è®¾ã€é¡ºåˆ©æ¯•ä¸š" class="headerlink" title="3ã€åšå¥½æ¯•è®¾ã€é¡ºåˆ©æ¯•ä¸š"></a>3ã€åšå¥½æ¯•è®¾ã€é¡ºåˆ©æ¯•ä¸š</h3><h3 id="4ã€å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½ç”Ÿæ´»"><a href="#4ã€å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½ç”Ÿæ´»" class="headerlink" title="4ã€å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½ç”Ÿæ´»"></a>4ã€å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½ç”Ÿæ´»</h3><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p><strong>æ³¨: åšå®¢æ˜¯æ”¾å‡å‰å†™çš„ï¼Œé‚£æ—¶å€™æœ¬æ¥æ‰“ç®—è¿™å­¦æœŸè¯·å‡çš„</strong></p><p>è¯·å‡äº†ï¼Œæƒ³æƒ³è¿˜æ˜¯æŒºçº ç»“çš„ï¼Œæƒ³äº†å¥½ä¹…ï¼Œä¹Ÿæ˜¯è¿™æ®µçš„å®ä¹ è®©æˆ‘çœ‹åˆ°äº†è‡ªå·±èº«ä¸Šå„ä¸ªæ–¹é¢çš„ä¸è¶³ï¼Œä¹Ÿå€Ÿè¯·å‡æœŸé—´å¥½å¥½å†å……ç”µå……ç”µï¼Œè°ƒæ•´è°ƒæ•´å¿ƒæ€ã€‚2018æƒ³æƒ³åº”è¯¥ä¼šæ˜¯ä¸€ä¸ªå……å®çš„ä¸€å¹´ï¼Œæƒ³åšçš„äº‹æƒ…å¾ˆå¤šï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤ŸæŠŠå®ƒè¿‡çš„å……å®ï¼Œå–„å¾…äºå®ƒã€‚</p><p>ç¾å›¾ï¼Œ6æœˆä»½å†è§ï¼å¸Œæœ›æ¥æ—¶æ˜¯ä¸€ä¸ªä¸ä¸€æ ·çš„è‡ªå·±ã€‚</p><p><strong>æ›´æ­£å¦‚ä¸‹:</strong></p><p>æ™“ä¸œè¯´æ˜å¤©æœ‰ä¸ªæ€»ç»“ä¼šï¼Œä¸çŸ¥é“æ‹¿è¿™ç¯‡åšå®¢å»ä¼šæ€ä¹ˆæ ·ï¼Œå†™åšå®¢éƒ½æ˜¯å†™å¿ƒå£°ï¼Œå†…å¿ƒå¯¹è‡ªå·±è¿‡å»å¦å®šä»¥åŠå¯¹æ¥ä¸‹æ¥å……æ»¡æœŸå¾…çš„æ€»ç»“æˆ‘æƒ³æœ€èƒ½è¯´æ˜ç°åœ¨çš„æˆ‘ã€‚åº”è¯¥å¯ä»¥å§ï¼Œå°±è¿™æ ·å§~~</p><p>é‚£ä¸ªåœ¨æ–°å¹´å‰æ— æ•°å¹»æƒ³ç€æ–°çš„ä¸€å¹´æˆ‘è¯¥å¦‚ä½•å¦‚ä½•åŠªåŠ›çš„å°‘å¹´å¸Œæœ›ä½ åœ¨æ–°çš„ä¸€å¹´å‹‡å¾€ç›´å‰ï¼Œä¸è¾œè´Ÿé‚£ä¸ªå¹»æƒ³çš„å°‘å¹´ã€‚</p><blockquote><p>ä¹Ÿè®¸è¿‡å»çš„ä¸€å¹´ï¼Œä½ æ›¾è¢«é£æµªæ‹æ‰“çš„é¢“åºŸå¤±æ„ï¼Œä½†æ–°çš„ä¸€å¹´ï¼Œæ„¿ä½ ä¹˜é£ç ´æµªã€‚  â€”â€”ã€Šä¹˜é£ç ´æµªã€‹</p></blockquote><p>æ›´æ–°äº 2018-03-01 00: 17<br>äºè‡ªå·±çš„å°çª</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>canvasç²’å­èƒŒæ™¯</title>
      <link href="/particle-canvas.html"/>
      <content type="html"><![CDATA[<p>æ ¹æ®ç½‘ä¸Šçš„æ€è·¯ç”¨canvaså®ç°ä¹‹å‰çŸ¥ä¹çš„ç²’å­èƒŒæ™¯ã€‚ </p><blockquote><p><a href="https://github.com/ishareme/Particle/" target="_blank" rel="noopener">github åœ°å€</a><br><a href="https://github.com/ishareme/ParticleCanvas/" target="_blank" rel="noopener">example</a></p></blockquote><a id="more"></a><h2 id="ä¸»è¦æ€è·¯"><a href="#ä¸»è¦æ€è·¯" class="headerlink" title="ä¸»è¦æ€è·¯"></a>ä¸»è¦æ€è·¯</h2><ul><li>éœ€è¦ä¸€å¼  Canvas ç”»å¸ƒ</li><li>åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶è®¸å¤šä¸ªå°ç‚¹</li><li>å°ç‚¹ä¼šæ¥å›ç§»åŠ¨</li><li>å°ç‚¹ç§»åŠ¨åˆ°è¾¹æ¡†çš„æ—¶å€™éœ€è¦å›å¼¹</li><li>æ¯ä¸¤ä¸ªå°ç‚¹ä¹‹é—´åœ¨ä¸€å®šè·ç¦»ä¹‹å†…ï¼Œç»˜åˆ¶çº¿</li><li>å½“é¼ æ ‡ç§»å…¥çš„æ—¶å€™ï¼Œè®©å†…éƒ¨çš„å°ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨</li></ul><h4 id="éœ€è¦ä¸€å¼ -Canvas-ç”»å¸ƒ"><a href="#éœ€è¦ä¸€å¼ -Canvas-ç”»å¸ƒ" class="headerlink" title="éœ€è¦ä¸€å¼  Canvas ç”»å¸ƒ"></a>éœ€è¦ä¸€å¼  Canvas ç”»å¸ƒ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.ctx = <span class="keyword">this</span>.canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"><span class="keyword">this</span>.canvas.width = <span class="built_in">window</span>.innerWidth || <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line"><span class="keyword">this</span>.canvas.height = <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line"><span class="keyword">this</span>.drawBackground();</span><br></pre></td></tr></table></figure><h4 id="åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶è®¸å¤šä¸ªå°ç‚¹"><a href="#åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶è®¸å¤šä¸ªå°ç‚¹" class="headerlink" title="åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶è®¸å¤šä¸ªå°ç‚¹"></a>åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶è®¸å¤šä¸ªå°ç‚¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">for(let i = 0; i &lt; this.options.particleNum; i++)&#123;</span><br><span class="line">            let circleX = utils.randomNumber(this.canvas.width);</span><br><span class="line">            let circleY = utils.randomNumber(this.canvas.height);</span><br><span class="line">            let circleVX = utils.randomNumber(this.options.particleSpeed, this.options.particleSpeed * -1) / 20;</span><br><span class="line">            let circleVY = utils.randomNumber(this.options.particleSpeed, this.options.particleSpeed * -1) / 20;</span><br><span class="line">            let circleR = this.options.particleR;</span><br><span class="line">            let circleColor = utils.randomColor();</span><br><span class="line">            this.circleArr.push(new Circle(circleX, circleY, circleVX, circleVY, circleR, circleColor));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //åŒ…æ‹¬é¼ æ ‡çš„ä½ç½®</span><br><span class="line">        this.circleArrAll = [this.mousePoint].concat(this.circleArr);</span><br></pre></td></tr></table></figure><h4 id="å°ç‚¹ä¼šæ¥å›ç§»åŠ¨-amp-è¾¹ç•Œå›å¼¹"><a href="#å°ç‚¹ä¼šæ¥å›ç§»åŠ¨-amp-è¾¹ç•Œå›å¼¹" class="headerlink" title="å°ç‚¹ä¼šæ¥å›ç§»åŠ¨ &amp; è¾¹ç•Œå›å¼¹"></a>å°ç‚¹ä¼šæ¥å›ç§»åŠ¨ &amp; è¾¹ç•Œå›å¼¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">item.x += item.vx;</span><br><span class="line">        item.y += item.vy;</span><br><span class="line">        //åœ†ç‚¹ç§»åŠ¨åˆ°è¾¹æ¡†çš„æ—¶å€™éœ€è¦å›å¼¹</span><br><span class="line">        item.vx *= (item.x &lt;= 0 || item.x &gt;= (this.canvas.width - item.r)) ? -1 : 1;</span><br><span class="line">        item.vy *= (item.y &lt;= 0 || item.y &gt;= (this.canvas.height - item.r)) ? -1 : 1;</span><br></pre></td></tr></table></figure><h4 id="æ¯ä¸¤ä¸ªå°ç‚¹ä¹‹é—´åœ¨ä¸€å®šè·ç¦»ä¹‹å†…ï¼Œç»˜åˆ¶çº¿"><a href="#æ¯ä¸¤ä¸ªå°ç‚¹ä¹‹é—´åœ¨ä¸€å®šè·ç¦»ä¹‹å†…ï¼Œç»˜åˆ¶çº¿" class="headerlink" title="æ¯ä¸¤ä¸ªå°ç‚¹ä¹‹é—´åœ¨ä¸€å®šè·ç¦»ä¹‹å†…ï¼Œç»˜åˆ¶çº¿"></a>æ¯ä¸¤ä¸ªå°ç‚¹ä¹‹é—´åœ¨ä¸€å®šè·ç¦»ä¹‹å†…ï¼Œç»˜åˆ¶çº¿</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">this.circleArr.forEach((item) =&gt; &#123;</span><br><span class="line">            this.ctx.fillStyle = item.color;</span><br><span class="line">            this.ctx.beginPath();</span><br><span class="line"></span><br><span class="line">            //åœ†ç‚¹ç§»åŠ¨</span><br><span class="line">            this.circleMove(item);</span><br><span class="line"></span><br><span class="line">            this.ctx.arc(item.x, item.y, item.r, 0, 2 * Math.PI, true);</span><br><span class="line">            this.ctx.fill();</span><br><span class="line"></span><br><span class="line">            for (var i=0; i &lt; this.circleArrAll.length; i++)&#123;</span><br><span class="line">                var currCircle = this.circleArrAll[i];</span><br><span class="line">                //å¦‚æœæ˜¯åŒé¡¹ æˆ–è€… å½“ mousePoint è¿˜æœªèµ‹å€¼å°±è·³è¿‡</span><br><span class="line">                if (item === currCircle || currCircle.x === null || currCircle.y === null) continue;</span><br><span class="line">                //æ¯ä¸¤ä¸ªåœ†ç‚¹ä¹‹é—´åœ¨ä¸€å®šè·ç¦»(this.options.lineLength)ä¹‹å†…ï¼Œç»˜åˆ¶çº¿</span><br><span class="line">                if (utils.dis(item, currCircle) &lt; this.options.lineLength)&#123;</span><br><span class="line">                    //å½“é¼ æ ‡ç§»å…¥çš„æ—¶å€™ï¼Œè®©å†…éƒ¨çš„åœ†ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨</span><br><span class="line">                    //åœ¨ è·ç¦»(utils.dis2(item, currCircle) &gt; (this.options.lineLength * this.options.lineLength) /2)å†… åœ†ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨</span><br><span class="line">                    if (currCircle === this.mousePoint &amp;&amp; utils.dis2(item, currCircle) &gt; (this.options.lineLength * this.options.lineLength) /2)&#123;</span><br><span class="line">                        //åœ†ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨</span><br><span class="line">                        this.moveToMousePoint(item, currCircle);</span><br><span class="line">                    &#125;</span><br><span class="line">                    //ç»˜åˆ¶çº¿</span><br><span class="line">                    this.drawLine(item, currCircle);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h4 id="å½“é¼ æ ‡ç§»å…¥çš„æ—¶å€™ï¼Œè®©å†…éƒ¨çš„å°ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨"><a href="#å½“é¼ æ ‡ç§»å…¥çš„æ—¶å€™ï¼Œè®©å†…éƒ¨çš„å°ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨" class="headerlink" title="å½“é¼ æ ‡ç§»å…¥çš„æ—¶å€™ï¼Œè®©å†…éƒ¨çš„å°ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨"></a>å½“é¼ æ ‡ç§»å…¥çš„æ—¶å€™ï¼Œè®©å†…éƒ¨çš„å°ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">if (utils.dis(item, currCircle) &lt; this.options.lineLength)&#123;</span><br><span class="line">                    //å½“é¼ æ ‡ç§»å…¥çš„æ—¶å€™ï¼Œè®©å†…éƒ¨çš„åœ†ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨</span><br><span class="line">                    //åœ¨ è·ç¦»(utils.dis2(item, currCircle) &gt; (this.options.lineLength * this.options.lineLength) /2)å†… åœ†ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨</span><br><span class="line">                    if (currCircle === this.mousePoint &amp;&amp; utils.dis2(item, currCircle) &gt; (this.options.lineLength * this.options.lineLength) /2)&#123;</span><br><span class="line">                        //åœ†ç‚¹è·Ÿéšé¼ æ ‡çš„ç§»åŠ¨</span><br><span class="line">                        this.moveToMousePoint(item, currCircle);</span><br><span class="line">                    &#125;</span><br><span class="line">                    //ç»˜åˆ¶çº¿</span><br><span class="line">                    this.drawLine(item, currCircle);</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">moveToMousePoint(item, currCircle)&#123;</span><br><span class="line">        // å°åœ†ç‚¹çš„å‘é¼ æ ‡ç‚¹ç§»åŠ¨</span><br><span class="line">        item.x -= (item.x - currCircle.x) * 0.03;</span><br><span class="line">        item.y -= (item.y - currCircle.y) * 0.03;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h2 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Particle</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //å‚æ•°ä¸€ canvasçš„id, class æˆ– canvas [å¿…å¡«]</span><br><span class="line">        //å‚æ•°äºŒ é…ç½®é¡¹ [å¯é€‰]</span><br><span class="line">        new Particle(<span class="string">'#test'</span>,&#123;</span><br><span class="line">            //ç”»å¸ƒèƒŒæ™¯(é»˜è®¤ <span class="comment">#FFF)[å¯é€‰]</span></span><br><span class="line">            background: <span class="string">'#000'</span>,</span><br><span class="line">            //ç²’å­æ•°(é»˜è®¤ 300)[å¯é€‰]</span><br><span class="line">            particleNum: 300,</span><br><span class="line">            //ç²’å­åŠå¾„(é»˜è®¤ 1)[å¯é€‰]</span><br><span class="line">            particleR: 1,</span><br><span class="line">            //ç²’å­ç§»åŠ¨é€Ÿåº¦(é»˜è®¤ 10)[å¯é€‰]</span><br><span class="line">            particleSpeed: 10,</span><br><span class="line">            //çº¿é•¿åº¦(é»˜è®¤ 70)[å¯é€‰]</span><br><span class="line">            lineLength: 30,</span><br><span class="line">            //çº¿å®½åº¦(é»˜è®¤ 0.5)[å¯é€‰]</span><br><span class="line">            lineWidth: 0.5,</span><br><span class="line">            //é¼ æ ‡å¿ƒé¢œè‰²(é»˜è®¤ <span class="comment">#000)[å¯é€‰]</span></span><br><span class="line">            mousePointColor: <span class="string">'#FFF'</span></span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure><p>   ã€€ã€€ã€€ã€€ã€€ã€€      ã€€ã€€ã€€ã€€ã€€ã€€                           ã€€ã€€ã€€ã€€ã€€ã€€       </p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Html5 File API ä¸ ClipImageç»“åˆ Demo</title>
      <link href="/ClipImageDemo-FileAPI.html"/>
      <content type="html"><![CDATA[<p>ç”¨ClipImageå’ŒFile Api å†™çš„ä¸€ä¸ªæˆªå›¾å°ğŸŒ°</p><blockquote><p><a href="http://f2er.meitu.com/hmz/ClipImageDemo/example/" target="_blank" rel="noopener">example</a></p></blockquote><blockquote><p><a href="https://github.com/ishareme/ClipImageDemo" target="_blank" rel="noopener">github</a><br><a id="more"></a></p></blockquote><h2 id="File-API"><a href="#File-API" class="headerlink" title="File API"></a>File API</h2><p>åœ¨File API æ²¡æœ‰å‡ºæ¥çš„æ—¶å€™ï¼Œå¦‚æœæƒ³åœ¨é¡µé¢ä¸­ä¸€ä¸Šä¼ å°±ç›´æ¥é¢„è§ˆæ‰€ä¸Šä¼ çš„å›¾ç‰‡ä¸€èˆ¬è¦é…åˆåç«¯å®ç°è·å–åˆ°å›¾ç‰‡çš„urlï¼Œå°±åˆå‘èµ·äº†è¯·æ±‚ï¼Œä¸èƒ½å®æ—¶é¢„è§ˆå›¾ç‰‡ã€‚File API ä¹Ÿå¯ä»¥å®ç°å¤šæ–‡ä»¶ä¸Šä¼ ã€ä¸Šä¼ å›¾ç‰‡å®æ—¶é¢„è§ˆã€æ–­ç‚¹ç»­ä¼ ã€æ–‡ä»¶ä¸‹è½½ç­‰ç­‰ã€‚File API ä¸»è¦æœ‰ä»¥ä¸‹æ¥å£</p><h5 id="Blob"><a href="#Blob" class="headerlink" title="- Blob"></a>- Blob</h5><h5 id="File"><a href="#File" class="headerlink" title="- File"></a>- File</h5><h5 id="FileList"><a href="#FileList" class="headerlink" title="- FileList"></a>- FileList</h5><h5 id="FileReader"><a href="#FileReader" class="headerlink" title="- FileReader"></a>- FileReader</h5><h4 id="Blob-1"><a href="#Blob-1" class="headerlink" title="Blob"></a>Blob</h4><p>Blobå¯¹è±¡æ˜¯ä¸€ä¸ªä»£è¡¨äºŒè¿›åˆ¶æ•°æ®çš„å¯¹è±¡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> blob = new Blob(blobParts[, options])</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„Blobè¿™ä¸ªæ„é€ å™¨çš„å‚æ•°æ¯”è¾ƒè¯¡å¼‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ç»„æ•°æ®ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯æ•°ç»„ï¼Œå³ä½¿åƒä¸Šé¢çš„ä¾‹å­ä¸€æ ·åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¹Ÿå¿…é¡»ç”¨æ•°ç»„è£…èµ·æ¥ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯¹è¿™ä¸€Blobå¯¹è±¡çš„é…ç½®å±æ€§.</p><p><strong>blobå±æ€§</strong></p><ul><li>size</li><li>type</li></ul><p><strong>blobæ–¹æ³•</strong></p><ul><li>slice([start,[ end ,[contentType]]])  è¿”å›ä¸€ä¸ªæ–°çš„ Blobå¯¹è±¡ï¼ŒåŒ…å«äº†æº Blobå¯¹è±¡ä¸­æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®ã€‚</li></ul><h4 id="File-1"><a href="#File-1" class="headerlink" title="File"></a>File</h4><p>File å¯¹è±¡åŒ…å«æ–‡ä»¶çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚nameã€sizeã€typeã€lastModifiedDateç­‰</p><p>Fileå¯¹è±¡å¯ä»¥ç”¨æ¥è·å–æŸä¸ªæ–‡ä»¶çš„ä¿¡æ¯ï¼Œè¿˜å¯ä»¥ç”¨æ¥è¯»å–è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ</p><ol><li>Fileå¯¹è±¡æ˜¯æ¥è‡ªç”¨æˆ·åœ¨ä¸€ä¸ªinputå…ƒç´ ä¸Šé€‰æ‹©æ–‡ä»¶åè¿”å›çš„FileListå¯¹è±¡</li><li>æ¥è‡ªç”±æ‹–æ”¾æ“ä½œç”Ÿæˆçš„ DataTransferå¯¹è±¡.</li></ol><p>File æ¥å£æ²¡æœ‰å®šä¹‰ä»»ä½•æ–¹æ³•ï¼Œä½†æ˜¯ç»§æ‰¿äº†<strong>Blob æ¥å£çš„æ–¹æ³•</strong>ã€‚</p><h4 id="FileList-1"><a href="#FileList-1" class="headerlink" title="FileList"></a>FileList</h4><p>FileListåŒ…å«Fileå¯¹è±¡åˆ—è¡¨ï¼Œç±»æ•°ç»„ç»“æ„</p><p><strong>å±æ€§</strong></p><ul><li>length è¿”å›FileListçš„é•¿åº¦<br><strong> æ–¹æ³•</strong> </li><li>item(index) å–æŸä¸ªFile,å¯ä»¥ç›´æ¥ä¸‹æ ‡</li></ul><h4 id="FileReader-1"><a href="#FileReader-1" class="headerlink" title="FileReader"></a>FileReader</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">let reader = new FileReader()</span><br><span class="line"></span><br><span class="line">//å››ç§å¼‚æ­¥è¯»å–æ–‡ä»¶æ–¹æ³•</span><br><span class="line">FileReader.onabort</span><br><span class="line">å¤„ç†abortäº‹ä»¶ã€‚è¯¥äº‹ä»¶åœ¨è¯»å–æ“ä½œè¢«ä¸­æ–­æ—¶è§¦å‘ã€‚</span><br><span class="line"></span><br><span class="line">FileReader.onerror</span><br><span class="line">å¤„ç†erroräº‹ä»¶ã€‚è¯¥äº‹ä»¶åœ¨è¯»å–æ“ä½œå‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚</span><br><span class="line"></span><br><span class="line">FileReader.onload</span><br><span class="line">å¤„ç†loadäº‹ä»¶ã€‚è¯¥äº‹ä»¶åœ¨è¯»å–æ“ä½œå®Œæˆæ—¶è§¦å‘ã€‚</span><br><span class="line"></span><br><span class="line">FileReader.onloadstart</span><br><span class="line">å¤„ç†loadstartäº‹ä»¶ã€‚è¯¥äº‹ä»¶åœ¨è¯»å–æ“ä½œå¼€å§‹æ—¶è§¦å‘ã€‚</span><br><span class="line"></span><br><span class="line">FileReader.onloadend</span><br><span class="line">å¤„ç†loadendäº‹ä»¶ã€‚è¯¥äº‹ä»¶åœ¨è¯»å–æ“ä½œç»“æŸæ—¶ï¼ˆè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ï¼‰è§¦å‘ã€‚</span><br><span class="line"></span><br><span class="line">FileReader.onprogress</span><br><span class="line">å¤„ç†progressäº‹ä»¶(è¿›åº¦)ã€‚è¯¥äº‹ä»¶åœ¨è¯»å–Blobæ—¶è§¦å‘ã€‚</span><br><span class="line"></span><br><span class="line">// è¯»æ•°æ®</span><br><span class="line">FileReader.abort()</span><br><span class="line">ä¸­æ­¢è¯»å–æ“ä½œã€‚åœ¨è¿”å›æ—¶ï¼ŒreadyStateå±æ€§ä¸ºDONEã€‚</span><br><span class="line"></span><br><span class="line">FileReader.readAsArrayBuffer()</span><br><span class="line">å¼€å§‹è¯»å–æŒ‡å®šçš„ Blobä¸­çš„å†…å®¹, ä¸€æ—¦å®Œæˆ, result å±æ€§ä¸­ä¿å­˜çš„å°†æ˜¯è¢«è¯»å–æ–‡ä»¶çš„ ArrayBuffer æ•°æ®å¯¹è±¡.</span><br><span class="line"></span><br><span class="line">FileReader.readAsBinaryString() </span><br><span class="line">å¼€å§‹è¯»å–æŒ‡å®šçš„Blobä¸­çš„å†…å®¹ã€‚ä¸€æ—¦å®Œæˆï¼Œresultå±æ€§ä¸­å°†åŒ…å«æ‰€è¯»å–æ–‡ä»¶çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">FileReader.readAsDataURL()</span><br><span class="line">å¼€å§‹è¯»å–æŒ‡å®šçš„Blobä¸­çš„å†…å®¹ã€‚ä¸€æ—¦å®Œæˆï¼Œresultå±æ€§ä¸­å°†åŒ…å«ä¸€ä¸ªdata: URLæ ¼å¼çš„å­—ç¬¦ä¸²ä»¥è¡¨ç¤ºæ‰€è¯»å–æ–‡ä»¶çš„å†…å®¹ã€‚</span><br><span class="line"></span><br><span class="line">FileReader.readAsText()</span><br><span class="line">å¼€å§‹è¯»å–æŒ‡å®šçš„Blobä¸­çš„å†…å®¹ã€‚ä¸€æ—¦å®Œæˆï¼Œresultå±æ€§ä¸­å°†åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²ä»¥è¡¨ç¤ºæ‰€è¯»å–çš„æ–‡ä»¶å†…å®¹ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//äºŒè¿›åˆ¶æµä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">var</span> fileInput = <span class="built_in">document</span>.getElementById(<span class="string">"fileInput"</span>);</span><br><span class="line">fileInput.addEventListener(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> file = fileInput.files[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (file) &#123;</span><br><span class="line">        <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();  </span><br><span class="line">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">        xhr.onprogress=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> percentage = <span class="built_in">Math</span>.round((e.loaded * <span class="number">100</span>) / e.total);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"percentage:"</span>+percentage);</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.onload=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"percentage:100"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.open(<span class="string">"POST"</span>, <span class="string">"è¿™é‡Œå¡«å†™æœåŠ¡å™¨åœ°å€"</span>);  </span><br><span class="line">        reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">            xhr.send(evt.target.result);</span><br><span class="line">        &#125;;</span><br><span class="line">        reader.readAsBinaryString(file);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="URLå¯¹è±¡"><a href="#URLå¯¹è±¡" class="headerlink" title="URLå¯¹è±¡"></a>URLå¯¹è±¡</h2><p>æˆ‘ä»¬é™¤äº†å¯ä»¥ä½¿ç”¨base64å­—ç¬¦ä¸²ä½œä¸ºå†…å®¹çš„DataURIå°†ä¸€ä¸ªæ–‡ä»¶åµŒå…¥åˆ°å¦å¤–ä¸€ä¸ªæ–‡æ¡£é‡Œï¼Œè¿˜å¯ä»¥ä½¿ç”¨URLå¯¹è±¡ã€‚URLå¯¹è±¡ç”¨äºç”ŸæˆæŒ‡å‘Fileå¯¹è±¡æˆ–Blobå¯¹è±¡çš„URLã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> objectURL =  <span class="built_in">window</span>.URL.createObjectURL(file/blob)</span><br><span class="line">img.src = objectURL</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™æ€æ–¹æ³•ç”¨æ¥é‡Šæ”¾ä¸€ä¸ªä¹‹å‰é€šè¿‡è°ƒç”¨ window.URL.createObjectURL() åˆ›å»ºçš„å·²ç»å­˜åœ¨çš„ URL å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">//å½“ä½ ç»“æŸä½¿ç”¨æŸä¸ª URL å¯¹è±¡æ—¶ï¼Œåº”è¯¥é€šè¿‡è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥è®©æµè§ˆå™¨çŸ¥é“ä¸å†éœ€è¦ä¿æŒè¿™ä¸ªæ–‡ä»¶çš„å¼•ç”¨äº†ã€‚</span></span><br><span class="line"><span class="built_in">window</span>.URL.revokeObjectURL(objecturl)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//such this example ä½¿ç”¨å¯¹è±¡URLæ¥æ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">img.src = <span class="built_in">window</span>.URL.createObjectURL(blob);</span><br><span class="line">img.height = <span class="number">60</span>;</span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.URL.revokeObjectURL(<span class="keyword">this</span>.src);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(img);</span><br></pre></td></tr></table></figure><h4 id="CLipImage"><a href="#CLipImage" class="headerlink" title="CLipImage"></a>CLipImage</h4><p><a href="https://blog.huangmingzhao.cn/ClipImage.html" target="_blank" rel="noopener">ç‚¹æˆ‘ï¼ï¼ï¼ï¼</a></p><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ps: æœ‰ç©ºå†™ä¸‹æ–­ç‚¹ç»­ä¼ å§ï¼ï¼ï¼å·´æ‹‰å·´æ‹‰~~<br>æœ€è¿‘çŠ¶æ€æ…¢æ…¢å¼€å§‹æœ‰æ‰€è°ƒæ•´äº†å“ˆï¼Œç»§ç»­åŠ æ²¹~~ä¹°äº†ä¹¦ï¼Œä¹°äº†æ¤…å­ï¼Œä¹°äº†æ˜¾ç¤ºå™¨ï¼Œä½†æ˜¯è¿˜æ²¡åˆ°ï¼ï¼æœ‰ç‚¹å°æœŸå¾…~æœŸå¾…è‡ªå·±æ¥ä¸‹æ¥çš„ç”Ÿæ´»ï¼Œå¥½å¥½åƒé¥­ã€å¥½å¥½ç¡è§‰ã€å¥½å¥½è¯»ä¹¦ã€‚æ™šå®‰ï¼Œç¡è§‰â€¦..   ã€€ã€€ã€€ã€€ã€€ã€€      ã€€ã€€ã€€ã€€ã€€ã€€                           ã€€ã€€ã€€ã€€ã€€ã€€       </p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
            <tag> FileAPI </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ClipImage åŸºäºcanvasæˆªå›¾å·¥å…·</title>
      <link href="/ClipImage.html"/>
      <content type="html"><![CDATA[<p>æœ€è¿‘é‡æ–°çœ‹äº†ä¸‹canvasçš„apiï¼Œäºæ˜¯ä¹å°±æ’¸äº†å‡ ä¸ªå°demoã€‚clipImageåŸºäºcanvasçš„æˆªå›¾å°å·¥å…· <a href="https://github.com/ishareme/ClipImage/" target="_blank" rel="noopener">github åœ°å€</a></p><a id="more"></a><h2 id="ä¸»è¦ä»£ç "><a href="#ä¸»è¦ä»£ç " class="headerlink" title="ä¸»è¦ä»£ç "></a>ä¸»è¦ä»£ç </h2><p>canvaså®ç°è£å‰ªçš„æ–¹æ³•æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚</p><h4 id="1-getImageData-å’Œ-putImageData"><a href="#1-getImageData-å’Œ-putImageData" class="headerlink" title="1. getImageData å’Œ putImageData"></a>1. getImageData å’Œ putImageData</h4><p>æºå›¾ç‰‡ç”»ä¸Šä¸€ä¸ªcanvasä¸Šï¼Œé€šè¿‡originCanvas.getImageData(sx,sy,sw,sh)è·å–åˆ°å›¾ç‰‡çš„image dataï¼Œèµ‹å€¼äºresultCanvas.putImageData(imagedata, dx, dy)<br>[æ³¨ï¼šputImageData 7 ä¸ªå‚æ•°æ—¶åå››ä¸ªè¡¨ç¤ºimagedataçš„æƒ³x,y,width,height,<br>resultCanvas.putImageData(imagedata, dx, dy, dirtyX, dirtyY, dirtyWidthï¼Œ dirtyHeight)]<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŸå›¾æ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> resultData = ctxOrigin.getImageData(x, y, width, height)</span><br><span class="line"></span><br><span class="line">canvasResult.width = width</span><br><span class="line">canvasResult.height = height</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»“æœçš„canvasç»˜ä¸Š</span></span><br><span class="line">ctxResult.putImageData(resultData, <span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure></p><h4 id="2-drawImage-CanvasImageSource-sx-sy-sWidth-sHeight-dx-dy-dWidth-dHeight"><a href="#2-drawImage-CanvasImageSource-sx-sy-sWidth-sHeight-dx-dy-dWidth-dHeight" class="headerlink" title="2. drawImage(CanvasImageSource, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)"></a>2. drawImage(CanvasImageSource, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</h4><p>ä½¿ç”¨å¤šä¸ªå‚æ•°çš„drawImage()æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ctxResult.drawImage(CanvasImageSource, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</span><br><span class="line"></span><br><span class="line">sx,<span class="attr">sy</span>: æºå›¾ç‰‡çš„ä½ç½®</span><br><span class="line">sw,<span class="attr">sh</span>: è¦è£å‰ªçš„ç›¸å¯¹äºsx,syçš„å®½åº¦å’Œé«˜åº¦</span><br><span class="line">dx,<span class="attr">dy</span>: è¦ç”»åœ¨ç»“æœcanvasçš„ä½ç½®</span><br><span class="line">dw,<span class="attr">dh</span>: è¦ç”»åœ¨ç»“æœcanvasçš„å®½åº¦å’Œé«˜åº¦</span><br></pre></td></tr></table></figure><h4 id="3-ä½¿ç”¨clip-å‡½æ•°-ç›¸å¯¹æ¯”è¾ƒç¹ç"><a href="#3-ä½¿ç”¨clip-å‡½æ•°-ç›¸å¯¹æ¯”è¾ƒç¹ç" class="headerlink" title="3. ä½¿ç”¨clip()å‡½æ•° [ç›¸å¯¹æ¯”è¾ƒç¹ç]"></a>3. ä½¿ç”¨clip()å‡½æ•° [ç›¸å¯¹æ¯”è¾ƒç¹ç]</h4><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h1 id="ClipImage"><a href="#ClipImage" class="headerlink" title="ClipImage"></a>ClipImage</h1><blockquote><p><a href="https://github.com/ishareme/clipimage" target="_blank" rel="noopener">git</a></p></blockquote><blockquote><p><a href="http://npm.meitu-int.com/#@meitu/ClipImage" target="_blank" rel="noopener">npm</a></p></blockquote><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p><a href="http://f2er.meitu.com/hmz/imageclip/example/index.html" target="_blank" rel="noopener">example</a></p><h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm set registry http://npm.meitu-int.com</span><br></pre></td></tr></table></figure> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @meitu/clipimage --save</span><br></pre></td></tr></table></figure> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import ImageClip from '@meitu/clipimage';</span><br></pre></td></tr></table></figure><h4 id="new-ClipImage-image-options"><a href="#new-ClipImage-image-options" class="headerlink" title="new ClipImage(image,options):"></a>new ClipImage(image,options):</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">image: èƒŒæ™¯å›¾ç‰‡ <span class="built_in">type</span>: url/HTMLImageElement/HTMLCanvasElement/HTMLVideoElement</span><br><span class="line">options:&#123;</span><br><span class="line">    // ç»“æœå›¾å®½åº¦ é«˜åº¦</span><br><span class="line">    // 100 / <span class="string">'100%[ç›¸å¯¹äºåŸå›¾]'</span> / <span class="string">'100px'</span></span><br><span class="line">    width: 100,</span><br><span class="line">    height: 100,</span><br><span class="line">    //left top ä»å“ªå¼€å§‹è£å‰ª</span><br><span class="line">    // 100 / <span class="string">'50%'</span> / <span class="string">'100px'</span> / <span class="string">'center'</span> / <span class="string">'top'</span> / <span class="string">'left'</span></span><br><span class="line">    left: <span class="string">'center'</span>,</span><br><span class="line">    top: <span class="string">'center'</span>,</span><br><span class="line">    //å¯¼å‡ºå›¾ç‰‡ç±»å‹ <span class="string">'jpeg'</span> / <span class="string">'jpg'</span> / <span class="string">'png'</span></span><br><span class="line">    <span class="built_in">type</span>: <span class="string">'jpg'</span>,</span><br><span class="line">    //å¯¼å‡ºå›¾ç‰‡çš„è´¨é‡ æ•°å€¼[0-1]</span><br><span class="line">    quality: 1, </span><br><span class="line">    //æˆåŠŸæ—¶çš„å›è°ƒ</span><br><span class="line">    success(b64)&#123;</span><br><span class="line">    </span><br><span class="line">    &#125;,</span><br><span class="line">    //å¤±è´¥æ—¶çš„å›è°ƒ</span><br><span class="line">    error(err)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//é»˜è®¤å€¼</span><br><span class="line">&#123;</span><br><span class="line">    width: 100,</span><br><span class="line">    height: 100,</span><br><span class="line">    left: 0, </span><br><span class="line">    top: 0,</span><br><span class="line">    <span class="built_in">type</span>: <span class="string">'jpeg'</span>,</span><br><span class="line">    quality: 1, </span><br><span class="line">    <span class="function"><span class="title">success</span></span>()&#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">error</span></span>()&#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ClipImage</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">new ClipImage(<span class="variable">$originCanvas</span>,&#123;</span><br><span class="line">    width: <span class="string">'200px'</span>,</span><br><span class="line">    height: <span class="string">'200px'</span>,</span><br><span class="line">    left: <span class="string">'100px'</span>, </span><br><span class="line">    top: <span class="string">'100px'</span>,</span><br><span class="line">    <span class="built_in">type</span>: <span class="string">'jpg'</span>,</span><br><span class="line">    quality: 1, </span><br><span class="line">    success(b64)&#123;</span><br><span class="line">         <span class="variable">$result</span>.src = b64</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">error</span></span>()&#123;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">new ClipImage(<span class="string">'http://mtapplet.meitudata.com/596c72073971d86b5128.jpg'</span>,&#123;</span><br><span class="line">    width: 100,</span><br><span class="line">    height: 100,</span><br><span class="line">    left: <span class="string">'center'</span>, </span><br><span class="line">    top: <span class="string">'center'</span>,</span><br><span class="line">    <span class="built_in">type</span>: <span class="string">'png'</span>,</span><br><span class="line">    quality: 0.8, </span><br><span class="line">&#125;).<span class="keyword">then</span>(<span class="keyword">function</span> (b64) &#123;</span><br><span class="line">    <span class="variable">$result</span>.src = b64</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>   ã€€ã€€ã€€ã€€ã€€ã€€      ã€€ã€€ã€€ã€€ã€€ã€€                           ã€€ã€€ã€€ã€€ã€€ã€€       </p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canvas </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>canvas API æ±‡æ€»</title>
      <link href="/canvas-api.html"/>
      <content type="html"><![CDATA[<p>canvas çš„ API æ±‡æ€»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">rect( x, y, width, height )   ç»˜åˆ¶çŸ©å½¢</span><br><span class="line"></span><br><span class="line">fillRect( x, y, width, height )  ç»˜åˆ¶è¢«å¡«å……çš„çŸ©å½¢</span><br><span class="line"></span><br><span class="line">strokeRect( x, y, width, height )  ç»˜åˆ¶çŸ©å½¢ï¼ˆè¾¹æ¡†ï¼Œæ— å¡«å……ï¼‰</span><br><span class="line"></span><br><span class="line">clearRect( x, y, width, height ) æ¸…é™¤æŒ‡å®šçš„çŸ©å½¢å†…çš„åƒç´ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fill()  å¡«å……å½“å‰ç»˜å›¾ï¼ˆè·¯å¾„ï¼‰</span><br><span class="line"></span><br><span class="line">stroke() ç»˜åˆ¶å·²å®šä¹‰çš„è·¯å¾„</span><br><span class="line"></span><br><span class="line">beginPath()  èµ·å§‹ï¼ˆé‡ç½®ï¼‰å½“å‰è·¯å¾„</span><br><span class="line"></span><br><span class="line">moveTo( x, y )  å°†ç¬”è§¦ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡(x,y)</span><br><span class="line"></span><br><span class="line">lineTo( x, y )  ç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°æŒ‡å®šçš„åæ ‡(x,y)çš„ç›´çº¿</span><br><span class="line"></span><br><span class="line">clip()  ä»åŸå§‹ç”»å¸ƒå‰ªåˆ‡ä»»æ„å½¢çŠ¶å’Œå°ºå¯¸çš„åŒºåŸŸ</span><br><span class="line"></span><br><span class="line">quadraticCurveTo()  åˆ›å»ºäºŒæ¬¡è´å¡å°”æ›²çº¿</span><br><span class="line"></span><br><span class="line">bezierCurveTo()   åˆ›å»ºä¸‰æ¬¡è´å¡å°”æ›²çº¿</span><br><span class="line"></span><br><span class="line">arc( x, y, radius, startAngle, endAngle, anticlockwise)  ç»˜åˆ¶åœ†æˆ–åœ†å¼§</span><br><span class="line"></span><br><span class="line">arcTo( x1, y1, x2, y2, radius)  æ ¹æ®ç»™å®šç‚¹ç”»åœ†å¼§ï¼Œå†ä»¥ç›´çº¿è¿æ¥ä¸¤ä¸ªç‚¹</span><br><span class="line"></span><br><span class="line">isPointInPath( x, y )  æ£€æµ‹æŒ‡å®šçš„ç‚¹æ˜¯å¦åœ¨å½“å‰è·¯å¾„ä¸­ï¼Œåœ¨åˆ™è¿”å›<span class="literal">true</span>ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fillStyle  è®¾ç½®æˆ–è¿”å›ç”¨äºå¡«å……ç»˜ç”»çš„é¢œè‰²ã€æ¸å˜æˆ–æ¨¡å¼</span><br><span class="line"></span><br><span class="line">strokeStyle  è®¾ç½®æˆ–è¿”å›ç”¨äºç¬”è§¦çš„é¢œè‰²ã€æ¸å˜æˆ–æ¨¡å¼</span><br><span class="line"></span><br><span class="line">shadowColor  è®¾ç½®æˆ–è¿”å›ç”¨äºé˜´å½±çš„é¢œè‰²</span><br><span class="line"></span><br><span class="line">shadowBlur   è®¾ç½®æˆ–è¿”å›ç”¨äºé˜´å½±çš„æ¨¡ç³Šçº§åˆ«</span><br><span class="line"></span><br><span class="line">shadowOffsetX  è®¾ç½®æˆ–è¿”å›é˜´å½±ä¸å½¢çŠ¶çš„æ°´å¹³è·ç¦»</span><br><span class="line"></span><br><span class="line">shadowOffsetY  è®¾ç½®æˆ–è¿”å›é˜´å½±ä¸å½¢çŠ¶çš„å‚ç›´è·ç¦»</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lineCap  è®¾ç½®æˆ–è¿”å›çº¿æ¡çš„ç»“æŸç‚¹æ ·å¼ï¼ˆbuttã€roundã€squareï¼‰</span><br><span class="line"></span><br><span class="line">lineJoin  è®¾ç½®æˆ–è¿”å›å½“ä¸¤æ¡çº¿äº¤æ±‡æ—¶ï¼Œè¾¹è§’çš„ç±»å‹ï¼ˆbevelã€roundã€miterï¼‰</span><br><span class="line"></span><br><span class="line">lineWidth  è®¾ç½®æˆ–è¿”å›å½“å‰çš„çº¿æ¡å®½åº¦</span><br><span class="line"></span><br><span class="line">miterLimit  è®¾ç½®æˆ–è¿”å›æœ€å¤§æ–œæ¥é•¿åº¦</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">createLinearGradient( x0, y0, x1, y1 )  åˆ›å»ºçº¿æ€§æ¸å˜</span><br><span class="line"></span><br><span class="line">createPattern( image/canvas/video, repeat )  åœ¨æŒ‡å®šçš„æ–¹å‘å†…é‡å¤ç»˜åˆ¶æŒ‡å®šçš„å…ƒç´ </span><br><span class="line"></span><br><span class="line">createRadialGradient( x0, y0, r0, x1, y1, r1 ) åˆ›å»ºå¾„å‘æ¸å˜</span><br><span class="line"></span><br><span class="line">addColorStop( stop, color )  è§„å®šæ¸å˜å¯¹è±¡ä¸­çš„é¢œè‰²å’Œåœæ­¢ä½ç½®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">font  è®¾ç½®æˆ–è¿”å›æ–‡æœ¬å†…å®¹çš„å½“å‰å­—ä½“å±æ€§ï¼ˆå’Œcssçš„fontä¸€æ ·ï¼‰</span><br><span class="line"></span><br><span class="line">textAlign  è®¾ç½®æˆ–è¿”å›æ–‡æœ¬å†…å®¹çš„å½“å‰å¯¹é½æ–¹å¼</span><br><span class="line"></span><br><span class="line">textBaseline  è®¾ç½®æˆ–è¿”å›åœ¨ç»˜åˆ¶æ–‡æœ¬æ—¶ä½¿ç”¨çš„å½“å‰æ–‡æœ¬åŸºçº¿</span><br><span class="line"></span><br><span class="line">fillText( text, x, y )  åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶â€œè¢«å¡«å……â€çš„æ–‡æœ¬</span><br><span class="line"></span><br><span class="line">strokeText( text, x, y )  åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶æ–‡æœ¬ï¼ˆæ— å¡«å……ï¼‰</span><br><span class="line"></span><br><span class="line">measureText( text )  è¿”å›åŒ…å«æŒ‡å®šæ–‡æœ¬å®½åº¦çš„å¯¹è±¡ï¼ˆå±æ€§widthè·å–å®½åº¦ï¼‰</span><br><span class="line"></span><br><span class="line">drawImage( image/canvas, x, y )ã€drawImage( image/canvas, x, y, width, height )ã€drawImage( image/canvas, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight )  åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶å›¾åƒã€ç”»å¸ƒæˆ–è§†é¢‘</span><br><span class="line"></span><br><span class="line">createImageData( width, height )ã€createImageData(imageData)  ç»˜åˆ¶ImageDataå¯¹è±¡</span><br><span class="line"></span><br><span class="line">getImageData( x, y, width, height )  è¿”å›ImageDataå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸ºç”»å¸ƒä¸ŠæŒ‡å®šçš„çŸ©å½¢å¤åˆ¶åƒç´ æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">putImageData( ImageData, x, y )ã€putImageData( imageData, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight )  æŠŠå›¾åƒæ•°æ®æ”¾å›ç”»å¸ƒä¸Šã€‚</span><br><span class="line"></span><br><span class="line">width  è¿”å›ImageDataå¯¹è±¡çš„å®½åº¦</span><br><span class="line"></span><br><span class="line">height  è¿”å›ImageDataå¯¹è±¡çš„é«˜åº¦</span><br><span class="line"></span><br><span class="line">data  è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æŒ‡å®šçš„ImageDataå¯¹è±¡çš„å›¾åƒæ•°æ®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">globalAlpha  è®¾ç½®æˆ–è¿”å›ç»˜å›¾çš„å½“å‰alphaæˆ–é€æ˜åº¦</span><br><span class="line"></span><br><span class="line">globalCompositeOperation  è®¾ç½®æˆ–è¿”å›æ–°å›¾åƒå¦‚ä½•ç»˜åˆ¶åˆ°å·²æœ‰çš„å›¾åƒä¸Šã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">scale( x, y )  ç¼©æ”¾å½“å‰ç»˜å›¾</span><br><span class="line"></span><br><span class="line">translate( x, y )  é‡æ–°è®¾ç½®ç”»å¸ƒä¸Šçš„(<span class="number">0</span>,<span class="number">0</span>)ä½ç½®</span><br><span class="line"></span><br><span class="line">rotate( angle )  é€‰æ‹©å½“å‰ç»˜å›¾ï¼Œå•ä½ä¸ºâ€œå¼§åº¦â€ï¼Œè§’åº¦è½¬å¼§åº¦å…¬å¼ï¼ˆ degrees*<span class="built_in">Math</span>.PI/<span class="number">180</span>ï¼‰</span><br><span class="line"></span><br><span class="line">transform( m11, m12, m21, m22, dx, dy )  æ›¿æ¢ç»˜å›¾çš„å½“å‰è½¬æ¢çŸ©é˜µ</span><br><span class="line"></span><br><span class="line">setTransform()  å°†å½“å‰è½¬æ¢é‡ç½®ä¸ºå•å…ƒçŸ©é˜µï¼Œç„¶åè¿è¡Œtransform()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">save()  ä¿å­˜å½“å‰ç¯å¢ƒçš„çŠ¶æ€</span><br><span class="line"></span><br><span class="line">restore()  æ¢å¤ä¹‹å‰ä¿å­˜è¿‡çš„è·¯å¾„çŠ¶æ€å’Œå±æ€§</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">getContext(<span class="string">'2d'</span>)  è·å–<span class="number">2</span>då¯¹è±¡</span><br><span class="line"></span><br><span class="line">toDataURL()  å°†canvasè½¬æ¢æˆå›¾ç‰‡ï¼Œè¿”å›åœ°å€</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>javascript è§‚å¯Ÿè€…æ¨¡å¼ (è®¢é˜…è€…ä¸å‘å¸ƒè€…)</title>
      <link href="/publish-subscribe-mode.html"/>
      <content type="html"><![CDATA[<p>javascript è§‚å¯Ÿè€…æ¨¡å¼ (è®¢é˜…è€…ä¸å‘å¸ƒè€…)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PubSub</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.handlers = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line">PubSub.prototype = &#123;</span><br><span class="line">    <span class="comment">// è®¢é˜…äº‹ä»¶</span></span><br><span class="line">    on: <span class="function"><span class="keyword">function</span>(<span class="params">eventType,handler</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span>(!(eventType <span class="keyword">in</span> self.handlers)) &#123;</span><br><span class="line">             self.handlers[eventType] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        self.handlers[eventType].push(handler);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="comment">// è§¦å‘äº‹ä»¶(å‘å¸ƒäº‹ä»¶)</span></span><br><span class="line">       emit: <span class="function"><span class="keyword">function</span>(<span class="params">eventType</span>)</span>&#123;</span><br><span class="line">           <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">           <span class="keyword">var</span> handlerArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>,<span class="number">1</span>);</span><br><span class="line">           <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; self.handlers[eventType].length; i++) &#123;</span><br><span class="line">                 self.handlers[eventType][i].apply(self,handlerArgs);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> self;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;;<span class="comment">// è°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pubsub = <span class="keyword">new</span> PubSub();</span><br><span class="line"></span><br><span class="line">pubsub.on(<span class="string">'A'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> + data);  <span class="comment">// æ‰§è¡Œç¬¬ä¸€ä¸ªå›è°ƒä¸šåŠ¡å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">pubsub.on(<span class="string">'A'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span> + data); <span class="comment">// æ‰§è¡Œç¬¬äºŒä¸ªä¸šåŠ¡å›è°ƒå‡½æ•°</span></span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘äº‹ä»¶A</span></span><br><span class="line"></span><br><span class="line">pubsub.emit(<span class="string">'A'</span>,<span class="string">"æˆ‘æ˜¯å‚æ•°"</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å®ä¹ &amp;andyMoveå°ç»“</title>
      <link href="/practice-summary-andy-move.html"/>
      <content type="html"><![CDATA[<p>è¿™å­¦æœŸçš„å®ä¹ ä¹Ÿå¿«ç»“æŸäº†ï¼Œæƒ³æƒ³è¿˜æ˜¯æŒºæ„Ÿæ…¨çš„ã€‚è¿™æ¬¡å¯¹andyMoveçš„æ€»ç»“å°±å½“åšå¯¹è‡ªå·±è¿™å­¦æœŸå®ä¹ çš„æ€»ç»“å§ã€‚</p><p>åœ¨ç¾å›¾ä¹Ÿå¿«æ»¡4ä¸ªæœˆäº†ï¼Œæ€»æ„Ÿè§‰è‡ªå·±è¿›æ­¥çš„éå¸¸æ…¢ï¼Œæœ‰æ—¶å€™ä¼šåœ¨æƒ³æ˜¯ä¸æ˜¯è‡ªå·±å˜å¾—ä¸ä¸Šå¿ƒäº†ï¼Ÿå˜å¾—ä¸è¿›å–äº†ï¼Ÿå¯¹ï¼ï¼ä½ å°±æ˜¯ä¸è¿›å–äº†ï¼Œæ¾æ‡ˆäº†ï¼ï¼ä¸ï¼Œè¿™å®Œå…¨ä¸æ˜¯æˆ‘ï¼ï¼ï¼ï¼å½“ç„¶åœ¨è¿™å››ä¸ªæœˆé‡Œæˆ–å¤šæˆ–å°‘è¿˜æ˜¯æ¯”åˆšè¿›ç¾å›¾çš„æ—¶å€™æœ‰æ‰€æ”¶è·ã€‚ä»åˆšå¼€å§‹ä»€ä¹ˆéƒ½ä¸å¤ªæ‡‚çš„æƒ…å†µä¸‹å¼€å§‹çš„ç¬¬ä¸€ä¸ªH5,åˆ°ç°åœ¨ç›¸å¯¹æ¯”è¾ƒæ¸…æ¥šçš„å¼€å‘(bugæ»¡å¤©é£)ã€‚çœŸçš„éå¸¸æ„Ÿè°¢æœ‰è¿™ä¸ªå¹³å°è®©æˆ‘æ›´åŠ æ¸…æ¥šçš„çœ‹æ¸…è‡ªå·±çš„ä¸è¶³ï¼Œåœ¨è¿™é‡ŒçœŸçš„éå¸¸æ„Ÿè°¢æ¿æ —å…„ä¸€å¯¹ä¸€çš„è¾…å¯¼ï¼Œè‡ªå·±çš„æ¸£æŠ€æœ¯å¯¹ä»–é€ æˆçš„ä¸ä¾¿æ·±æ„Ÿè‡ªè´£ã€‚éå¸¸æ„Ÿè°¢æ™“ä¸œå…„ç…§é¡¾~~</p><h2 id="åæ€"><a href="#åæ€" class="headerlink" title="åæ€"></a>åæ€</h2><ul><li><p>ä¸ç®¡åšä»€ä¹ˆäº‹ï¼Œ<strong>ç»†èŠ‚</strong>çœŸçš„å¾ˆé‡è¦ï¼Œåœ¨å¼€å‘ä¸­ï¼Œæ­£å¦‚æ™“ä¸œè¯´çš„å¤šå»æ³¨æ„ä¸€äº›ç»†èŠ‚çš„ä¸œè¥¿ï¼Œè¿™ä¸ªé¡¹ç›®å°±ä¼šæ›´å¥½ï¼Œä¸è¦é©¬è™çš„å»å¯¹å¾…å®ƒï¼Œæ¯”å¦‚åŠ¨ç”»å¾®è°ƒçš„æ—¶å€™æ¯”è¾ƒéº»çƒ¦ï¼Œä¸€æ—¦ä½ é©¬è™åº”ä»˜çš„è¯ï¼Œç»†èŠ‚å¤„ç†ä¸åˆ°ä½ï¼ŒåŠ¨ç”»ä¸å†™åè€Œä¼šæ¯”è¾ƒå¥½ï¼ï¼è¯´çš„å°±æ˜¯ä½ è¦ç»†å¿ƒï¼ï¼å¤šæ³¨æ„~~</p></li><li><p>åœ¨å¼€å‘<strong>æ•ˆç‡</strong>æ–¹é¢çœŸçš„éœ€è¦å†æå‡æå‡ï¼Œæ¯”å¦‚åƒä¸€äº›æ¯”è¾ƒéº»çƒ¦çš„animationåŠ¨ç”»å¯ä»¥å…ˆä¸ç”¨å¤„ç†ï¼Œå†™animationæœ‰æ—¶å€™çœŸçš„ä¼šæŒºèŠ±è´¹æ—¶é—´çš„ï¼Œå¯¼è‡´äºé¡¹ç›®è¿›å±•çš„æ¯”è¾ƒæ…¢ï¼Œæœ‰å¯èƒ½ä¼šè¯¯æœŸï¼Œæ‰€ä»¥å¯ä»¥å…ˆæŠŠé¡¹ç›®åšå‡ºæ¥ï¼ŒæŠŠé¡¹ç›®å…ˆè·‘é€šï¼Œé€»è¾‘å¤„ç†å¥½äº†å†å»å¤„ç†animationç­‰ç­‰ã€‚</p></li><li><p><strong>ä»£ç æ–¹é¢</strong>æ­£å¦‚æ™“ä¸œè¯´çš„ç›®å‰è‡ªå·±å†™çš„ <strong>ä»£ç </strong>å¯èƒ½è¿˜æ˜¯æ¯”è¾ƒé¢æ¡åŒ–ï¼Œæ²¡æœ‰å¾ˆå¥½çš„å»ä¼˜åŒ–ï¼Œé‡å¤æ€§å¤ªå¼ºï¼Œæ²¡æœ‰æ¨¡å—åŒ–</p></li><li><p><strong>js css æ²¡æœ‰æ¨¡å—åŒ–</strong>ï¼Œè¦æœ‰<strong>æ¨¡å—åŒ–</strong>çš„æ€æƒ³ï¼Œå‡å°‘ä»£ç è€¦åˆï¼Œè¿™ä¸€ç‚¹éå¸¸éå¸¸é‡è¦ï¼ï¼ï¼è°¨è®°ï¼ï¼ï¼å†™åˆ°é‡å¤çš„ä»£ç çš„æ—¶å€™ä¸€ç‚¹è¦æƒ³ç€æ€ä¹ˆå»ä¼˜åŒ–ï¼ï¼ï¼æ‹¿åˆ°PSDçš„æ—¶å€™<strong>ä¸è¦é©¬ä¸Šå°±å¼€å§‹åˆ‡</strong>ï¼Œåº”è¯¥è¦æƒ³å¥½å¥½çš„æƒ³æƒ³å¦‚ä½•å»æ¨¡å—åŒ–ï¼Œå¦‚ä½•å»å¸ƒå±€ï¼ŒæŠŠé€»è¾‘ç†æ¸…æ¥šï¼Œä¸ç„¶ä½ ä¼šåšå¾ˆå¤šæ— ç”¨åŠŸï¼ï¼ï¼</p></li><li><p><strong>bugä¿®æ”¹æ–¹é¢</strong>æäº¤æµ‹è¯•ç‰ˆå®Œä¹‹åæµ‹è¯•ä¾¿ä¼šå¼€å§‹æµ‹è¯•é€æ­¥æäº¤bugå‡ºæ¥ï¼Œè¦æ—¶å¸¸å»<strong>å…³æ³¨jira</strong>ä¸Šè‡ªå·±çš„bugï¼ŒåŠæ—¶ä¿®å¤ï¼ï¼åŠæ—¶ï¼ï¼ä¿®å¤å®Œæ¯•ä¸€å®šè¦å…³é—­bugç»™å‡ºåˆç†çš„bugä¿®å¤è§£é‡Šã€‚bugä¿®å¤æ—¶è‡ªå·±è¦å…ˆæµ‹ä¸€éåœ¨æäº¤ç»™æµ‹è¯•ï¼Œå¯èƒ½æœ‰æ—¶å€™bugå¹¶æœªè§£å†³ï¼Œå¯¼è‡´äºæµ‹è¯•é‚£è¾¹åšæ— ç”¨åŠŸã€‚[ä½ è¿˜è¦ä¸è¦è„¸å®³äººå®¶ç™½å¿™æ´»ã€‚ã€‚ã€‚]</p></li><li><p><strong>ä¸è¦å®³æ€•éº»çƒ¦</strong>åœ¨åšlancomeçš„æ—¶å€™éœ€æ±‚çš„å˜åŠ¨ï¼Œè®©æˆ‘è§‰å¾—æœ‰äº›éº»çƒ¦ï¼Œæ•…è€Œå°±æƒ³åˆ°æŠŠéœ€æ±‚ç æ‰ï¼Œäº‹åæƒ³æƒ³é‚£æ—¶å€™çš„è‡ªå·±çœŸçš„å¾ˆåƒåœ¾ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å°±å»è§£å†³ï¼Œè€Œä¸æ˜¯æƒ³ç€å¦‚ä½•ä¸å»è§£å†³ï¼ï¼</p></li><li><p><strong>ä¾èµ–</strong>æ–¹é¢ï¼Œèƒ½ä¸éº»çƒ¦åˆ«äººçš„å°±ä¸éº»çƒ¦åˆ«äººï¼Œååœ¨æ¿æ —æ—è¾¹ï¼Œæœ‰æ—¶å€™å°±äº§ç”Ÿäº†è¿‡åº¦ä¾èµ–çš„é—®é¢˜ï¼Œä¸€é‡åˆ°bugè‡ªå·±ä¸èƒ½è§£å†³çš„æƒ…å†µï¼Œå°±å»é—®ï¼Œ[æ€ªå¯¹ä¸èµ·æ¿æ —å…„ï¼ŒçœŸçš„è¶…è°¢è°¢]ï¼Œè‡ªå·±å¹¶æ²¡æœ‰å¥½å¥½æƒ³æƒ³è‡ªå·±å¦‚ä½•è§£å†³ï¼Œäº§ç”Ÿè¿‡åº¦ä¾èµ–ã€‚å‡¡äº‹ä¸€å®šè¦è‡ªå·±è§£å†³ï¼Œè‡ªå·±è§£å†³ï¼ï¼ï¼ï¼</p></li><li><p>åœ¨<strong>æ²Ÿé€šæ–¹é¢</strong>ï¼Œæ€åº¦è°¦å’Œå¤šæ²Ÿé€šï¼Œä¸è¦æŠŠè‡ªå·±çš„æƒ…ç»ªå½±å“åˆ°åˆ«äººï¼Œç‰¹åˆ«æ˜¯äº§å“è¿è¥è®¾è®¡æµ‹è¯•è¿™äº›å¤§ä½¬<del>~[[å—å¥´æ‰ä¸€è·ª</del>]</p></li></ul><h2 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h2><p>ä¸‹é¢æ˜¯ä¸€äº›è¿™æ¬¡å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°çš„ä¸€äº›é—®é¢˜ï¼š</p><h4 id="QQå¹³å°ï¼Œç»“æœé¡µä¸èƒ½æ»‘åŠ¨"><a href="#QQå¹³å°ï¼Œç»“æœé¡µä¸èƒ½æ»‘åŠ¨" class="headerlink" title="QQå¹³å°ï¼Œç»“æœé¡µä¸èƒ½æ»‘åŠ¨"></a>QQå¹³å°ï¼Œç»“æœé¡µä¸èƒ½æ»‘åŠ¨</h4><p>ç”±äºiOSä¸‹z-indexçš„å±‚çº§å½±å“ï¼Œå¯¼è‡´äºæœ‰äº›å¹³å°åœ¨iosä¸‹ä¼šå¾ˆéš¾å‡ºç°æ»‘åŠ¨çš„æƒ…å†µ(ä¸é¡ºç•…),ä»¥åŠtransitionå’ŒanimationåŒæ—¶ä½¿ç”¨iosç«¯å¯èƒ½ä¼šå‡ºç°é—®é¢˜</p><p>ç›®å‰è§£å†³æ–¹æ¡ˆ:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">css:</span><br><span class="line"></span><br><span class="line">ç›®å‰</span><br><span class="line">page&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    //transition: transform .5s;</span><br><span class="line">    //opacity: 0;</span><br><span class="line">    overflow-x: hidden;</span><br><span class="line">    overflow-y: auto;</span><br><span class="line">    &amp;.transition&#123;</span><br><span class="line">        transition: all .3s;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.show&#123;</span><br><span class="line">        transform: translateX(0);</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.hide-after&#123;</span><br><span class="line">        transform: translateX(100%);</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;.hide-before&#123;</span><br><span class="line">        transform: translateX(-100%);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä¹‹å‰</span><br><span class="line">page&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    transition: transform .5s;</span><br><span class="line">    opacity: 0;</span><br><span class="line">    overflow-x: hidden;</span><br><span class="line">    overflow-y: auto;</span><br><span class="line">    &amp;.in &#123;</span><br><span class="line">        opacity: 1;</span><br><span class="line">        z-index: 2;</span><br><span class="line">        //animation: in 0.5s ease both;</span><br><span class="line">        //</span><br><span class="line">        //@keyframes in &#123;</span><br><span class="line">        //    0% &#123; opacity: 0; &#125;</span><br><span class="line">        //    100% &#123; opacity: 1; &#125;</span><br><span class="line">        //&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;.out &#123;</span><br><span class="line">        opacity: 0.5;</span><br><span class="line">        z-index: 1;</span><br><span class="line">        //transform: translateX(-100%);</span><br><span class="line">        //transition: all .5s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="ä¸Šä¼ å®Œå›¾ç‰‡è¦è¿›è¡Œé¢„åŠ è½½"><a href="#ä¸Šä¼ å®Œå›¾ç‰‡è¦è¿›è¡Œé¢„åŠ è½½" class="headerlink" title="ä¸Šä¼ å®Œå›¾ç‰‡è¦è¿›è¡Œé¢„åŠ è½½"></a>ä¸Šä¼ å®Œå›¾ç‰‡è¦è¿›è¡Œé¢„åŠ è½½</h4><p>åœ¨ä¸Šä¼ å®Œå›¾ç‰‡ç”Ÿæˆurlçš„æ—¶å€™ä¸€èˆ¬éƒ½éœ€è¦åœ¨æ¥ä¸‹æ¥çš„é¡µé¢ä¸­ç”¨åˆ°ï¼Œæ•…è¦å¯¹å…¶è¿›è¡Œé¢„åŠ è½½ã€‚åœ¨åšå¸§åŠ¨ç”»æ›´æ¢å›¾ç‰‡çš„æ—¶å€™è¦æ³¨æ„ï¼Œä¹Ÿæ˜¯è¦é¢„åŠ è½½</p><h4 id="iosç§€ç§€ç«¯ç»“æœé¡µè½¬å‘qqå’Œqqç©ºé—´è½¬å‘ä¸äº†"><a href="#iosç§€ç§€ç«¯ç»“æœé¡µè½¬å‘qqå’Œqqç©ºé—´è½¬å‘ä¸äº†" class="headerlink" title="iosç§€ç§€ç«¯ç»“æœé¡µè½¬å‘qqå’Œqqç©ºé—´è½¬å‘ä¸äº†"></a>iosç§€ç§€ç«¯ç»“æœé¡µè½¬å‘qqå’Œqqç©ºé—´è½¬å‘ä¸äº†</h4><p>è¿™ä¸ªè¦æ³¨æ„ï¼Œåœ¨åšæ‹¼æ¥urlçš„æ—¶å€™è¦å¯¹å¸¦æœ‰ä¸­æ–‡æˆ–è€…å…¶ä»–å­—ç¬¦åšencodeURIComponentå¤„ç†ï¼Œå†åˆ°è¦ç”¨çš„åœ°æ–¹(åˆ†äº«é¡µ)è¿›è¡ŒdecodeURIComponentè·å–ï¼Œä¸Šæ¬¡åœ¨ç¾¤é‡Œé¢çœ‹åˆ°shareçš„imageURLä¸ºç©ºæˆ–è€…è¿™ä¸ªå›¾ç‰‡å¤ªå¤§çš„è¯åœ¨ç«¯å†…åˆ†äº«qqä¹Ÿä¼šè°ƒä¸èµ·æ¥</p><h4 id="å›¾ç‰‡repeaté‡å¤é—®é¢˜"><a href="#å›¾ç‰‡repeaté‡å¤é—®é¢˜" class="headerlink" title="å›¾ç‰‡repeaté‡å¤é—®é¢˜"></a>å›¾ç‰‡repeaté‡å¤é—®é¢˜</h4><p>jsåŠ¨æ€åŠ ä¸Šå›¾ç‰‡çš„æ—¶å€™è¦è®°å¾—åŠ ä¸Šbackground-repeat:no-repeatï¼Œä¸è¦åªåŠ background-image</p><h4 id="shareé¡µä¹Ÿè¦åšåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„"><a href="#shareé¡µä¹Ÿè¦åšåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„" class="headerlink" title="shareé¡µä¹Ÿè¦åšåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„"></a>shareé¡µä¹Ÿè¦åšåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„</h4><p>åœ¨shareé¡µçš„æ—¶å€™ä¸€èˆ¬ä¹Ÿè¦åŠ ä¸Šåˆ†äº«ï¼Œauthæƒé™æ¨¡å—æ˜¯å¼‚æ­¥æ‰§è¡Œçš„~~</p><h4 id="å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜"><a href="#å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜" class="headerlink" title="å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜"></a>å¾®åšä¸‹çš„è§†é¢‘é—®é¢˜</h4><p>å¾®åšä¸‹è§†é¢‘é»˜è®¤æ˜¯å…¨å±æ’­æ”¾çš„ï¼Œç‚¹å‡»è¿”å›è§†é¢‘åœ¨æ²¡æœ‰æ§åˆ¶æ¡controlçš„æƒ…å†µä¸‹ä¼šä¸èƒ½å†æ¬¡æ’­æ”¾ï¼Œå› æ­¤åœ¨weiboä¸‹è¦åŠ ä¸Šcontrol</p><h4 id="gifåœ¨Androidä¸‹ä¼šå‡ºç°æ˜¾ç¤ºä¸€æ®µæ—¶é—´ä¹‹åä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ä¿å­˜å’Œè½¬å‘-åç«¯ç®—æ³•å·²è§£å†³ï¼Œæ— éœ€é™çº§"><a href="#gifåœ¨Androidä¸‹ä¼šå‡ºç°æ˜¾ç¤ºä¸€æ®µæ—¶é—´ä¹‹åä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ä¿å­˜å’Œè½¬å‘-åç«¯ç®—æ³•å·²è§£å†³ï¼Œæ— éœ€é™çº§" class="headerlink" title="gifåœ¨Androidä¸‹ä¼šå‡ºç°æ˜¾ç¤ºä¸€æ®µæ—¶é—´ä¹‹åä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ä¿å­˜å’Œè½¬å‘(åç«¯ç®—æ³•å·²è§£å†³ï¼Œæ— éœ€é™çº§)"></a>gifåœ¨Androidä¸‹ä¼šå‡ºç°æ˜¾ç¤ºä¸€æ®µæ—¶é—´ä¹‹åä¸æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ä¿å­˜å’Œè½¬å‘(åç«¯ç®—æ³•å·²è§£å†³ï¼Œæ— éœ€é™çº§)</h4><p>æ­¤æ¬¡é‡‡ç”¨é™çº§çš„æ–¹æ¡ˆï¼Œç›´æ¥æ”¾å›¾ç‰‡ï¼Œå­å…ƒç´ gifçš„opacityä¸º0</p><h4 id="video-åœ¨å¾®ä¿¡ä¸‹ä¼šæ˜¾ç¤ºå†…ç½®çš„æ’­æ”¾å™¨"><a href="#video-åœ¨å¾®ä¿¡ä¸‹ä¼šæ˜¾ç¤ºå†…ç½®çš„æ’­æ”¾å™¨" class="headerlink" title="video åœ¨å¾®ä¿¡ä¸‹ä¼šæ˜¾ç¤ºå†…ç½®çš„æ’­æ”¾å™¨"></a>video åœ¨å¾®ä¿¡ä¸‹ä¼šæ˜¾ç¤ºå†…ç½®çš„æ’­æ”¾å™¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;video class=&quot;js-video&quot;</span><br><span class="line">        loop</span><br><span class="line">        airplay=&quot;allow&quot;</span><br><span class="line">        x5-playsinline</span><br><span class="line">        playsinline</span><br><span class="line">        webkit-playsinline</span><br><span class="line">        preload=&quot;auto&quot;</span><br><span class="line">&gt;</span><br><span class="line">&lt;/video&gt;</span><br></pre></td></tr></table></figure><h4 id="iPhoneXåœ¨videoé—®é¢˜"><a href="#iPhoneXåœ¨videoé—®é¢˜" class="headerlink" title="iPhoneXåœ¨videoé—®é¢˜"></a>iPhoneXåœ¨videoé—®é¢˜</h4><p>iPhoneXçš„videoåœ¨æœ‰posterçš„æƒ…å†µä¸‹ï¼Œæ’­æ”¾è§†é¢‘posterä¸ä¼šè‡ªåŠ¨å»æ‰ï¼Œè¦è‡ªå·±é€»è¾‘æ‰‹åŠ¨å»æ‰poster</p><h4 id="å°½é‡ä¸è¦å»ç”¨touchstart"><a href="#å°½é‡ä¸è¦å»ç”¨touchstart" class="headerlink" title="å°½é‡ä¸è¦å»ç”¨touchstart"></a>å°½é‡ä¸è¦å»ç”¨touchstart</h4><p>touchstartæ—¶é—´é—´éš”å¤ªå°ï¼Œæœ‰å¯èƒ½ä¸ä¼šç”Ÿæ•ˆï¼Œä¸€èˆ¬ä½¿ç”¨tapï¼Œclickï¼Œtouchendï¼Œè€Œtouchstartä¸»è¦ç”¨äºäº‹ä»¶çŠ¶æ€æ–¹é¢</p><h4 id="åœ¨å¼€å‘è¦å°½å¯èƒ½æ¨¡å—åŒ–"><a href="#åœ¨å¼€å‘è¦å°½å¯èƒ½æ¨¡å—åŒ–" class="headerlink" title="åœ¨å¼€å‘è¦å°½å¯èƒ½æ¨¡å—åŒ–"></a>åœ¨å¼€å‘è¦å°½å¯èƒ½æ¨¡å—åŒ–</h4><p>å¯¹äºcssä¹Ÿæ˜¯ï¼Œç±»ä¼¼çš„csså¯ä»¥æŠ½å‡ºæ¨¡å—ï¼Œjsæ›´æ˜¯ï¼Œé€»è¾‘å°½å¯èƒ½å†™æˆæ¨¡å—</p><h4 id="ä»£ç è¦å°½å¯èƒ½ç®€æ´ï¼Œèƒ½ä¼˜åŒ–çš„é€»è¾‘å°½å¯èƒ½ä¼˜åŒ–ï¼Œä»¥åè¦å…¨ä½¿ç”¨ES6ï¼ï¼ES6ï¼ï¼ï¼ï¼"><a href="#ä»£ç è¦å°½å¯èƒ½ç®€æ´ï¼Œèƒ½ä¼˜åŒ–çš„é€»è¾‘å°½å¯èƒ½ä¼˜åŒ–ï¼Œä»¥åè¦å…¨ä½¿ç”¨ES6ï¼ï¼ES6ï¼ï¼ï¼ï¼" class="headerlink" title="ä»£ç è¦å°½å¯èƒ½ç®€æ´ï¼Œèƒ½ä¼˜åŒ–çš„é€»è¾‘å°½å¯èƒ½ä¼˜åŒ–ï¼Œä»¥åè¦å…¨ä½¿ç”¨ES6ï¼ï¼ES6ï¼ï¼ï¼ï¼"></a>ä»£ç è¦å°½å¯èƒ½ç®€æ´ï¼Œèƒ½ä¼˜åŒ–çš„é€»è¾‘å°½å¯èƒ½ä¼˜åŒ–ï¼Œä»¥åè¦å…¨ä½¿ç”¨ES6ï¼ï¼ES6ï¼ï¼ï¼ï¼</h4><h4 id="åœ¨ç§»åŠ¨ç«¯çš„è¯æœ€å¥½ä¸è¦å»ç”¨flexbox"><a href="#åœ¨ç§»åŠ¨ç«¯çš„è¯æœ€å¥½ä¸è¦å»ç”¨flexbox" class="headerlink" title="åœ¨ç§»åŠ¨ç«¯çš„è¯æœ€å¥½ä¸è¦å»ç”¨flexbox"></a>åœ¨ç§»åŠ¨ç«¯çš„è¯æœ€å¥½ä¸è¦å»ç”¨flexbox</h4><p>flexboxçš„å…¼å®¹æ€§æ€§ç›®å‰è¿˜æ˜¯ä¸å¤Ÿå¥½ï¼Œå°½é‡å»å…‹æœè¿™ä¸ªä¹ æƒ¯</p><h4 id="è§†é¢‘æ’­æ”¾å»¶è¿Ÿé—®é¢˜-åç«¯ç®—æ³•å·²è§£å†³"><a href="#è§†é¢‘æ’­æ”¾å»¶è¿Ÿé—®é¢˜-åç«¯ç®—æ³•å·²è§£å†³" class="headerlink" title="è§†é¢‘æ’­æ”¾å»¶è¿Ÿé—®é¢˜(åç«¯ç®—æ³•å·²è§£å†³)"></a>è§†é¢‘æ’­æ”¾å»¶è¿Ÿé—®é¢˜(åç«¯ç®—æ³•å·²è§£å†³)</h4><h4 id="iosä½ç«¯æœºä¸‹gifä¿å­˜ä¸ºé™æ€-iosæ—©äº›ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç›®å‰æ— è§£"><a href="#iosä½ç«¯æœºä¸‹gifä¿å­˜ä¸ºé™æ€-iosæ—©äº›ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç›®å‰æ— è§£" class="headerlink" title="iosä½ç«¯æœºä¸‹gifä¿å­˜ä¸ºé™æ€(iosæ—©äº›ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç›®å‰æ— è§£)"></a>iosä½ç«¯æœºä¸‹gifä¿å­˜ä¸ºé™æ€(iosæ—©äº›ç‰ˆæœ¬çš„é—®é¢˜ï¼Œç›®å‰æ— è§£)</h4><h1 id="ä¹‹å-ä¸å¯¹ï¼ç°åœ¨"><a href="#ä¹‹å-ä¸å¯¹ï¼ç°åœ¨" class="headerlink" title="ä¹‹å(ä¸å¯¹ï¼ç°åœ¨~~)"></a>ä¹‹å(ä¸å¯¹ï¼ç°åœ¨~~)</h1><h3 id="1ã€è°ƒæ•´å¥½çŠ¶æ€ï¼Œå……æ»¡æ¿€æƒ…æ‰æ˜¯æˆ‘ï¼ï¼"><a href="#1ã€è°ƒæ•´å¥½çŠ¶æ€ï¼Œå……æ»¡æ¿€æƒ…æ‰æ˜¯æˆ‘ï¼ï¼" class="headerlink" title="1ã€è°ƒæ•´å¥½çŠ¶æ€ï¼Œå……æ»¡æ¿€æƒ…æ‰æ˜¯æˆ‘ï¼ï¼"></a>1ã€è°ƒæ•´å¥½çŠ¶æ€ï¼Œå……æ»¡æ¿€æƒ…æ‰æ˜¯æˆ‘ï¼ï¼</h3><h3 id="2ã€-ä¸“å¿ƒäºå­¦ä¹ "><a href="#2ã€-ä¸“å¿ƒäºå­¦ä¹ " class="headerlink" title="2ã€ ä¸“å¿ƒäºå­¦ä¹ "></a>2ã€ ä¸“å¿ƒäºå­¦ä¹ </h3><p>ä¹°äº†ä¹¦ä¹°äº†æ¤…å­ä¹°äº†æ˜¾ç¤ºå™¨ï¼Œå¯¹ï¼ï¼å°±æ˜¯è¦è¯»ä¹¦ï¼ï¼å“ˆå“ˆå“ˆ<br>è¿™æ˜¯åœ¨æ˜¥èŠ‚æ”¾å‡å‰è‡ªå·±ç»™è¿‡å¹´å›æ¥çš„è‡ªå·±å®šä¸‹çš„å­¦ä¹ </p><h4 id="2018-å¦‚ä½•æŠŠè‡ªæˆ‘å­¦ä¹ å’Œå·¥ä½œæ—¶é—´åˆ†é…å¼„å¥½ï¼Ÿ-ç²—ç•¥"><a href="#2018-å¦‚ä½•æŠŠè‡ªæˆ‘å­¦ä¹ å’Œå·¥ä½œæ—¶é—´åˆ†é…å¼„å¥½ï¼Ÿ-ç²—ç•¥" class="headerlink" title="2018 å¦‚ä½•æŠŠè‡ªæˆ‘å­¦ä¹ å’Œå·¥ä½œæ—¶é—´åˆ†é…å¼„å¥½ï¼Ÿ (ç²—ç•¥)"></a>2018 å¦‚ä½•æŠŠè‡ªæˆ‘å­¦ä¹ å’Œå·¥ä½œæ—¶é—´åˆ†é…å¼„å¥½ï¼Ÿ (ç²—ç•¥)</h4><ul><li>å‘¨ä¸€-å‘¨äº”ï¼š ä¸Šç­ â€” 6ç‚¹åŠä¸‹ç­ï¼Œåˆ©ç”¨å¥½ä¸Šç­çš„æ—¶é—´å¤„ç†å¥½ï¼Œåƒå®Œé¥­å›å»</li><li>æ²¡ä»»åŠ¡çš„æ—¶å€™å¦‚ä½•å¤„ç†ï¼Ÿ 1ã€ä¸»åŠ¨è¯·æ±‚åŠ ä»»åŠ¡  2ã€åƒè¿™ä¸ªæ—¶å€™ï¼Ÿ åœ¨å…¬å¸çœ‹ä¹¦åˆä¸å¥½â€¦.å†™ä¸œ                          è¥¿ï¼Ÿå†™æ’ä»¶ï¼Ÿ<br>å¢åŠ è¡¨ç°æœºä¼šï¼Œä¸ä¼šçš„å…ˆæ¥ï¼Œæ¥å®Œä¸ä¼šçš„å†é—®<br>,ä¸ä¼šçš„è‡ªå·±è¦å…ˆæ€è€ƒå†é—®ï¼Œä¸è¦ä¸€ä¸æ‡‚å°±é—®</li><li><p>å‘¨å…­å‘¨æ—¥ï¼š å…¨çœ‹ä¹¦å’Œå¤„ç†æ¯•ä¸šè®¾è®¡ï¼Œ æ™šä¸Šæœ‰æ—¶é—´å†å›å­¦æ ¡</p></li><li><p>ç”Ÿæ´»ï¼š ä¹°ä¸ªæ˜¾ç¤ºå™¨ã€ä¹°ä¸ªæ¤…å­ã€å®¶é‡Œæ‰“æ‰«å¹²å‡€ã€è‡ªå·±åšé¥­</p></li></ul><h4 id="ä¹¦-è¦çœ‹å®Œ"><a href="#ä¹¦-è¦çœ‹å®Œ" class="headerlink" title="ä¹¦ [è¦çœ‹å®Œ]"></a>ä¹¦ [è¦çœ‹å®Œ]</h4><ul><li>ES6 [es6è¿˜æ˜¯å¾ˆè–„å¼±]</li><li>æ·±å…¥æµ…å‡ºWebpack</li><li>Webé«˜æ•ˆç¼–ç¨‹ä¸ä¼˜åŒ–å®è·µ</li><li>ä½“ç³»è®¾è®¡ä¸å®è·µ</li><li>Vue</li><li>Webå‰ç«¯é«˜æ•ˆå¼€å‘</li><li>å¾®ä¿¡å°ç¨‹åº</li></ul><h3 id="3ã€åšå¥½æ¯•è®¾ã€é¡ºåˆ©æ¯•ä¸š"><a href="#3ã€åšå¥½æ¯•è®¾ã€é¡ºåˆ©æ¯•ä¸š" class="headerlink" title="3ã€åšå¥½æ¯•è®¾ã€é¡ºåˆ©æ¯•ä¸š"></a>3ã€åšå¥½æ¯•è®¾ã€é¡ºåˆ©æ¯•ä¸š</h3><h3 id="4ã€å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½ç”Ÿæ´»"><a href="#4ã€å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½ç”Ÿæ´»" class="headerlink" title="4ã€å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½ç”Ÿæ´»"></a>4ã€å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç¡è§‰ï¼Œå¥½å¥½ç”Ÿæ´»</h3><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p><strong>æ³¨: åšå®¢æ˜¯æ”¾å‡å‰å†™çš„ï¼Œé‚£æ—¶å€™æœ¬æ¥æ‰“ç®—è¿™å­¦æœŸè¯·å‡çš„</strong></p><p>è¯·å‡äº†ï¼Œæƒ³æƒ³è¿˜æ˜¯æŒºçº ç»“çš„ï¼Œæƒ³äº†å¥½ä¹…ï¼Œä¹Ÿæ˜¯è¿™æ®µçš„å®ä¹ è®©æˆ‘çœ‹åˆ°äº†è‡ªå·±èº«ä¸Šå„ä¸ªæ–¹é¢çš„ä¸è¶³ï¼Œä¹Ÿå€Ÿè¯·å‡æœŸé—´å¥½å¥½å†å……ç”µå……ç”µï¼Œè°ƒæ•´è°ƒæ•´å¿ƒæ€ã€‚2018æƒ³æƒ³åº”è¯¥ä¼šæ˜¯ä¸€ä¸ªå……å®çš„ä¸€å¹´ï¼Œæƒ³åšçš„äº‹æƒ…å¾ˆå¤šï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤ŸæŠŠå®ƒè¿‡çš„å……å®ï¼Œå–„å¾…äºå®ƒã€‚</p><p>ç¾å›¾ï¼Œ6æœˆä»½å†è§ï¼å¸Œæœ›æ¥æ—¶æ˜¯ä¸€ä¸ªä¸ä¸€æ ·çš„è‡ªå·±ã€‚</p><p><strong>æ›´æ­£å¦‚ä¸‹:</strong></p><p>æ™“ä¸œè¯´æ˜å¤©æœ‰ä¸ªæ€»ç»“ä¼šï¼Œä¸çŸ¥é“æ‹¿è¿™ç¯‡åšå®¢å»ä¼šæ€ä¹ˆæ ·ï¼Œå†™åšå®¢éƒ½æ˜¯å†™å¿ƒå£°ï¼Œå†…å¿ƒå¯¹è‡ªå·±è¿‡å»å¦å®šä»¥åŠå¯¹æ¥ä¸‹æ¥å……æ»¡æœŸå¾…çš„æ€»ç»“æˆ‘æƒ³æœ€èƒ½è¯´æ˜ç°åœ¨çš„æˆ‘ã€‚åº”è¯¥å¯ä»¥å§ï¼Œå°±è¿™æ ·å§~~</p><p>é‚£ä¸ªåœ¨æ–°å¹´å‰æ— æ•°å¹»æƒ³ç€æ–°çš„ä¸€å¹´æˆ‘è¯¥å¦‚ä½•å¦‚ä½•åŠªåŠ›çš„å°‘å¹´å¸Œæœ›ä½ åœ¨æ–°çš„ä¸€å¹´å‹‡å¾€ç›´å‰ï¼Œä¸è¾œè´Ÿé‚£ä¸ªå¹»æƒ³çš„å°‘å¹´ã€‚</p><blockquote><p>ä¹Ÿè®¸è¿‡å»çš„ä¸€å¹´ï¼Œä½ æ›¾è¢«é£æµªæ‹æ‰“çš„é¢“åºŸå¤±æ„ï¼Œä½†æ–°çš„ä¸€å¹´ï¼Œæ„¿ä½ ä¹˜é£ç ´æµªã€‚  â€”â€”ã€Šä¹˜é£ç ´æµªã€‹</p></blockquote><p>æ›´æ–°äº 2018-03-01 00: 17<br>äºè‡ªå·±çš„å°çª</p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¾å›¾ </tag>
            
            <tag> H5é¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç¾å›¾H5é¡¹ç›®æ€»ç»“--lancome</title>
      <link href="/meitu-item-lancome-hk.html"/>
      <content type="html"><![CDATA[<p>å¯¹lancomeçš„å°é¡¹ç›®åšä¸ªå°ç»“</p><a id="more"></a><p>è¿™æ˜¯é¡¹ç›®çš„æ—¶é—´èŠ±ç‚¹æœ‰ç‚¹é•¿ã€‚æˆ–å¤šæˆ–å°‘è¿˜æ˜¯æœ‰å­¦åˆ°ä¸€ç‚¹ä¸œè¥¿ã€‚</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="1-å†™åˆ°æœ‰é‡å¤çš„ä»£ç é€»è¾‘å°±è¦æƒ³ç€å¦‚ä½•å»ä¼˜åŒ–ä»£ç "><a href="#1-å†™åˆ°æœ‰é‡å¤çš„ä»£ç é€»è¾‘å°±è¦æƒ³ç€å¦‚ä½•å»ä¼˜åŒ–ä»£ç " class="headerlink" title="1. å†™åˆ°æœ‰é‡å¤çš„ä»£ç é€»è¾‘å°±è¦æƒ³ç€å¦‚ä½•å»ä¼˜åŒ–ä»£ç "></a>1. å†™åˆ°æœ‰é‡å¤çš„ä»£ç é€»è¾‘å°±è¦æƒ³ç€å¦‚ä½•å»ä¼˜åŒ–ä»£ç </h3><h3 id="2-ä¸ºäº†é€‚é…å„ç§ç«¯ï¼Œå¯ä»¥é‡‡ç”¨ä¸Šä¸‹å›ºå®šï¼Œä¸­éƒ¨å±…ä¸­å¸ƒå±€"><a href="#2-ä¸ºäº†é€‚é…å„ç§ç«¯ï¼Œå¯ä»¥é‡‡ç”¨ä¸Šä¸‹å›ºå®šï¼Œä¸­éƒ¨å±…ä¸­å¸ƒå±€" class="headerlink" title="2. ä¸ºäº†é€‚é…å„ç§ç«¯ï¼Œå¯ä»¥é‡‡ç”¨ä¸Šä¸‹å›ºå®šï¼Œä¸­éƒ¨å±…ä¸­å¸ƒå±€"></a>2. ä¸ºäº†é€‚é…å„ç§ç«¯ï¼Œå¯ä»¥é‡‡ç”¨ä¸Šä¸‹å›ºå®šï¼Œä¸­éƒ¨å±…ä¸­å¸ƒå±€</h3><h3 id="3-åœ¨iosçš„safariä¸­ï¼Œæœ‰äº›ç³»ç»Ÿä¸æ”¯æŒflexboxï¼Œä»¥ä¸‹é¢æ–¹å¼å…¼å®¹"><a href="#3-åœ¨iosçš„safariä¸­ï¼Œæœ‰äº›ç³»ç»Ÿä¸æ”¯æŒflexboxï¼Œä»¥ä¸‹é¢æ–¹å¼å…¼å®¹" class="headerlink" title="3. åœ¨iosçš„safariä¸­ï¼Œæœ‰äº›ç³»ç»Ÿä¸æ”¯æŒflexboxï¼Œä»¥ä¸‹é¢æ–¹å¼å…¼å®¹"></a>3. åœ¨iosçš„safariä¸­ï¼Œæœ‰äº›ç³»ç»Ÿä¸æ”¯æŒflexboxï¼Œä»¥ä¸‹é¢æ–¹å¼å…¼å®¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶å®¹å™¨</span><br><span class="line">display: flex;</span><br><span class="line">justify-content: center;</span><br><span class="line">align-items: center;</span><br><span class="line"></span><br><span class="line">å­ ï¼ˆæ°´å¹³å‚ç›´å±…ä¸­ï¼‰</span><br><span class="line">position: absolute;</span><br><span class="line">left: 0;</span><br><span class="line">top: 0;</span><br><span class="line">right: 0;</span><br><span class="line">bottom: 0;</span><br><span class="line">margin: auto;</span><br></pre></td></tr></table></figure><h3 id="4-mappä¸­uploadå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼"><a href="#4-mappä¸­uploadå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼" class="headerlink" title="4. mappä¸­uploadå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼"></a>4. mappä¸­uploadå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$(&apos;.js-upload-home&apos;).on(&apos;change&apos;, function () &#123;</span><br><span class="line">            app.loading.show();</span><br><span class="line">            app.emit(&apos;uploadSuccess&apos;, this.files[0]);</span><br><span class="line">            //ä¸Šä¼ åŒä¸€å¼ çš„æƒ…å†µ</span><br><span class="line">            $(this).val(&apos;&apos;);</span><br><span class="line">            gtag(&apos;event&apos;, &apos;completeUpload&apos;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        app.on(&apos;uploadSuccess&apos;, function(file) &#123;</span><br><span class="line">            app.upload(file).then(data =&gt; &#123;</span><br><span class="line">                self.onSuccess(data);</span><br><span class="line">            &#125;).catch(app.catchErr.upload);</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure><h3 id="5-å¯¹äºå½¢å¦‚ä¸€è‡´çš„æ¨¡å—ï¼Œæœ€å¥½å•ç‹¬å†™ä¸ªæ¨¡å—"><a href="#5-å¯¹äºå½¢å¦‚ä¸€è‡´çš„æ¨¡å—ï¼Œæœ€å¥½å•ç‹¬å†™ä¸ªæ¨¡å—" class="headerlink" title="5. å¯¹äºå½¢å¦‚ä¸€è‡´çš„æ¨¡å—ï¼Œæœ€å¥½å•ç‹¬å†™ä¸ªæ¨¡å—"></a>5. å¯¹äºå½¢å¦‚ä¸€è‡´çš„æ¨¡å—ï¼Œæœ€å¥½å•ç‹¬å†™ä¸ªæ¨¡å—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">let</span> firstModal = <span class="literal">true</span>;</span><br><span class="line">        this.modal = (options) =&gt;&#123;</span><br><span class="line">            options = $.extend(<span class="literal">true</span>,&#123;</span><br><span class="line">                <span class="built_in">type</span>: ``,</span><br><span class="line">                delay: 100,</span><br><span class="line">                head: ``,</span><br><span class="line">                body: ``,</span><br><span class="line">                txtCancel: `å– æ¶ˆ`,</span><br><span class="line">                txtConfirm: `ç¡® è®¤`,</span><br><span class="line">                onCancle: () =&gt;&#123;</span><br><span class="line">                    $(<span class="string">'.js-modal'</span>).removeClass(<span class="string">'show'</span>);</span><br><span class="line">                &#125;,</span><br><span class="line">                onConfirm: ()=&gt;&#123;</span><br><span class="line"></span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,options);</span><br><span class="line">            setTimeout( ()=&gt;&#123;</span><br><span class="line">                $(<span class="string">'.js-modal'</span>).addClass(<span class="string">'show'</span>);</span><br><span class="line">                $(<span class="string">'.js-modal .js-image-share'</span>) &amp;&amp; $(<span class="string">'.js-modal .js-image-share'</span>).attr(<span class="string">'src'</span>, this.image.share || <span class="string">''</span>);</span><br><span class="line">            &#125;,options.delay);</span><br><span class="line">            <span class="keyword">if</span> (options.type === <span class="string">'fb'</span>)&#123;</span><br><span class="line">                $(<span class="string">'.js-modal .js-head'</span>).addClass(<span class="string">'fb'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            $(<span class="string">'.js-modal .js-head'</span>).text(options.head);</span><br><span class="line">            $(<span class="string">'.js-modal .js-body'</span>).html(options.body);</span><br><span class="line">            $(<span class="string">'.js-modal .js-cancel'</span>).text(options.txtCancel);</span><br><span class="line">            $(<span class="string">'.js-modal .js-confirm'</span>).text(options.txtConfirm);</span><br><span class="line">            <span class="keyword">if</span> (firstModal)&#123;</span><br><span class="line">                $(<span class="string">'.js-modal'</span>).off().on(<span class="string">'tap'</span>, (event) =&gt; &#123;</span><br><span class="line">                    <span class="built_in">let</span> target = event.target.dataset.target;</span><br><span class="line">                    switch (target) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">'cancel'</span>:</span><br><span class="line">                            options.onCancle();</span><br><span class="line">                            <span class="built_in">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">'confirm'</span>:</span><br><span class="line">                            options.onConfirm();</span><br><span class="line">                            <span class="built_in">break</span>;</span><br><span class="line">                        default:</span><br><span class="line">                            <span class="built_in">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure><h3 id="6-å¯ä»¥è‡ªå·±å•ç‹¬æ‰©å±•æ¨¡å—"><a href="#6-å¯ä»¥è‡ªå·±å•ç‹¬æ‰©å±•æ¨¡å—" class="headerlink" title="6. å¯ä»¥è‡ªå·±å•ç‹¬æ‰©å±•æ¨¡å—"></a>6. å¯ä»¥è‡ªå·±å•ç‹¬æ‰©å±•æ¨¡å—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">    name: <span class="string">'_share_'</span>,</span><br><span class="line">    main: Share,</span><br><span class="line">    <span class="function"><span class="title">init</span></span>() &#123;</span><br><span class="line">        this.<span class="variable">$share</span> = new this._share_(this.options.shareData, this);</span><br><span class="line">        this.<span class="variable">$webShare</span> = new WebShare();</span><br><span class="line">        this.setShare = data =&gt; &#123;</span><br><span class="line">            this.<span class="variable">$share</span>.setShare(data);</span><br><span class="line">            this.<span class="variable">$webShare</span>.setShare(data);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">WebShare</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WebShare.prototype.setShare = <span class="keyword">function</span> (data) &#123;</span><br><span class="line"></span><br><span class="line">    this.data = $.extend(<span class="literal">true</span>, &#123;</span><br><span class="line">        title: <span class="string">''</span>,</span><br><span class="line">        imageUrl: <span class="string">''</span>,</span><br><span class="line">        description: <span class="string">''</span>,</span><br><span class="line">        link: <span class="string">''</span>,</span><br><span class="line">        copydata: <span class="string">''</span>,</span><br><span class="line">    &#125;, data);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="6-facebookå¸¦å›¾ç‰‡åˆ†äº«é—®é¢˜"><a href="#6-facebookå¸¦å›¾ç‰‡åˆ†äº«é—®é¢˜" class="headerlink" title="6. facebookå¸¦å›¾ç‰‡åˆ†äº«é—®é¢˜"></a>6. facebookå¸¦å›¾ç‰‡åˆ†äº«é—®é¢˜</h3><p>ä½¿ç”¨åç«¯è¿”å›é“¾æ¥<a href="http://makeup.sea.channet.com/expre/lancome/handle2" target="_blank" rel="noopener">http://makeup.sea.channet.com/expre/lancome/handle2</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//http://makeup.sea.channet.com/expre/lancome/handle2</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"zh-cn"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;LancÃ´meé‚€æ‚¨å³æ™‚è£½ä½œå”‡è‰²ç¾ç…§&lt;/title&gt;</span><br><span class="line">    &lt;meta content=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0"</span> name=<span class="string">"viewport"</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge,chrome=1"</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"format-detection"</span> content=<span class="string">"telephone=no"</span>&gt;</span><br><span class="line">    &lt;meta property=<span class="string">"fb:app_id"</span> content=<span class="string">"344854949231285"</span>&gt;</span><br><span class="line">    &lt;meta property=<span class="string">"og:image"</span> content=<span class="string">""</span>&gt;</span><br><span class="line">    &lt;meta property=<span class="string">"og:title"</span> content=<span class="string">"ä¸€æŒ‰æ“æœ‰ æ‚¨çš„ç‘°éº—å”‡è‰²ç¾ç…§"</span>&gt;</span><br><span class="line">    &lt;meta property=<span class="string">"og:type"</span> content=<span class="string">"website"</span>&gt;</span><br><span class="line">    &lt;meta property=<span class="string">"og:url"</span> content=<span class="string">"http://makeup.sea.channet.com/expre/lancome/handle2?imageurl="</span>&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line"> &lt;script&gt;</span><br><span class="line">        (<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">            location.href = <span class="string">"http://makeup.sea.channet.com/lancome/hk"</span>;</span><br><span class="line">        &#125;)();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">WebShare.prototype.facebook = <span class="keyword">function</span> (callback) &#123;</span><br><span class="line">    // FB.ui(&#123;</span><br><span class="line">    //     method: <span class="string">'share'</span>,</span><br><span class="line">    //     mobile_iframe: <span class="literal">true</span>,</span><br><span class="line">    //     href:  getHomePage(),</span><br><span class="line">    //     name: this.data.title,</span><br><span class="line">    //     display: <span class="string">'popup'</span>,</span><br><span class="line">    //     description: ``,</span><br><span class="line">    //     picture: this.data.pic,</span><br><span class="line">    //     frictionlessRequests: <span class="string">'false'</span>,</span><br><span class="line">    //     hashtag: this.data.hashtag,</span><br><span class="line">    // &#125;, <span class="keyword">function</span> (response) &#123;</span><br><span class="line">    //     console.log(response);</span><br><span class="line">    // &#125;);</span><br><span class="line">    const data = &#123;</span><br><span class="line">        appID: <span class="string">'201122177111171'</span>,</span><br><span class="line">        href: getURL(this.data.pic),</span><br><span class="line">        hashtag: this.data.hashtag,</span><br><span class="line">    &#125;;</span><br><span class="line">    window.open([</span><br><span class="line">        <span class="string">'https://www.facebook.com/v2.10/dialog/share?'</span>,</span><br><span class="line">        <span class="string">'href='</span> + encodeURIComponent(data.href),</span><br><span class="line">        <span class="string">'&amp;app_id='</span> + data.appID,</span><br><span class="line">        <span class="string">'&amp;hashtag='</span> + encodeURIComponent(data.hashtag),</span><br><span class="line">    ].join(<span class="string">''</span>), <span class="string">'newwindow'</span>, <span class="string">'toolbar=no, menubar=no, scrollbars=yes, resizable=no, location=no, status=no'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> getURL(imageURL) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="string">'http://makeup.sea.channet.com/expre/lancome/handle2?imageurl='</span> + encodeURIComponent(imageURL);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    callback &amp;&amp; callback(this.data);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="7-weiboåˆ†äº«é—®é¢˜"><a href="#7-weiboåˆ†äº«é—®é¢˜" class="headerlink" title="7. weiboåˆ†äº«é—®é¢˜"></a>7. weiboåˆ†äº«é—®é¢˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">WebShare.prototype.weibo = <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    const shareData = &#123;</span><br><span class="line">        title: this.data.title,</span><br><span class="line">        pic: this.data.pic,</span><br><span class="line">        url: this.data.url,</span><br><span class="line">        // appkey: <span class="string">'1895078391'</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    // encode url</span><br><span class="line">    shareData.title = encodeURIComponent(shareData.title);</span><br><span class="line">    shareData.url = encodeURIComponent(shareData.url);</span><br><span class="line">    // shareData.pic = encodeURIComponent(shareData.pic);</span><br><span class="line"></span><br><span class="line">    // location.href = `http://v.t.sina.com.cn/share/share.php?<span class="variable">$&#123;querify(shareData)&#125;</span>`;</span><br><span class="line">    window.open(`http://v.t.sina.com.cn/share/share.php?<span class="variable">$&#123;querify(shareData)&#125;</span>`);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="8-å¤åˆ¶é¢æ¿"><a href="#8-å¤åˆ¶é¢æ¿" class="headerlink" title="8. å¤åˆ¶é¢æ¿"></a>8. å¤åˆ¶é¢æ¿</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import CB from <span class="string">'clipboard'</span>;</span><br><span class="line"></span><br><span class="line">WebShare.prototype.copy = <span class="keyword">function</span> (data) &#123;</span><br><span class="line">    new CB(<span class="string">'body'</span>,&#123;</span><br><span class="line">        text: () =&gt; &#123;</span><br><span class="line">            <span class="built_in">return</span> data;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="9-äº‹ä»¶ç»‘å®šæœ€å¥½ç»‘å®šä¸€æ¬¡ï¼Œå†™åœ¨Onceä¸­"><a href="#9-äº‹ä»¶ç»‘å®šæœ€å¥½ç»‘å®šä¸€æ¬¡ï¼Œå†™åœ¨Onceä¸­" class="headerlink" title="9. äº‹ä»¶ç»‘å®šæœ€å¥½ç»‘å®šä¸€æ¬¡ï¼Œå†™åœ¨Onceä¸­"></a>9. äº‹ä»¶ç»‘å®šæœ€å¥½ç»‘å®šä¸€æ¬¡ï¼Œå†™åœ¨Onceä¸­</h3><h3 id="10-åœ¨iosçš„safariä¸­ï¼Œtransitionå’ŒanimationåŒæ—¶ä½¿ç”¨å¯èƒ½ä¼šå‡ºé—®é¢˜"><a href="#10-åœ¨iosçš„safariä¸­ï¼Œtransitionå’ŒanimationåŒæ—¶ä½¿ç”¨å¯èƒ½ä¼šå‡ºé—®é¢˜" class="headerlink" title="10. åœ¨iosçš„safariä¸­ï¼Œtransitionå’ŒanimationåŒæ—¶ä½¿ç”¨å¯èƒ½ä¼šå‡ºé—®é¢˜"></a>10. åœ¨iosçš„safariä¸­ï¼Œtransitionå’ŒanimationåŒæ—¶ä½¿ç”¨å¯èƒ½ä¼šå‡ºé—®é¢˜</h3><h3 id="11-å”¤èµ·appçš„æƒ…å†µï¼Œiosç”¨window-location-hrefçš„æ–¹å¼å”¤èµ·æ¯”è¾ƒåˆé€‚ï¼ŒAndroidç”¨iframeå”¤èµ·æ¯”è¾ƒåˆé€‚ã€‚"><a href="#11-å”¤èµ·appçš„æƒ…å†µï¼Œiosç”¨window-location-hrefçš„æ–¹å¼å”¤èµ·æ¯”è¾ƒåˆé€‚ï¼ŒAndroidç”¨iframeå”¤èµ·æ¯”è¾ƒåˆé€‚ã€‚" class="headerlink" title="11. å”¤èµ·appçš„æƒ…å†µï¼Œiosç”¨window.location.hrefçš„æ–¹å¼å”¤èµ·æ¯”è¾ƒåˆé€‚ï¼ŒAndroidç”¨iframeå”¤èµ·æ¯”è¾ƒåˆé€‚ã€‚"></a>11. å”¤èµ·appçš„æƒ…å†µï¼Œiosç”¨window.location.hrefçš„æ–¹å¼å”¤èµ·æ¯”è¾ƒåˆé€‚ï¼ŒAndroidç”¨iframeå”¤èµ·æ¯”è¾ƒåˆé€‚ã€‚</h3><h3 id="12-ä½¿ç”¨â€™mcanvasâ€™æ”¾å¤§ç¼©å°é—®é¢˜"><a href="#12-ä½¿ç”¨â€™mcanvasâ€™æ”¾å¤§ç¼©å°é—®é¢˜" class="headerlink" title="12. ä½¿ç”¨â€™mcanvasâ€™æ”¾å¤§ç¼©å°é—®é¢˜;"></a>12. ä½¿ç”¨â€™mcanvasâ€™æ”¾å¤§ç¼©å°é—®é¢˜;</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ç«–</span><br><span class="line">mc.add(image, &#123;</span><br><span class="line">                width: <span class="string">'100%'</span>,</span><br><span class="line">                pos: &#123;</span><br><span class="line">                    // x: (-disX + (app.canvasLeft * rateH)),</span><br><span class="line">                    x: (app.canvasLeft * rateW),</span><br><span class="line">                    y: (app.canvasTop * rateW),</span><br><span class="line">                    scale: app.canvasScale,</span><br><span class="line">                    rotate: 0,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;)</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">æ¨ª</span><br><span class="line">mc.add(image, &#123;</span><br><span class="line">                width: image.width * (750 / image.height),</span><br><span class="line">                pos: &#123;</span><br><span class="line">                    x: (app.canvasLeft * rateH),</span><br><span class="line">                    y: (app.canvasTop * rateH),</span><br><span class="line">                    // x: 0,</span><br><span class="line">                    // y: 0,</span><br><span class="line">                    scale: app.canvasScale,</span><br><span class="line">                    rotate: 0,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure><h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>åœ¨å†™æ”¾å¤§ç¼©å°åŠŸèƒ½çš„æ—¶å€™ï¼Œé—®çš„é—®é¢˜äº‹åæƒ³æƒ³æœ‰ç‚¹å‚»é€¼ï¼Œå•Šå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œä¸ªäººæ„Ÿè§‰è‡ªå·±æœ‰æ—¶å€™ä¾èµ–æ€§æœ‰ç‚¹å¼ºï¼Œä¸€é‡åˆ°é—®é¢˜å°±æƒ³é—®ï¼Œè¦æ”¹è¦æ”¹ï¼ï¼ï¼è‡ªå·±æƒ³å…ˆåŠæ³•è§£å†³ï¼Œè§£å†³ä¸äº†åœ¨é—®ï¼ï¼ï¼ï¼ï¼å°±é…±ç´«å§ã€‚</p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¾å›¾ </tag>
            
            <tag> H5é¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç¾å›¾H5é¡¹ç›®æ€»ç»“--bplus_halloween</title>
      <link href="/meitu-item-two.html"/>
      <content type="html"><![CDATA[<p>æ˜¨å¤©å¯¹é¡¹ç›®m8s_strutåšäº†ä¸ªå°ç»“(è¯¦è§=&gt;<a href="https://blog.huangmingzhao.cn/meitu-item-one.html" target="_blank" rel="noopener">m8s_strut</a>)ï¼Œä»Šå¤©å°±ç»§ç»­å¯¹é¡¹ç›®äºŒbplus_halloweenåšä¸ªæ€»ç»“å§ï¼Œå˜¿å˜¿â€¦æŠ€æœ¯å¾ˆæ¸£ï¼Œçœ‹å®˜å‹¿å–·ã€‚ã€‚</p><a id="more"></a><p>è¿™ä¸ªé¡¹ç›®æ˜¯æµ·å¤–ç‰ˆçš„ï¼Œæ¥åˆ°é¡¹ç›®ä»–ä»¬è¯´B+ï¼ŒB+ï¼Œå¬ä¸æ‡‚B+æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå“ˆå“ˆï¼Œåæ¥æ‰çŸ¥é“åŸæ¥B+æ˜¯ç¾å›¾æµ·å¤–ç‰ˆçš„ä¸€ä¸ªAppâ€“BeautyPlusã€‚è¿™ä¸ªé¡¹ç›®æ˜¯å¤šè¯­è¨€ç‰ˆæœ¬ï¼Œçªç„¶å°±ä¸çŸ¥é“å¤šè¯­è¨€æ€ä¹ˆå¤„ç†ï¼Œé—®äº†ä¼Ÿç¨‹å¸ˆå‚…è¯´ç›´æ¥åœ¨urlåé¢åŠ å‚æ•°ï¼Œåœ¨ä»£ç ä¸­ç›´æ¥è·å–ï¼Œå“ˆå“ˆï¼ŒåŸæ¥æ˜¯è¿™æ ·å¤„ç†å¤šè¯­è¨€å“ˆ~~</p><h2 id="å¼€å‘ä¸­"><a href="#å¼€å‘ä¸­" class="headerlink" title="å¼€å‘ä¸­"></a>å¼€å‘ä¸­</h2><h3 id="1-å„ä¸ªå­—ä½“å¤§å°ä¸ä¸€è‡´é—®é¢˜"><a href="#1-å„ä¸ªå­—ä½“å¤§å°ä¸ä¸€è‡´é—®é¢˜" class="headerlink" title="1. å„ä¸ªå­—ä½“å¤§å°ä¸ä¸€è‡´é—®é¢˜"></a>1. å„ä¸ªå­—ä½“å¤§å°ä¸ä¸€è‡´é—®é¢˜</h3><p>å„ä¸ªå­—ä½“å¤§å°ä¸ä¸€è‡´å¿˜è®°è€ƒè™‘äº†ï¼Œè€Œæ˜¯ç›´æ¥ç»Ÿä¸€è®¾ç½®å­—ä½“å¤§å°ï¼Œå¯¼è‡´å„æ–‡æ¡ˆæ˜¾ç¤ºæœ‰ç‚¹å¥‡æ€ªã€‚è¿™ä¸ªé—®é¢˜åº”è¯¥å¼€å‘çš„æ—¶å€™å°±åº”è¯¥æ³¨æ„åˆ°ï¼Œä»¥è‡³äºåœ¨æµ‹è¯•çš„æ—¶å€™èŠ±äº†ä¸å°‘æ—¶é—´å»è°ƒä¸€äº›å­—ä½“ç»†èŠ‚é—®é¢˜ã€‚è°¨ä»¥æ­¤ä¸ºè®°ï¼Œå¸Œæœ›ä¸‹æ¬¡èƒ½å¤Ÿæœ‰æ‰€ä¼˜åŒ–ã€‚</p><p><strong>è§£å†³ï¼š</strong> ä¸åŒçš„æ–‡æ¡ˆå­—ä½“åº”è¯¥è¦ä¸åŒå¤„ç†</p><h3 id="2-æ–‡æ¡ˆé—´æ­‡æ€§æ»šåŠ¨"><a href="#2-æ–‡æ¡ˆé—´æ­‡æ€§æ»šåŠ¨" class="headerlink" title="2. æ–‡æ¡ˆé—´æ­‡æ€§æ»šåŠ¨"></a>2. æ–‡æ¡ˆé—´æ­‡æ€§æ»šåŠ¨</h3><p>æ–‡æ¡ˆçš„é—´æ­‡æ€§æ»šåŠ¨ä¹‹å‰æƒ³ç”¨CSS3æ¥å¤„ç†ï¼Œåæ¥å‘ç°å¤„ç†ä¸äº†é—´æ­‡æ€§ï¼Œå°±æ”¹ç”¨äº†jsæ¥å¤„ç†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var timer=setInterval(<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">        <span class="keyword">if</span> (scrollVal &lt; <span class="variable">$wrapDis</span>)&#123;</span><br><span class="line">            scrollUp()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            clearInterval(timer)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,50);</span><br><span class="line">    </span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">scrollUp</span></span>()&#123;</span><br><span class="line">     <span class="keyword">if</span>(scrollVal % <span class="variable">$pHeight</span> === 0)&#123;</span><br><span class="line">         clearInterval(timer)</span><br><span class="line">        setTimeout(startScroll,2000);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        scrollVal++</span><br><span class="line">        // scrollEle.style.transform=`translateY(-<span class="variable">$&#123;scrollVal&#125;</span>px)`</span><br><span class="line">        scrollEle.style.marginTop=`-<span class="variable">$&#123;scrollVal&#125;</span>px`</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setTimeout(startScroll,4000)</span><br></pre></td></tr></table></figure><p>åœ¨è‹¹æœ5ä¸­ä¹‹å‰ç”¨çš„transformæ¥å¤„ç†æ»šåŠ¨å¤„ç†ä¸äº†ï¼Œæ”¹ä¸ºmarginTopå°±å¯ä»¥ï¼Œæ‰€ä»¥å°±ç´¢æ€§ç”¨marginTopæ¥ï¼Œè™½ç„¶å®ƒä¼šä¸€ç›´çš„å›æµå’Œé‡ç»˜æ€§èƒ½ä¸å¥½ï¼ŒCSS3åŠ¨ç”»å¯ä»¥å¼€å¯ç¡¬ä»¶åŠ é€Ÿã€‚</p><h3 id="3-éœ€æ±‚å˜åŠ¨ï¼Œæ–‡æ¡ˆæ»šåŠ¨å®Œï¼Œå¯ä»¥å…ˆä¸ŠæŸ¥çœ‹"><a href="#3-éœ€æ±‚å˜åŠ¨ï¼Œæ–‡æ¡ˆæ»šåŠ¨å®Œï¼Œå¯ä»¥å…ˆä¸ŠæŸ¥çœ‹" class="headerlink" title="3. éœ€æ±‚å˜åŠ¨ï¼Œæ–‡æ¡ˆæ»šåŠ¨å®Œï¼Œå¯ä»¥å…ˆä¸ŠæŸ¥çœ‹"></a>3. éœ€æ±‚å˜åŠ¨ï¼Œæ–‡æ¡ˆæ»šåŠ¨å®Œï¼Œå¯ä»¥å…ˆä¸ŠæŸ¥çœ‹</h3><p><strong>è§£å†³ï¼š</strong> </p><p>åœ¨å†…å®¹çš„çˆ¶å…ƒç´ ä¸Šè®¾ç½®<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">max-height: 50px; /*no*/</span><br><span class="line">overflow-y:scroll;</span><br></pre></td></tr></table></figure></p><p>åœ¨å†…å®¹å…ƒç´ ä¸Šä¸è®¾ç½®é«˜åº¦ï¼Œè‡ªåŠ¨æ’‘å¼€</p><p>ä¸ºäº†ä½¿å†…å®¹å¯ä»¥æ»šåŠ¨ï¼Œåœ¨æ»šåŠ¨ç»“æŸçš„æ—¶å€™ç¬é—´ç»™å†…å®¹å…ƒç´ ç§»é™¤æ‰styleå±æ€§ï¼Œç»™çˆ¶å…ƒç´ åŠ ä¸ŠscrollTopï¼ŒscrollTopä¸ºä»–æ»šåŠ¨çš„å¤šå°‘å³marginTopçš„å€¼ï¼Œè¿™æ ·ä¾¿å¯æ»šåŠ¨ï¼Œæœ€ç»ˆä»£ç å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">var timer=setInterval(<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">        <span class="keyword">if</span> (scrollVal &lt; <span class="variable">$wrapDis</span>)&#123;</span><br><span class="line">            scrollUp()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">                </span><br><span class="line">            //ç»“æŸæ—¶å†…å®¹å…ƒç´ ç§»é™¤æ‰styleå±æ€§</span><br><span class="line">            $(<span class="string">'.js-home-word-wrap'</span>).removeAttr(<span class="string">'style'</span>)</span><br><span class="line">            //çˆ¶å…ƒç´ åŠ ä¸ŠscrollTop</span><br><span class="line">            $(<span class="string">'.js-home-word'</span>)[0].scrollTop = <span class="variable">$wrapDis</span></span><br><span class="line">            clearInterval(timer)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,50);</span><br><span class="line">    </span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">scrollUp</span></span>()&#123;</span><br><span class="line">     <span class="keyword">if</span>(scrollVal % <span class="variable">$pHeight</span> === 0)&#123;</span><br><span class="line">         clearInterval(timer)</span><br><span class="line">        setTimeout(startScroll,2000);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        scrollVal++</span><br><span class="line">        // scrollEle.style.transform=`translateY(-<span class="variable">$&#123;scrollVal&#125;</span>px)`</span><br><span class="line">        scrollEle.style.marginTop=`-<span class="variable">$&#123;scrollVal&#125;</span>px`</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setTimeout(startScroll,4000)</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ä¸­çš„é—®é¢˜"><a href="#æµ‹è¯•ä¸­çš„é—®é¢˜" class="headerlink" title="æµ‹è¯•ä¸­çš„é—®é¢˜"></a>æµ‹è¯•ä¸­çš„é—®é¢˜</h2><h3 id="1-iosä¸­å®¢æˆ·ç«¯facebookæœºåˆ¶ä¼šåŠèµ·facebookå®¢æˆ·ç«¯ä¸»é¡µï¼Œåˆ†äº«å®Œæ¯•åå±å¹•å˜ç©ºç™½"><a href="#1-iosä¸­å®¢æˆ·ç«¯facebookæœºåˆ¶ä¼šåŠèµ·facebookå®¢æˆ·ç«¯ä¸»é¡µï¼Œåˆ†äº«å®Œæ¯•åå±å¹•å˜ç©ºç™½" class="headerlink" title="1. iosä¸­å®¢æˆ·ç«¯facebookæœºåˆ¶ä¼šåŠèµ·facebookå®¢æˆ·ç«¯ä¸»é¡µï¼Œåˆ†äº«å®Œæ¯•åå±å¹•å˜ç©ºç™½"></a>1. iosä¸­å®¢æˆ·ç«¯facebookæœºåˆ¶ä¼šåŠèµ·facebookå®¢æˆ·ç«¯ä¸»é¡µï¼Œåˆ†äº«å®Œæ¯•åå±å¹•å˜ç©ºç™½</h3><p>facebookåˆ†äº«<a href="https://developers.facebook.com/docs/sharing/reference/share-dialog" target="_blank" rel="noopener">facebookåˆ†äº«é“¾æ¥</a></p><p><strong>è§£å†³ï¼š</strong></p><p>åœ¨æœ«å°¾æ·»åŠ åˆå§‹åŒ–è„šæœ¬<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    //åˆå§‹åŒ–FBï¼Œappidè¦å»ç”³è¯·</span><br><span class="line">    window.fbAsyncInit = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        FB.init(&#123;</span><br><span class="line">//            appId            : <span class="string">'2052125608344073'</span>,</span><br><span class="line">            appId: <span class="string">'928616713878249'</span>,</span><br><span class="line">            autoLogAppEvents : <span class="literal">true</span>,</span><br><span class="line">            xfbml            : <span class="literal">true</span>,</span><br><span class="line">            version          : <span class="string">'v2.10'</span></span><br><span class="line">        &#125;);</span><br><span class="line">        FB.AppEvents.logPageView();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //è½½å…¥facebookç½‘é¡µJavaScriptç‰ˆåˆ†äº«æœºåˆ¶sdk</span><br><span class="line">    (<span class="keyword">function</span>(d, s, id)&#123;</span><br><span class="line">        var js, fjs = d.getElementsByTagName(s)[0];</span><br><span class="line">        <span class="keyword">if</span> (d.getElementById(id)) &#123;<span class="built_in">return</span>;&#125;</span><br><span class="line">        js = d.createElement(s); js.id = id;</span><br><span class="line">        js.src = <span class="string">"//connect.facebook.net/en_US/sdk.js"</span>;</span><br><span class="line">        fjs.parentNode.insertBefore(js, fjs);</span><br><span class="line">    &#125;(document, <span class="string">'script'</span>, <span class="string">'facebook-jssdk'</span>));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>éœ€è¦çš„åœ°æ–¹è°ƒç”¨FB.UI<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">FB.ui(&#123;</span><br><span class="line">    //é»˜è®¤è°ƒç”¨çš„æ˜¯ç½‘é¡µpageå½¢å¼ï¼Œä½¿ä»–å½¢å¼ä¸ºdialogå½¢å¼</span><br><span class="line">    method: <span class="string">'share'</span>,</span><br><span class="line">    mobile_iframe: <span class="literal">true</span>,</span><br><span class="line">    href:  `<span class="variable">$&#123;u&#125;</span>`,</span><br><span class="line">    name: textVal.titleText[lang],</span><br><span class="line">    display: <span class="string">'popup'</span>,</span><br><span class="line">    description: textVal.titleText[lang],</span><br><span class="line">    picture: <span class="string">''</span>,</span><br><span class="line">    frictionlessRequests: <span class="string">'false'</span></span><br><span class="line">    &#125;, <span class="keyword">function</span> (response) &#123;</span><br><span class="line">        <span class="built_in">let</span> reloadURL=u = getHomePage() + <span class="string">'?lang='</span> +lang + <span class="string">'#num='</span> + pageNum + <span class="string">'&amp;page=result'</span></span><br><span class="line">        location.href=`<span class="variable">$&#123;reloadURL&#125;</span>`</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p><p>ä»Šæ™šé—®äº†åŒäº‹è¯´iosä¸­facebookåˆ†äº«åæ˜¯ç™½å±çš„é—®é¢˜ï¼Œå®šä½åˆ°äº†é—®é¢˜æ‰€åœ¨ï¼Œä½†è¿˜æ˜¯ä¸èƒ½è§£å†³ï¼Œè®°å¾—ä¹‹å‰ä»–è·Ÿå¸ˆå‚…è°ˆè®ºçš„æ—¶å€™å¥½åƒå¯ä»¥è§£å†³ï¼Œæ”¹å¤©é—®é—®çœ‹ã€‚(ä¹‹åå†åšè¡¥å……â€¦)</p><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>è¿™ä¸ªé¡¹ç›®ç›¸å¯¹æ²¡ä»€ä¹ˆé€»è¾‘ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯èŠ±äº†æŒºé•¿æ—¶é—´ï¼Œå•Šå•Šå•Šå•Šï¼Œæ„Ÿè§‰å¾ˆä¸åº”è¯¥å•¦~ã€‚è¿™ä¸ªé¡¹ç›®æ„Ÿè§‰å¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨æ–‡æ¡ˆçš„ä¿®æ”¹ä¸Šé¢ï¼ŒæŒºå‘çš„è¯´å®è¯ï¼Œæ–‡æ¡ˆæ²¡æœ‰ä¸€æ¬¡æ€§ç»™å¥½ï¼Œé™†ç»­ç»™å°±ç®—äº†è¿˜å„ç§å˜åŠ¨ï¼Œå˜¿å˜¿ï¼Œç®—æ˜¯å°åæ§½å§ï¼Œä¸è¿‡è¿™ä¸ªé¡¹ç›®è®©æˆ‘è·Ÿè®¾è®¡è·Ÿäº§å“æœ‰äº†äº¤æµçš„æœºä¼šï¼Œä¹Ÿæ…¢æ…¢çš„æ˜ç™½å¼€å‘ä¸­åº”è¯¥è¦æ³¨æ„äº›ï¼Œåƒæ²Ÿé€šå‘€ï¼Œä¸è¦ä¸€å¼€å§‹æ‹¿åˆ°psdå°±å¼€å§‹åˆ‡ï¼Œåˆšå¼€å§‹å°±è¦å¤šæ²Ÿé€šï¼Œä¸ç„¶ä¼šåšå¾ˆå¤šæ— ç”¨åŠŸã€‚ä»£ç å†™çš„è¿˜ä¸æ˜¯å¾ˆè§„èŒƒï¼Œå¸Œæœ›æ¥ä¸‹æ¥å¯ä»¥æœ‰æ‰€æ”¹è¿›å•¦ã€‚æ˜å¤©è¦å»å‚åŠ æ–°å‘˜å·¥è®­ç»ƒè¥ï¼Œä¸çŸ¥é“æ€ä¹ˆæ ·ï¼Œä»Šå¤©å°±è¿™æ ·å§~å˜¿ï¼Œç¡è§‰å’¯Â·Â·Â·Â·Â·Â·Â·   ã€€ã€€ã€€ã€€ã€€ã€€      ã€€ã€€ã€€ã€€ã€€ã€€                           ã€€ã€€ã€€ã€€ã€€ã€€                        </p><p>ã€€äº å¦é—¨å‰åŸ” è‡ªå·±çš„å°å±‹   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€</p><p>æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ã€€&gt;&gt; <a href="http://www.huangmingzhao.cn/">é»„æ˜ç…§â€“ä¸€ä¸ªåœ¨è·¯ä¸Šæ…¢æ…¢è¡Œèµ°çš„å‰ç«¯äºº</a></p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¾å›¾ </tag>
            
            <tag> H5é¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç¾å›¾H5é¡¹ç›®æ€»ç»“--m8s_strut</title>
      <link href="/meitu-item-one.html"/>
      <content type="html"><![CDATA[<p>æ¥ç¾å›¾å®ä¹ ä¹Ÿä¸€ä¸ªæœˆäº†~ä»æ ¡æ‹›ä¹‹åå¯èƒ½æœ‰ç‚¹æ”¾æ¾è¿‡å¤´ï¼Œå¯¼è‡´ä¸æœ€è¿‘æ„Ÿè§‰æŠŠå­¦ä¹ ç»™æ”¾ä¸€è¾¹äº†ï¼Œå‰å‡ å¤©å¯¹æ ¡æ‹›åšäº†ä¸ªæ€»ç»“(è¯¦è§=&gt;<a href="https://blog.huangmingzhao.cn/autumn-recruit-Interview.html" target="_blank" rel="noopener">ç§‹æ‹›é¢è¯•æ€»ç»“</a>)ï¼Œæ‰€ä»¥æœ€è¿‘è¦å¥½å¥½çš„æ”¶æ‹¾ä¸‹å¿ƒæ€ï¼Œç»§ç»­å‹¤å‹¤æ³æ³åœ¨å‰ç«¯è·¯æ¢ç´¢ï¼Œæ¥ä¸‹æ¥ä¼šå¯¹æ¯ä¸ªé¡¹ç›®åšä¸€ä¸ªæ€»ç»“ï¼Œå˜¿å˜¿â€¦æŠ€æœ¯å¾ˆæ¸£ï¼Œçœ‹å®˜å‹¿å–·ã€‚ã€‚</p><a id="more"></a><p>åœ¨ç¾å›¾çš„ç¬¬ä¸€ä¸ªå°é¡¹ç›®(<a href="http://h5.meitu.com/m8s_strut/" target="_blank" rel="noopener">è¯·ç§»åŠ¨ç«¯æ¨¡å¼è§‚çœ‹å“¦~</a>),ä¸€ä¸Šçº¿è¿˜æ˜¯å‡ºç°äº†æŒºå¤šbugã€‚å˜¿å˜¿ã€‚ã€‚è™½ç„¶æœ‰ç‚¹é‚£ä¸ªä»€ä¹ˆï¼Œå¤§å®¶å‡‘åˆç€ç©å“ˆï¼Œå†™é¡¹ç›®æ€»ç»“æ˜¯æƒ³æŠŠå·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•æ•´ç†ä¸€ä¸‹ï¼Œè®°å½•è®°å½•ã€‚</p><h2 id="å¼€å‘ä¸­çš„é—®é¢˜"><a href="#å¼€å‘ä¸­çš„é—®é¢˜" class="headerlink" title="å¼€å‘ä¸­çš„é—®é¢˜"></a>å¼€å‘ä¸­çš„é—®é¢˜</h2><p>H5æ¡†æ¶ç”¨çš„æ˜¯å…¬å¸è‡ªå·±çš„mappæ¡†æ¶ï¼Œåˆšè¿›å…¬å¸çš„æ—¶å€™å°±çœ‹mappçš„æ–‡æ¡£ï¼Œæœ‰ç‚¹vueçš„å‘³é“~~</p><h3 id="1-canvas"><a href="#1-canvas" class="headerlink" title="1. canvas"></a>1. canvas</h3><p>ä¹‹å‰å¹¶æ²¡æœ‰å¤šå¤§çš„æ¥è§¦åˆ°canvasï¼Œä¼Ÿç¨‹å¸ˆå‚…ç»™æˆ‘åšçš„æ—¶å€™ï¼Œæˆ‘è¯´ä¸å¤ªä¼šï¼Œå¥½å°´å°¬~,å› ä¸ºé¡¹ç›®ä¸­çš„ä¸€ä¸ªéœ€æ±‚å°±æ˜¯è¦åœ¨ä¸€å¼ å›¾ç‰‡ä¸­åˆæˆå­—ä½“ï¼Œæ‰€ä»¥ç”¨åˆ°canvasï¼Œæ„Ÿè§‰å…¬å¸h5é¡¹ç›®éƒ½ä¼šç”¨åˆ°canvasã€‚ä¸Šä¼ å›¾ç‰‡åˆ°æœåŠ¡å™¨ä¹‹ç±»ç›´æ¥è°ƒç”¨å…¬å¸çš„Uploadç»„ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">var canvas = document.getElementById(<span class="string">'js-canvas'</span>)</span><br><span class="line"></span><br><span class="line">//getContext() æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºåœ¨ç”»å¸ƒä¸Šç»˜å›¾çš„ç¯å¢ƒä¸Šä¸‹æ–‡ã€‚</span><br><span class="line">var ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºä¸€ä¸ªimageå¯¹è±¡</span><br><span class="line">var poster = new Image();</span><br><span class="line"></span><br><span class="line">//è®¾ç½®è·¨åŸŸ</span><br><span class="line">//å¹¶ä¸æ˜¯è¯´ canvas ä½¿ç”¨çš„ image ä¸èƒ½è·¨åŸŸï¼Œè€Œæ˜¯è¯´ canvas ä½¿ç”¨äº†æ²¡æœ‰æƒé™çš„è·¨åŸŸå›¾ç‰‡,åœ¨ä½¿ç”¨ canvas.toDataURL()ç­‰æ•°æ®å¯¼å‡ºå‡½æ•°çš„æ—¶å€™ä¼šæŠ¥é”™ï¼</span><br><span class="line">poster.crossOrigin = <span class="string">"anonymous"</span>;</span><br><span class="line"></span><br><span class="line">//é¢„åŠ è½½å›¾ç‰‡</span><br><span class="line">poster.onload = () =&gt; &#123;   </span><br><span class="line">   //drawImage() æ–¹æ³•åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶å›¾åƒ context.drawImage(img,x,y,width,height);  xyä¸ºå›¾ç‰‡åœ¨ç”»å¸ƒçš„ä½ç½®ï¼Œwhæ˜¯å›¾ç‰‡çš„å®½é«˜</span><br><span class="line">   ctx.drawImage(poster,0,0,750,1000);    </span><br><span class="line">   ctx.font = <span class="string">"normal 24px webfont"</span>;    </span><br><span class="line">   ctx.fillStyle = <span class="string">"#3d2a2a"</span>;  </span><br><span class="line">   </span><br><span class="line">   //fillText() æ–¹æ³•åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶å¡«è‰²çš„æ–‡æœ¬ã€‚ context.fillText(text,x,y,maxWidth);</span><br><span class="line">   ctx.fillText(array[0], 300, 556)    </span><br><span class="line">   ctx.fillText(array[1], 300,586)    </span><br><span class="line">   </span><br><span class="line">   //toDataURL() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å›¾ç‰‡å±•ç¤ºçš„ data URI  è¿”å›base64  ç¬¬äºŒä¸ªå‚æ•°æ˜¯0-1çš„å›¾ç‰‡è´¨é‡</span><br><span class="line">   var base64 = canvas.toDataURL(<span class="string">"image/jpeg"</span>,0.8); </span><br><span class="line">   </span><br><span class="line">   //ä½¿ç”¨å…¬å¸çš„uploadç»„ä»¶ï¼Œä¸Šä¼ åˆ°ä¸ƒç‰›äº‘</span><br><span class="line">   var upload = new Up(&#123;width : 600,&#125;);    </span><br><span class="line">   //ä¼ å…¥base64å›¾ç‰‡</span><br><span class="line">   upload.up(base64, &#123;</span><br><span class="line">       //æˆåŠŸæ—¶çš„å›è°ƒ</span><br><span class="line">       success(data) &#123; </span><br><span class="line">           //data.imgæ˜¯è¿”å›çº¿ä¸Šçš„å›¾ç‰‡é“¾æ¥</span><br><span class="line">           app.preload(data.img).<span class="keyword">done</span>(() =&gt; &#123;                </span><br><span class="line">           console.log(data.img);            </span><br><span class="line">               </span><br><span class="line">           &#125;)        </span><br><span class="line">           </span><br><span class="line">       &#125;,       </span><br><span class="line">       error(data) &#123;            </span><br><span class="line">       console.log(<span class="string">'åˆæˆä¸Šä¼ å¤±è´¥ï¼'</span>);        </span><br><span class="line">           </span><br><span class="line">       &#125;,    </span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">poster.src = <span class="string">'dist/images/poster.jpg'</span>;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ä¸­çš„é—®é¢˜"><a href="#æµ‹è¯•ä¸­çš„é—®é¢˜" class="headerlink" title="æµ‹è¯•ä¸­çš„é—®é¢˜"></a>æµ‹è¯•ä¸­çš„é—®é¢˜</h2><h3 id="1-åœ¨T8ä¸­ï¼Œä¸€é”®ç”Ÿæˆè·³ä¸è¿‡å»ï¼Œåˆ«çš„æ‰‹æœºåˆæ˜¯æ­£å¸¸çš„"><a href="#1-åœ¨T8ä¸­ï¼Œä¸€é”®ç”Ÿæˆè·³ä¸è¿‡å»ï¼Œåˆ«çš„æ‰‹æœºåˆæ˜¯æ­£å¸¸çš„" class="headerlink" title="1. åœ¨T8ä¸­ï¼Œä¸€é”®ç”Ÿæˆè·³ä¸è¿‡å»ï¼Œåˆ«çš„æ‰‹æœºåˆæ˜¯æ­£å¸¸çš„"></a>1. åœ¨T8ä¸­ï¼Œä¸€é”®ç”Ÿæˆè·³ä¸è¿‡å»ï¼Œåˆ«çš„æ‰‹æœºåˆæ˜¯æ­£å¸¸çš„</h3><p>è¿™é‡Œæ´ªå¿å¤§å“¥å®‰åˆ©äº†ä¸€ä¸ªåœ¨ç§»åŠ¨ç«¯è°ƒè¯•å°å·¥å…· <a href="http://h5.meitu.com/js/console.min.js" target="_blank" rel="noopener">http://h5.meitu.com/js/console.min.js</a></p><p><strong>è§£å†³ï¼š</strong>  ä¸€æ­¥æ­¥æ’æŸ¥ï¼ŒåŸæ¥æ˜¯ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var base64 = canvas.toDataURL(<span class="string">"image/jpg"</span>,0.8);  //è¿™è¾¹å‡ºé”™äº†ï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹å†™é”™äº†å¹¶æ²¡æœ‰jpgç±»å‹ï¼Œåº”è¯¥ä¸ºjpegï¼Œæ‰€ä»¥æ­£ç¡®ä»£ç å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">var base64 = canvas.toDataURL(<span class="string">"image/jpeg"</span>,0.8);</span><br></pre></td></tr></table></figure><h3 id="2-ç”¨æˆ·ä¿å­˜å›¾ç‰‡æ—¶æŠŠèƒŒæ™¯ä¿å­˜ä¸‹æ¥"><a href="#2-ç”¨æˆ·ä¿å­˜å›¾ç‰‡æ—¶æŠŠèƒŒæ™¯ä¿å­˜ä¸‹æ¥" class="headerlink" title="2. ç”¨æˆ·ä¿å­˜å›¾ç‰‡æ—¶æŠŠèƒŒæ™¯ä¿å­˜ä¸‹æ¥"></a>2. ç”¨æˆ·ä¿å­˜å›¾ç‰‡æ—¶æŠŠèƒŒæ™¯ä¿å­˜ä¸‹æ¥</h3><p><strong>è§£å†³ï¼š</strong>  ç”±äºç¬¬ä¸€ä¸ªé¡¹ç›®çš„å›¾ç‰‡è¾ƒå°‘ï¼Œè‡ªå·±ä¹‹å‰ä¹Ÿæ²¡æ³¨æ„åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨ç§»åŠ¨ç«¯ä¸­é•¿æŒ‰ä¼šä¿å­˜imgæ ‡ç­¾çš„å›¾ç‰‡ï¼Œè€Œæˆ‘ä¸ºäº†çœäº‹æ­£å¥½æŠŠæœ‰ç”¨åˆ°çš„å›¾ç‰‡å…¨ç»™ç”¨äº†imgæ ‡ç­¾ï¼Œæµ‹è¯•å°½ç„¶æ²¡æµ‹å‡ºæ¥ï¼Œä¸Šçº¿ç”¨æˆ·ä¸€ä½“éªŒå°±å‡ºç°bugï¼Œå•Šå•Šå•Šå•Š~ </p><p>æ‰€ä»¥æ­£ç¡®çš„åšæ³•æ˜¯ï¼Œå¸Œæœ›è®©ç”¨æˆ·ä¿å­˜çš„å›¾ç‰‡ç”¨imgæ ‡ç­¾ä¾‹å¦‚ç»“æœé¡µï¼Œè€Œåƒæ¯é¡µçš„èƒŒæ™¯å›¾ç‰‡ä»€ä¹ˆçš„æœ€å¥½è¯´åœ¨cssä¸­è®¾ç½®background-image</p><h3 id="3-ä½¿ç”¨backgroud-size-coverçš„é—®é¢˜"><a href="#3-ä½¿ç”¨backgroud-size-coverçš„é—®é¢˜" class="headerlink" title="3. ä½¿ç”¨backgroud-size:coverçš„é—®é¢˜"></a>3. ä½¿ç”¨backgroud-size:coverçš„é—®é¢˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">background-sizeï¼š100% auto;    ---æŒ‰å®¹å™¨æ¯”ä¾‹æ’‘æ»¡ï¼Œå›¾ç‰‡å˜å½¢ï¼›å› ä¸ºæ˜¯ç§»åŠ¨ç«¯æ‰€ä»¥heightä¸ºautoè‡ªåŠ¨è°ƒæ•´å°±å¥½ï¼Œåªå¡«ç¬¬ä¸€ä¸ªå‚æ•°ç¬¬äºŒå‚æ•°é»˜è®¤ä¸ºauto</span><br><span class="line"></span><br><span class="line">background-sizeï¼šcover;   ---æŠŠèƒŒæ™¯å›¾åƒæ‰©å±•è‡³è¶³å¤Ÿå¤§ï¼Œä»¥ä½¿èƒŒæ™¯å›¾åƒå®Œå…¨è¦†ç›–èƒŒæ™¯åŒºåŸŸã€‚èƒŒæ™¯å›¾åƒçš„æŸäº›éƒ¨åˆ†ä¹Ÿè®¸æ— æ³•æ˜¾ç¤ºåœ¨èƒŒæ™¯å®šä½åŒºåŸŸä¸­ã€‚</span><br><span class="line"></span><br><span class="line">background-sizeï¼šcontain;    ---æŠŠå›¾åƒå›¾åƒæ‰©å±•è‡³æœ€å¤§å°ºå¯¸ï¼Œä»¥ä½¿å…¶å®½åº¦å’Œé«˜åº¦å®Œå…¨é€‚åº”å†…å®¹åŒºåŸŸã€‚</span><br></pre></td></tr></table></figure><h3 id="4-åœ¨iosç³»ç»Ÿä¸­ï¼Œè¾“å…¥æ¡†è¾“å…¥å®Œæˆåï¼Œè·³è½¬é¡µé¢ä¹‹åï¼Œè¾“å…¥é¢æ¿è¿˜åœ¨"><a href="#4-åœ¨iosç³»ç»Ÿä¸­ï¼Œè¾“å…¥æ¡†è¾“å…¥å®Œæˆåï¼Œè·³è½¬é¡µé¢ä¹‹åï¼Œè¾“å…¥é¢æ¿è¿˜åœ¨" class="headerlink" title="4. åœ¨iosç³»ç»Ÿä¸­ï¼Œè¾“å…¥æ¡†è¾“å…¥å®Œæˆåï¼Œè·³è½¬é¡µé¢ä¹‹åï¼Œè¾“å…¥é¢æ¿è¿˜åœ¨"></a>4. åœ¨iosç³»ç»Ÿä¸­ï¼Œè¾“å…¥æ¡†è¾“å…¥å®Œæˆåï¼Œè·³è½¬é¡µé¢ä¹‹åï¼Œè¾“å…¥é¢æ¿è¿˜åœ¨</h3><p><strong>è§£å†³ï¼š</strong>  $(â€˜.js-textâ€™).blur() æ‰‹åŠ¨å»ç„¦ç‚¹</p><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>   ç¬¬ä¸€æ¬¡å‚åŠ å…¬å¸çš„å¼€å‘ï¼Œæ„Ÿè§‰åšç‚¹æœ‰ç‚¹ä¸è¶³ï¼Œç¨‹åºä¸Šæ˜¯ä¸€æ–¹é¢ï¼Œæ„Ÿè§‰æ²Ÿé€šä¹Ÿå­˜åœ¨ä¸è¶³ï¼Œä¸ä¼šå…ˆåšå¥½æ²Ÿé€šå†å†™ä»£ç ï¼Œè€Œæ˜¯ä¸€æ‹¿åˆ°psdå°±å¼€å§‹åˆ‡ï¼Œå†™ä»£ç ï¼Œä»¥è‡³äºæœ‰æ—¶å€™ä¼šåšä¸€äº›æ— ç”¨åŠŸï¼Œè¿™æ˜¯æˆ‘ç«™åœ¨é¢å‰å®Œæˆä¸¤ä¸ªé¡¹ç›®çš„æƒ…å†µä¸‹æ€è€ƒè¿™ä¸ªé—®é¢˜(ç¬¬ä¸€ä¸ªé¡¹ç›®æ¯”è¾ƒç®€å•å¯èƒ½æ²¡ä»€ä¹ˆå‘ç°ï¼Œç¬¬äºŒä¸ªé¡¹ç›®å°±éå¸¸æ˜æ˜¾)ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦å…ˆå¥½å¥½æ²Ÿé€šå®Œä¹‹åï¼Œå†ä¸‹æ‰‹ã€‚æ‰å‘ç°ä¸€ä¸ªé¡¹ç›®ä¸‹æ¥æ²Ÿé€šçœŸçš„è‡³å…³é‡è¦ï¼Œè·Ÿè¿è¥è·Ÿæµ‹è¯•ç­‰ç­‰ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯åšå¼€å‘æœ‰è¶£çš„ä¸€é¢ã€‚å…¬å¸äººæ‰å¥½å¤šå“¦~ï¼Œåœ¨é‡Œé¢è‡ªå·±çœŸçš„æ˜¯æ¸£æ¸£ï¼ŒåŠªåŠ›å§ï¼Œå˜¿å˜¿â€¦ç›¸ä¿¡å‹¤èƒ½è¡¥æ‹™ã€‚æœ‰ç©ºæƒ³çœ‹çœ‹å…¬å¸ä¸€äº›ç»„ä»¶çš„æºç ï¼Œæ„Ÿè§‰æˆ‘è¿™ä¸ªå±‚æ¬¡çš„ä¼šçœ‹ä¸æ‡‚ï¼Œæ‰å¿ƒÂ·Â·Â·Â·Â·Â·Â·å†è¯´è¯´å…¬å¸çš„æ°›å›´å§ï¼ŒåŒäº‹éƒ½æŒºå¥½ç©çš„ï¼Œäº’ç›¸è°ƒä¾ƒï¼Œå“ˆå“ˆï¼Œå–œæ¬¢è¿™æ ·çš„æ°›å›´ï¼Œä¸€ä¸ªæœˆä¸‹æ¥è¿˜æ˜¯æ„Ÿè§‰è¿˜æ²¡æœ‰é€‚åº”ä¼¼çš„ï¼Œè·Ÿå¤§å®¶ä¹Ÿè¿˜ä¸å¤ªç†Ÿæ‚‰ï¼Œå¸Œæœ›åœ¨æ¥ä¸‹æ¥çš„æ—¥å­å¯ä»¥ç”¨å¿ƒå¯¹å¾…ï¼Œå¯¹äººå¯¹äº‹ï¼åŠ æ²¹ï¼Œå®ä¹ ç”Ÿï¼ï¼ï¼(é¡ºä¾¿è¯´ä¸‹æˆ‘å–œæ¬¢çš„å†¬å¤©å¿«åˆ°äº†ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆâ€¦â€¦â€¦â€¦â€¦.)   ã€€ã€€ã€€ã€€ã€€ã€€      ã€€ã€€ã€€ã€€ã€€ã€€                           ã€€ã€€ã€€ã€€ã€€ã€€                        </p><blockquote><p>ä¸çŸ¥é“è¯´ä»€ä¹ˆ  åŠ æ²¹  Ù©(à¹‘â›á´—â›à¹‘)Û¶</p></blockquote><p>ã€€äº å¦é—¨å‰åŸ” è‡ªå·±çš„å°å±‹   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€</p><p>æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ã€€&gt;&gt; <a href="http://www.huangmingzhao.cn/">é»„æ˜ç…§â€“ä¸€ä¸ªåœ¨è·¯ä¸Šæ…¢æ…¢è¡Œèµ°çš„å‰ç«¯äºº</a></p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¾å›¾ </tag>
            
            <tag> H5é¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç§‹æ‹›é¢è¯•æ€»ç»“</title>
      <link href="/autumn-recruit-Interview.html"/>
      <content type="html"><![CDATA[<p>æ„Ÿè§‰ç§‹æ‹›ä¹Ÿç»“æŸäº†ï¼Œåœ¨ç¾å›¾ä¹Ÿä¸€ä¸ªæœˆäº†ã€‚ä»æ‹¿åˆ°ç¾å›¾offerçš„æ—¶å€™å°±æƒ³è¯´å¯¹ç§‹æ‹›åšä¸ªæ€»ç»“ï¼Œè‹¦äºè‡ªå·±å¤ªæ‡’äº†ã€‚å¯èƒ½ä¹Ÿæ˜¯å› ä¸ºå‡†å¤‡ç§‹æ‹›çš„é‚£æ®µæ—¶é—´å¯¹æˆ‘æ¥è¯´æœ‰ç‚¹ç…ç†¬ï¼Œå¯¼è‡´äºåˆ°ç›®å‰ä¸ºæ­¢è‡ªå·±è¿˜åœ¨ä¸€ä¸ªæ”¾æ¾çš„çŠ¶æ€ï¼Œæ”¾æ¾çš„æœ‰ç‚¹è¿‡å¤´äº†ï¼Œæ²¡æœ‰é›†ä¸­æ³¨æ„åŠ›åœ¨æŠ€æœ¯æ–¹é¢ã€‚ä»Šå¤©ä¼Ÿç¨‹å¸ˆå‚…è¯´é¡¹ç›®åšå®Œè¦å¥½å¥½æ€»ç»“ï¼Œæ‰å‘ç°è‡ªå·±ä¹Ÿè¦è¯¥å¥½å¥½é†’é†’äº†ã€‚å¥½äº†ï¼Œè¨€å½’æ­£é¢˜ï¼Œå¯¹ç§‹æ‹›ä¹Ÿå¥½å¥½åšä¸ªæ€»ç»“ã€‚</p><a id="more"></a><p>ç§‹æ‹›ï¼Œåœ¨åˆ«äººçœ¼ä¸­å¯¹äºæˆ‘æ¥è¯´å¯èƒ½æ˜¯ç§å¹¸è¿ï¼Œä½†å¹¸è¿å½“ä¸­ä¸å…æœ‰å¤ªå¤šä¸ºæ­¤ä»˜å‡ºçš„è‰°è¾›ï¼ŒæœŸé—´çš„è‹¦å¯èƒ½ä¹Ÿå°±è‡ªå·±çŸ¥é“ã€‚ä¸ªäººç§‹æ‹›é¢è¯•å€’ä¸æ˜¯å¾ˆå¤šå®¶ï¼Œæ€»å…±é¢è¯•å››å®¶ã€‚</p><h2 id="ç½‘å®¿"><a href="#ç½‘å®¿" class="headerlink" title="ç½‘å®¿"></a>ç½‘å®¿</h2><p>ç½‘å®¿æ˜¯å†…æ¨åé€šçŸ¥é¢è¯•ï¼Œç½‘å®¿çš„é¢è¯•æ˜¯æˆ‘äººç”Ÿçš„ç¬¬ä¸€åœºé¢è¯•ï¼Œè‡ªå·±æ„Ÿè§‰å¯¹å‰ç«¯æ–¹é¢å‡†å¤‡çš„æŒºå……åˆ†è¿‡å»é¢è¯•ï¼Œç„¶åå‘¢ï¼Œç½‘å®¿çš„é¢è¯•æ—¶é•¿æ˜¯ååˆ†é’Ÿï¼ï¼ååˆ†é’Ÿï¼ï¼ï¼ï¼æˆ‘è¶…çº§ä¸èƒ½ç†è§£å“¦ï¼Œäººç”Ÿç¬¬ä¸€åœºé¢è¯•å°½ç„¶æ˜¯ååˆ†é’Ÿï¼Œé¢å®Œæ•´ä¸ªäººéƒ½æ‡µäº†ï¼Œä¸æ˜¯æŠ€æœ¯é¢ä¸éƒ½ä¸€ä¸¤ä¸ªå°æ—¶å—ï¼Ÿç”±äºæ—¶é—´éš”å¾—æ¯”è¾ƒä¹…ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çš„é¢è¯•é¢˜å¯èƒ½ä¼šè¯´ä¸ªå¤§æ¦‚~~</p><h3 id="é¢è¯•é¢˜ç›®"><a href="#é¢è¯•é¢˜ç›®" class="headerlink" title="é¢è¯•é¢˜ç›®"></a>é¢è¯•é¢˜ç›®</h3><p><strong>1. è‡ªæˆ‘ä»‹ç»</strong></p><p><strong>2. JavaScriptçš„åŒæ­¥å’Œå¼‚æ­¥</strong></p><p><strong>3. é—®åˆ°æ“ä½œç³»ç»Ÿçš„ä¿¡å·ä»€ä¹ˆçš„æ²¡å¬æ¸…æ¥š(äº‹åæƒ³æƒ³å¯èƒ½æ˜¯pvæ“ä½œå’Œä¿¡å·é‡)</strong></p><p><strong>4. ajaxå¦‚ä½•å®ç°åŒæ­¥</strong></p><p><strong>5. ç®—æ³•ï¼Œé™¤äº†é€‰æ‹©å†’æ³¡æ’å…¥è¯´å‡ºä¸€ä¸¤ä¸ªåˆ«çš„</strong></p><p><strong>6. é—­åŒ…</strong></p><p><strong>7. vueå’ŒAngularçš„åŒºåˆ«</strong></p><p><strong>8. mvcå’Œmvvm</strong></p><p><strong>9. æœ‰ä»€ä¹ˆè¦é—®çš„</strong></p><p><strong>10. ç­‰é€šçŸ¥</strong></p><p>ç½‘å®¿å°½ç„¶æ²¡æœ‰ç°åœºç¬”è¯•ï¼Œæ€»ä½“é¢è¯•ä¸‹æ¥å°±ååˆ†é’Ÿï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ï¼ŒæœŸé—´é—®åˆ°çš„æ“ä½œç³»ç»Ÿæ—©å°±è¿˜ç»™è€å¸ˆäº†ï¼Œå‡†å¤‡é¢è¯•çš„æ—¶å€™æˆ‘å°±ä¸“é—¨å‡†å¤‡å‰ç«¯æ–¹å‘ï¼Œå“­æ­»ï¼Œï¼Œè¿˜æœ‰å°±æ˜¯ä¸ªäººæ„Ÿè§‰å¿«é€Ÿæ’åºè®²çš„æŒºå¥½çš„ï¼Œä»–æ„Ÿè§‰è¿˜ä¸æ˜¯å¾ˆæ»¡æ„ï¼Œå¹¸å¥½åæ¥æˆ‘æœ‰è¡¥å……äº†å½’å¹¶æ’åºï¼Œä»–æ„Ÿè§‰è¿˜è¡Œã€‚å…¶ä»–æœ‰å…³äºjsçš„ä¸ªäººæ„Ÿè§‰å›ç­”çš„è¿˜è¡Œï¼Œä¹‹åå°±è¯´hrä»Šå¤©ä¸åœ¨ï¼Œå›å»ç­‰é€šçŸ¥ã€‚äº‹åé—®å†…æ¨çš„äººï¼Œè¯´é¢è¯•å®˜æœ‰å¯¹ä»–è¯´å¯¹æˆ‘å°è±¡è¿˜ä¸é”™ã€‚ç½‘å®¿å¯èƒ½å°±æ˜¯hréƒ½è·‘å»æ ¡æ‹›å®£è®²ä¼šç°åœºäº†ï¼Œä¸€å‘¨ä¹‹å†…ä¸€ç›´æ²¡æœ‰æ¶ˆæ¯~ç”±äºç¬¬ä¸€æ¬¡é¢è¯•å°±ååˆ†é’Ÿï¼Œå¯¹æˆ‘ä¸ªäººçš„æ‰“å‡»è¿˜æ˜¯è›®å¤§çš„ï¼Œå‹åŠ›é‚£æ—¶ç¡®å®æŒºå¤§ã€‚ã€‚(åæ¥è¿›ç¾å›¾äº†ï¼Œæœ‰è·Ÿå†…æ¨çš„äººè¯´è¿›ç¾å›¾äº†ï¼Œæ‰€ä»¥åˆ°ç›®å‰ä¹Ÿæ²¡æœ‰æ”¶åˆ°ç½‘å®¿çš„æ¶ˆæ¯)</p><h2 id="ç¾å›¾"><a href="#ç¾å›¾" class="headerlink" title="ç¾å›¾"></a>ç¾å›¾</h2><p>ç¾å›¾æ˜¯æˆ‘æ ¡æ‹›çš„é‡ç‚¹ï¼Œç”±äºè‡ªå·±æƒ³ç•™åœ¨ç¦å»ºï¼Œè‡ªå·±æ±‚å­¦åˆåœ¨å¦é—¨ï¼Œæ‰€ä»¥ç¾å›¾ç®—æ˜¯æ±‚èŒæœ€ä¸­æ„çš„ä¼ä¸šã€‚ç½‘å®¿ä¹‹åå…¶å®è‡ªå·±ä¹Ÿæœ‰å»é¢è¯•ä¸¤å®¶ç›¸å¯¹å°ç‚¹çš„ä¼ä¸šï¼Œåˆ·é¢ç­‹ï¼Œä¸ºç¾å›¾çš„é¢è¯•åšå‡†å¤‡ã€‚ç¾å›¾ä¹Ÿæ˜¯å†…æ¨çš„ï¼Œæ‰€ä»¥ä¸ªäººæ²¡æœ‰åœ¨çº¿ä¸Šç¬”è¯•è¿‡ï¼Œä½†æ˜¯ç¾å›¢è‡ªå·±æœ‰åœ¨çº¿ä¸Šç¬”è¯•è¿‡ï¼Œç¾å›¢å¦é—¨æ„Ÿè§‰é€Ÿåº¦å¾ˆæ…¢å•Šï¼Œä¸Šå‘¨æ‰é‚€è¯·é¢è¯•ï¼Œé‚£æ—¶å€™åœ¨ç¾å›¾å®ä¹ éƒ½å¿«ä¸€ä¸ªæœˆäº†ï¼Œæƒ³æƒ³è¿˜æ˜¯æœ‰ç‚¹å¯æƒœã€‚</p><h3 id="ç°åœºç¬”è¯•é¢˜"><a href="#ç°åœºç¬”è¯•é¢˜" class="headerlink" title="ç°åœºç¬”è¯•é¢˜"></a>ç°åœºç¬”è¯•é¢˜</h3><p><strong>1. ä¸å®šå®½é«˜æ°´å¹³å±…ä¸­</strong></p><p><strong>2. typeof ç»“åˆ == å†™å‡ºç»“æœ(å‡ å°é“)</strong></p><p><strong>3. å½©è‰²å›¾ç‰‡åˆ©ç”¨jsæˆ–csså®ç°é»‘ç™½</strong></p><p><strong>4. æ€æ ·é€‚é…ç§»åŠ¨ç«¯</strong></p><p><strong>5. å›¾ç‰‡é¢„åŠ è½½(ä»£ç è¡¥å……)</strong></p><p><strong>6. ä¸€é¢˜settimeoutå’Œfunctionç»“åˆï¼Œå†™å‡ºè¾“å‡ºä»€ä¹ˆ</strong></p><p><strong>7. å†™ä»£ç ï¼Œäº‹ä»¶å§”æ‰˜</strong></p><p><strong>8. å†™è‡ªå·±çš„æŠ€æœ¯æ ˆ</strong></p><h4 id="ä¸€é¢"><a href="#ä¸€é¢" class="headerlink" title="ä¸€é¢"></a>ä¸€é¢</h4><p>ç¬”è¯•åšå®Œç»™hråï¼Œå°±æ¥äº†ç°åœ¨å¤§å®¶äººç§°ç»†è€å¸ˆçš„é¢è¯•å®˜ï¼Œå“ˆå“ˆå“ˆâ€¦ä¸€é¢å…ˆæ˜¯ä¸€é“é“è§£æç¬”è¯•é¢˜ï¼ŒæœŸé—´å„ç§é—®æ³•ï¼Œå•Šå•Šå•Šï¼Œä½©æœç»†è€å¸ˆå‘€ï¼Œé—®å¾ˆå¤šå¹³å¸¸éƒ½ä¸å¤ªæ³¨æ„çš„åœ°æ–¹ï¼Œåˆæ˜¯åŸºç¡€çš„çŸ¥è¯†ç‚¹ï¼Œå“ï¼Œæ¸£æ¸£å°±æ˜¯è¿™æ ·å­ã€‚ä¸€é“é“è§£æå®Œé¢˜ç›®åå°±æ ¹æ®ç®€å†é—®é¡¹ç›®~~èŠäº†å¾ˆå¤šï¼Œä¸‹é¢å°±åˆ—ä¸€äº›å‡ºæ¥~è‡ªå·±å½“åœºå›ç­”ä¸ä¸Šæ¥çš„ä¸‹é¢æœ‰åˆ—å‡ºç­”æ¡ˆ</p><p><strong>1. marginå’Œpaddingç™¾åˆ†æ¯”çš„æ—¶å€™æ˜¯ç›¸å¯¹äºè°æ¥è®¡ç®—çš„</strong></p><p><strong>ç­”ï¼š</strong> marginå’Œpaddingç™¾åˆ†æ¯”çš„æ—¶å€™ç›¸å¯¹äºçˆ¶å…ƒç´ çš„å®½åº¦è®¡ç®—çš„</p><p>â‘ ã€ç›¸å¯¹äºçˆ¶å…ƒç´ å®½åº¦è®¡ç®—çš„æœ‰ï¼šwidthã€leftã€rightã€marginã€padding</p><p>â‘¡ã€ç›¸å¯¹äºçˆ¶å…ƒç´ é«˜åº¦è®¡ç®—çš„æœ‰ï¼šheightã€topã€bottom</p><p><strong>2. remå’Œemç›¸å¯¹äºè°è®¡ç®—çš„</strong></p><p><strong>3. æ¡ä»¶åˆ¤æ–­è½¬åŒ–é—®é¢˜</strong></p><p><strong>4. æ­£åˆ™å®ç°ç±»ä¼¼ejsçš„&lt;%= %&gt;</strong></p><p><strong>ç­”ï¼š</strong> str.replace(/&lt;%= \s<em>([^%&gt;]+)\s</em> %&gt;/g , str)</p><p><strong>5. å›¾ç‰‡é¢„åŠ è½½çš„æ—¶å€™onloadå’Œimg.srcè¿™ä¸¤ä¸ªä½ç½®æ€ä¹ˆæ”¾åˆé€‚</strong></p><p><strong>ç­”ï¼š</strong> åœ¨ä»¥å‰çš„æ—¶å€™å›¾ç‰‡é¢„åŠ è½½çš„æ—¶å€™onloadè¦æ”¾åœ¨img.srcå‰é¢ï¼Œç°åœ¨ä¸»æµæµè§ˆå™¨å¥½åƒæ²¡è¿™ä¸ªç¡¬æ€§ï¼Œä½†ä¸ºäº†æ›´å¥½çš„å†™æ³•ï¼Œæœ€å¥½è¿™æ ·åš</p><p><strong>6. åŒæºç­–ç•¥ä¸­ä¸€äº›æ³¨æ„ç‚¹</strong></p><p><strong>7. expressçš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ</strong></p><p><strong>ç­”ï¼š</strong> è·¯ç”±ã€ä¸­é—´ä»¶ã€æ¨¡æ¿å¼•æ“  ï¼ˆç°åœ¨æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯æ­£ç¡®ç­”æ¡ˆï¼‰</p><p><strong>8. webpackçš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆ</strong></p><p><strong>ç­”ï¼š</strong> å…¥å£ã€å‡ºå£ã€åŠ è½½å™¨ã€æ’ä»¶<br>ï¼ˆç°åœ¨æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯æ­£ç¡®ç­”æ¡ˆï¼‰</p><p><strong>9. Expresså’Œkoaçš„åŒºåˆ«åœ¨å“ªé‡Œï¼Œè®²å‡ºç‚¹</strong></p><p><strong>10. åŒæ­¥å¼‚æ­¥å•çº¿ç¨‹</strong></p><p><strong>11. å®ç°ç±»ä¼¼promiseçš„å¼‚æ­¥</strong></p><p><strong>12. æ ‡ç­¾è¯­ä¹‰åŒ–çš„ç†è§£</strong></p><p><strong>13. ä¸€ä¸ªç½‘é¡µä»urlè¾“å…¥åˆ°å±•ç°çš„è¿‡ç¨‹ï¼ˆç»å…¸é¢˜ï¼‰</strong></p><p><strong>14. çŠ¶æ€ç ï¼Œå„çŠ¶æ€ç å¯¹åº”çš„ä¿¡æ¯</strong></p><p><strong>15. æ€§èƒ½ä¼˜åŒ–</strong></p><p><strong>16. ajaxè¯·æ±‚çš„å‡ ä¸ªçŠ¶æ€</strong></p><p><strong>17. sessionStorageï¼ŒlocalStorageå’Œcookieçš„åŒºåˆ«</strong></p><p><strong>18. äº‹ä»¶æµçš„å‡ ä¸ªé˜¶æ®µ</strong></p><p><strong>19. æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œè‡ªå·±çŸ¥é“å¤šå°‘è®²å¤šå°‘</strong></p><p><strong>20. æ•°ç»„å»é‡</strong></p><p><strong>21. æ“ä½œæ•°ç»„çš„å¸¸è§æ–¹æ³•</strong></p><p><strong>22. ées6ä¸­ï¼Œå“ªç§æ•°æ®ç»“æ„åƒé›†åˆ</strong></p><p><strong>ç­”ï¼š</strong> å¯¹è±¡ï¼Œç†ç”±è‡ªå·±æƒ³</p><p>å·®ä¸å¯¹å°±è¿™äº›äº†ï¼Œåˆ°æ—¶å€™æœ‰æƒ³åˆ°å†åšè¡¥å……ã€‚ä¸€é¢æœ‰äº›å†™é—®é¢˜å¯¹æˆ‘æ¥è¯´ç¡®å®æœ‰ç‚¹éš¾ï¼ŒæŠ€æœ¯é¢é¢å®Œåhrè¿›æ¥è¯´é¢è¯•å®˜ç°åœ¨æœ‰ç‚¹çº ç»“ï¼Œå«æˆ‘å›å»ç­‰æ¶ˆæ¯ï¼Œæˆ‘ä»¥ä¸ºæˆ‘è·ªäº†ï¼Œååœ¨å›å»çš„å…¬äº¤ä¸Šï¼Œé‚£ä¸ªå¿ƒæƒ…æƒ†æ€…çš„å‘€â€¦ä¸è¿‡å¹¸å¥½åœ¨æ™šä¸Šå…­ç‚¹å¤šçš„æ—¶å€™hrå«æˆ‘å‘¨ä¸€å†å»äºŒé¢(å½“æ—¶å‘¨äº”)ï¼Œä¸å…åˆå¤šäº†ç‚¹å¸Œæœ›ï¼Œå¯èƒ½æ˜¯æˆ‘ç¬”è¯•åšçš„æ¯”è¾ƒå¥½ç‚¹å§ï¼Œåé¢é—®é¢˜å›ç­”çš„ç›¸å¯¹æ¯”è¾ƒå¥½ï¼Œæ‰€ä»¥ç»†è€å¸ˆåˆç»™æˆ‘æœºä¼šï¼Œæ”¹å¤©æ‰¾ç»†è€å¸ˆèŠèŠä¸ºä»€ä¹ˆè¿˜æ˜¯ç»™æˆ‘æœºä¼šäº†å‘¢~~</p><h3 id="äºŒé¢"><a href="#äºŒé¢" class="headerlink" title="äºŒé¢"></a>äºŒé¢</h3><p>ç¾å›¾äºŒé¢å·®ä¸å¤šé—®çš„æ¯”è¾ƒç®€å•ç‚¹ï¼Œæ›´å¤šçš„é—®é¡¹ç›®çš„é—®é¢˜å’Œå¦‚ä½•å»å­¦ä¹ å‰ç«¯çš„~</p><p><strong>1. è·¨åŸŸ</strong></p><p><strong>2. vueç”Ÿå‘½å‘¨æœŸ</strong></p><p><strong>3. vueæ•°æ®åŒå‘ç»‘å®šåŸç†</strong></p><p><strong>4. gulpæ’ä»¶</strong></p><p><strong>5. æ€§èƒ½ä¼˜åŒ–(æ²¡é”™åˆé—®ä¸€é)</strong></p><p><strong>â€¦â€¦</strong></p><h3 id="hré¢"><a href="#hré¢" class="headerlink" title="hré¢"></a>hré¢</h3><p>åˆ°äº†hré¢å¤§å®¶åº”è¯¥ä¹Ÿæ˜ç™½äº†äº›ä»€ä¹ˆâ€¦ï¼Œå“ˆå“ˆ~~~ä½†æ˜¯æˆ‘é‚£æ—¶è¿˜æ˜¯ä¸çŸ¥é“æ„å‘³ç€ä»€ä¹ˆï¼Œéƒ½æ˜¯æœªçŸ¥æ•°ï¼Œåæ­£hrå§å§æŒºæ¼‚äº®çš„ï¼Œå°±èŠèŠå¿ƒå£°å’¯~å°±åˆ—ä¸€ä¸ªé—®é¢˜å§</p><p><strong>é•¿è¿™ä¹ˆå¤§è®²å‡ºä¸‰ä¸ªå¯¹ä½ å½±å“æœ€æ·±çš„ä¸‰ä¸ªäºº</strong></p><p>å…¶ä»–çš„å°±å„ç§èŠå’¯~~åé¢è¯´é¢è¯•ç»“æœä¼šå°½å¿«é€šçŸ¥ï¼Œç¬¬äºŒå¤©è€ä¸ä½äº†ï¼Œå°±ç§èŠhrä»€ä¹ˆå¯ä»¥ç¡®å®šç»“æœï¼Œç„¶åå¥¹å›è¯´ä¸‹åˆä¼šå‘ä¸€ä¸ªæ­£å¼offerï¼Œå“ˆå“ˆå“ˆï¼Œé‚£æ—¶å€™å¼€å¿ƒåˆ°é£èµ·~offeræ¥äº†èµ¶å¿«å‘ä¸ªæœ‹å‹åœˆå‹å‹æƒŠÂ·Â·Â·</p><h2 id="å…¶ä»–å…¬å¸"><a href="#å…¶ä»–å…¬å¸" class="headerlink" title="å…¶ä»–å…¬å¸"></a>å…¶ä»–å…¬å¸</h2><p>å…¶ä»–å…¬å¸å°±ä¸åˆ—äº†å§ï¼Œé¢è¯•æ— éjsæ˜¯é‡ç‚¹ï¼Œjsä¸­çš„å‡ åº§å¤§å±±çš„åŸç†ä¸€å®šè¦å¾ˆç†Ÿæ‚‰ï¼ŒçŸ¥é“æ‰€ä»¥ç„¶ã€‚</p><ol><li>åŸå‹ã€åŸå‹é“¾</li><li>ä½œç”¨åŸŸã€ä½œç”¨åŸŸé“¾</li><li>å¼‚æ­¥ã€å•çº¿ç¨‹ Â·Â·Â·Â·</li></ol><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>æ¯æ¬¡å†™æ–‡ç« éƒ½å–œæ¬¢å¤œæ·±å†™ï¼Œç°åœ¨å‡Œæ™¨1ç‚¹ã€‚è‡ªå·±çš„æ ¡æ‹›è¯´çœŸçš„å®£è®²ä¼šä»€ä¹ˆéƒ½æ²¡å»ï¼Œè‡ªå·±æå‰å°±åšå¥½å‡†å¤‡äº†ï¼Œå„ä¸ªå…¬å¸çš„å®£è®²ä¼šè¿˜æ²¡å¼€å§‹æˆ‘å°±å¼€å§‹å‡†å¤‡é¢è¯•äº†ã€‚ç°åœ¨æƒ³æƒ³è‡ªå·±å½“åˆè‡ªå·±ä¸€ä¸ªäººç§Ÿåœ¨ä¸€ä¸ªå°ç§Ÿå‡ºå±‹é‡Œï¼Œå­¦ä¹ çŸ¥è¯†ã€æ‰¾å·¥ä½œæœŸé—´è‡ªå·±ä¸€ä¸ªäººçš„å¼€å¿ƒä¸éš¾è¿‡éƒ½åœ¨é‚£é‡Œåº¦è¿‡ï¼Œä¸€ä¸ªåœ¨è¿™ä¸ªåŸå¸‚æ„Ÿè§‰ä¸ä¸–éš”ç»çš„åœ°æ–¹ï¼Œå¯èƒ½ç°åœ¨æ²¡ä»€ä¹ˆæœºä¼šä¼šå†å»é‚£ä¸ªåœ°æ–¹ï¼Œä½†æ˜¯æœ‰æœºä¼šçš„è¯è¿˜æ˜¯æƒ³å›å»çœ‹çœ‹ï¼Œè‡ªå·±å½“åˆä»˜å‡ºå¥‹æ–—çš„åœ°æ–¹ã€‚ä¸ªäººæ¯”è¾ƒæ„šç¬¨ï¼Œä½†æ˜¯è‡ªå·±æ„Ÿè§‰è‡ªå·±çš„ä¸€ä¸ªæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯ä¼šæ¯”åŒé¾„äººåƒè‹¦ï¼Œå‹¤èƒ½è¡¥æ‹™å§ã€‚ç›¸ä¿¡ä»˜å‡ºæ€»æœ‰æ”¶è·ã€‚å°±è¿™æ ·å§ï¼Œåˆæ˜¯äººç”Ÿçš„ä¸€ä¸ªæ–°èµ·ç‚¹ï¼ŒèŒä¸šç”Ÿæ¶¯ä¸­è‚¯å®šä¼šæœ‰å„ç§é…¸ç”œè‹¦è¾£ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤ŸåšæŒï¼ŒåŠ æ²¹~~</p><blockquote><p>æœ‰å¿—è€…ã€äº‹ç«Ÿæˆï¼Œç ´é‡œæ²‰èˆŸï¼Œç™¾äºŒç§¦å…³ç»ˆå±æ¥šï¼Œ</p></blockquote><blockquote><p>è‹¦å¿ƒäººã€å¤©ä¸è´Ÿï¼Œå§è–ªå°èƒ†ï¼Œä¸‰åƒè¶Šç”²å¯åå´ï¼ </p></blockquote><p>äº å¦é—¨å‰åŸ” è‡ªå·±çš„å°å±‹(æ¬äº†æ–°å®¶å“¦~)   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€</p><p>æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ã€€&gt;&gt; <a href="http://www.huangmingzhao.cn/">é»„æ˜ç…§â€“ä¸€ä¸ªåœ¨è·¯ä¸Šæ…¢æ…¢è¡Œèµ°çš„å‰ç«¯äºº</a></p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç§‹æ‹› </tag>
            
            <tag> é¢è¯• </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>pm2çš„ä½¿ç”¨</title>
      <link href="/the-use-of-pm2.html"/>
      <content type="html"><![CDATA[<p>å¤§å®¶æ˜¯ä¸æ˜¯ä¼šé‡åˆ°è¿‡node app,js ç„¶åCtrl+C å°±æŒ‚äº†ï¼Ÿ ä¸‹é¢åˆ©ç”¨pm2æ°¸ä¹…ä¿æŒè¿›ç¨‹ã€‚</p><a id="more"></a><h2 id="å®‰è£…pm2"><a href="#å®‰è£…pm2" class="headerlink" title="å®‰è£…pm2"></a>å®‰è£…pm2</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install pm2 -g</span><br></pre></td></tr></table></figure><h3 id="è¿™é‡Œéœ€è¦è¡¥å……ä¸€å¥ï¼Œå¯åŠ¨ã€åˆ é™¤ã€åœæ­¢éƒ½å¯ä»¥ç”¨æ–‡ä»¶åæˆ–è€…è¿›ç¨‹idï¼Œæ¨èç”¨è¿›ç¨‹id"><a href="#è¿™é‡Œéœ€è¦è¡¥å……ä¸€å¥ï¼Œå¯åŠ¨ã€åˆ é™¤ã€åœæ­¢éƒ½å¯ä»¥ç”¨æ–‡ä»¶åæˆ–è€…è¿›ç¨‹idï¼Œæ¨èç”¨è¿›ç¨‹id" class="headerlink" title="è¿™é‡Œéœ€è¦è¡¥å……ä¸€å¥ï¼Œå¯åŠ¨ã€åˆ é™¤ã€åœæ­¢éƒ½å¯ä»¥ç”¨æ–‡ä»¶åæˆ–è€…è¿›ç¨‹idï¼Œæ¨èç”¨è¿›ç¨‹id"></a>è¿™é‡Œéœ€è¦è¡¥å……ä¸€å¥ï¼Œå¯åŠ¨ã€åˆ é™¤ã€åœæ­¢éƒ½å¯ä»¥ç”¨æ–‡ä»¶åæˆ–è€…è¿›ç¨‹idï¼Œæ¨èç”¨è¿›ç¨‹id</h3><h4 id="å¯åŠ¨è¿›ç¨‹"><a href="#å¯åŠ¨è¿›ç¨‹" class="headerlink" title="å¯åŠ¨è¿›ç¨‹"></a>å¯åŠ¨è¿›ç¨‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// å¯åŠ¨app.jsï¼Œ å¯åŠ¨ä¹‹åä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹IDï¼Œ ä¸‹é¢idæ˜¯1</span><br><span class="line">$ pm2 start app.js</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ App name â”‚ id â”‚ mode â”‚ pid   â”‚ status â”‚ restart â”‚ uptime â”‚ cpu â”‚ mem       â”‚ watching â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ app      â”‚ 1  â”‚ fork â”‚ 40047 â”‚ online â”‚ 0       â”‚ 8s     â”‚ 0%  â”‚ 50.6 MB   â”‚ disabled â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"></span><br><span class="line">// å¯åŠ¨æ‰€æœ‰è¿›ç¨‹ï¼Œ è¿™ä¸ªæ„æ€æ˜¯ä½ åœæ­¢äº†è¿›ç¨‹ä¹‹åå¯ä»¥å¯åŠ¨æ‰€æœ‰ã€‚</span><br><span class="line">pm2 start all</span><br><span class="line"></span><br><span class="line">// é‡æ–°å¯åŠ¨è¿›ç¨‹ï¼Œ å¦‚æœä½ ä¿®æ”¹äº†ä»£ç å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œæˆ–è€…åé¢æ˜¯ä½ çš„æƒ³è¦é‡å¯çš„è¿›ç¨‹id</span><br><span class="line">pm2 restart all</span><br></pre></td></tr></table></figure><h4 id="åœæ­¢è¿›ç¨‹"><a href="#åœæ­¢è¿›ç¨‹" class="headerlink" title="åœæ­¢è¿›ç¨‹"></a>åœæ­¢è¿›ç¨‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// åªåœæ­¢app.js</span><br><span class="line">pm2 stop app.js</span><br><span class="line"></span><br><span class="line">// æˆ–è€…åœæ­¢è¿›ç¨‹id, å½“ä½ å¯åŠ¨çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹id</span><br><span class="line">pm2 stop 1</span><br><span class="line"></span><br><span class="line">//  åœæ­¢æ‰€æœ‰è¿›ç¨‹</span><br><span class="line">pm2 stop all</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤è¿›ç¨‹"><a href="#åˆ é™¤è¿›ç¨‹" class="headerlink" title="åˆ é™¤è¿›ç¨‹"></a>åˆ é™¤è¿›ç¨‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// å½“ä½ å¯åŠ¨è¿›ç¨‹æˆ–è€…åœæ­¢è¿›ç¨‹ï¼Œå…¶å®ä¼šåœ¨pm2 listé‡Œé¢ï¼Œå¦‚æœæƒ³è¦åˆ é™¤çš„è¯...</span><br><span class="line">pm2 delete 0</span><br><span class="line"></span><br><span class="line">// åˆ é™¤æ‰€æœ‰</span><br><span class="line">pm2 delete all</span><br></pre></td></tr></table></figure><h4 id="æ˜¾ç¤ºè¿›ç¨‹åˆ—è¡¨"><a href="#æ˜¾ç¤ºè¿›ç¨‹åˆ—è¡¨" class="headerlink" title="æ˜¾ç¤ºè¿›ç¨‹åˆ—è¡¨"></a>æ˜¾ç¤ºè¿›ç¨‹åˆ—è¡¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pm2 list</span><br><span class="line"></span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ App name â”‚ id â”‚ mode â”‚ pid   â”‚ status â”‚ restart â”‚ uptime â”‚ cpu â”‚ mem       â”‚ watching â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚ app      â”‚ 0  â”‚ fork â”‚ 40188 â”‚ online â”‚ 0       â”‚ 3s     â”‚ 0%  â”‚ 50.5 MB   â”‚ disabled â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><h4 id="ç›‘è§†æ¯ä¸ªè¿›ç¨‹çš„ä¸€äº›çŠ¶å†µ"><a href="#ç›‘è§†æ¯ä¸ªè¿›ç¨‹çš„ä¸€äº›çŠ¶å†µ" class="headerlink" title="ç›‘è§†æ¯ä¸ªè¿›ç¨‹çš„ä¸€äº›çŠ¶å†µ"></a>ç›‘è§†æ¯ä¸ªè¿›ç¨‹çš„ä¸€äº›çŠ¶å†µ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// è¿™ä¸ªéå¸¸æœ‰ç”¨ï¼Œç”¨æ¥æŸ¥çœ‹nodeè¿›ç¨‹çš„ä¸€äº›è¿è¡Œæ—¶é—´ï¼Œé‡å¯äº†å‡ æ¬¡</span><br><span class="line">// å¯ä»¥çœ‹è¿è¡Œçš„æ–‡ä»¶è·¯å¾„ï¼Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œæ˜¯å¦å‡ºç°å†…å­˜æ³„éœ²</span><br><span class="line">pm2 monit</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ—¥å¿—æƒ…å†µ"><a href="#æŸ¥çœ‹æ—¥å¿—æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹æ—¥å¿—æƒ…å†µ"></a>æŸ¥çœ‹æ—¥å¿—æƒ…å†µ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// ç”¨äºæŸ¥çœ‹ç¨‹åºæ‰“å°çš„æ—¥å¿—ï¼Œ console.log();</span><br><span class="line">pm2 logs</span><br></pre></td></tr></table></figure><h4 id="0ç§’åœæœºé‡è½½"><a href="#0ç§’åœæœºé‡è½½" class="headerlink" title="0ç§’åœæœºé‡è½½"></a>0ç§’åœæœºé‡è½½</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é‡æ–°è¿è¡Œä»£ç  å¹¶ä¸”ä¸ä¼šå¤±å»è¯·æ±‚</span><br><span class="line">pm2 reload all</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
            <tag> pm2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å·©å›ºJavaScriptç³»åˆ—--01æ•°æ®ç±»å‹å’Œå‡½æ•°</title>
      <link href="/JavaScript01.html"/>
      <content type="html"><![CDATA[<p>æœ€è¿‘æ„Ÿè§‰æ ¡æ‹›ä¹Ÿå¿«åˆ°äº†ï¼Œæ„Ÿè§‰è‡ªå·±çš„çŸ¥è¯†ä½“ç³»è¿˜æ˜¯æŒºä¹±çš„ï¼Œæ‰€ä»¥æ‹¿èµ·äº†çº¢å®ä¹¦å†ä»”ç»†è¯»è¯»ï¼Œå¯¹çŸ¥è¯†ç‚¹å†å·©å›ºå·©å›ºï¼Œæƒ³æ¯æ¬¡å­¦ä¹ å®Œå¯¹æ•´ä½“çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹æ€»ç»“æ€»ç»“ï¼Œå†™ä¸‹äº†è‡ªå·±çš„JavaScriptç³»åˆ—å­¦ä¹ ã€‚</p><a id="more"></a><p>åœ¨å¼€å§‹å†™æ•°æ®ç±»å‹ä¹‹å‰ï¼Œæƒ³å¯¹&lt;script&gt;æ ‡ç­¾è®°ä¸‹å‡ ç‚¹å†…å®¹ã€‚</p><h2 id="scriptæ ‡ç­¾"><a href="#scriptæ ‡ç­¾" class="headerlink" title="scriptæ ‡ç­¾"></a>scriptæ ‡ç­¾</h2><p>&lt;script&gt;æœ‰ä»¥ä¸‹6ä¸ªå±æ€§</p><ol><li><p>asyncï¼šå¯é€‰ã€‚è¡¨ç¤ºåº”è¯¥ç«‹å³ä¸‹è½½è„šæœ¬ï¼Œä½†ä¸å¦¨ç¢é¡µé¢ä¸­çš„å…¶ä»–æ“ä½œï¼Œæ¯”å¦‚å¯ä»¥ä¸‹è½½å…¶ä»–èµ„æºæˆ–ç­‰å¾…åŠ è½½å…¶ä»–è„šæœ¬ã€‚åªå¯¹å¤–éƒ¨è„šæœ¬æ–‡ä»¶æœ‰æ•ˆã€‚</p></li><li><p>charsetï¼šå¯é€‰ã€‚è¡¨ç¤ºé€šè¿‡srcå±æ€§æŒ‡å®šçš„ä»£ç çš„å­—ç¬¦é›†ã€‚ç”±äºå¤§å¤šæ•°æµè§ˆå™¨ä¼šå¿½ç•¥å®ƒçš„å€¼ï¼Œæ‰€æœ‰å¾ˆå°‘ç”¨</p></li><li><p>deferï¼šå¯é€‰ã€‚è¡¨ç¤ºè„šæœ¬å¯ä»¥å»¶è¿Ÿåˆ°æ–‡æ¡£å®Œå…¨è¢«è§£æå’Œæ˜¾ç¤ºä¹‹åå†æ‰§è¡Œã€‚åªå¯¹å¤–éƒ¨æ–‡ä»¶æœ‰æ•ˆã€‚</p></li><li><p>languageï¼šå·²æ”¾å¼ƒã€‚</p></li><li><p>srcï¼šå¯é€‰ã€‚è¡¨ç¤ºåŒ…å«è¦æ‰§è¡Œçš„å¤–éƒ¨æ–‡ä»¶ã€‚</p></li><li><p>typeï¼šå¯é€‰ã€‚è¡¨ç¤ºç¼–ç ä½¿ç”¨çš„è„šæœ¬è¯­è¨€çš„å†…å®¹ç±»å‹</p></li></ol><p>è¿™é‡Œé‡ç‚¹è®°ä¸‹ä¸¤ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å±æ€§<strong>asyncå’Œdefer</strong>ï¼š</p><p>deferï¼šè®¾ç½®deferçš„è„šæœ¬ä¼šåœ¨æ•´ä¸ªé¡µé¢éƒ½è§£æå®Œæ¯•ä¹‹åå†æ‰§è¡Œã€‚</p><p>asyncï¼šæŒ‡å®šasyncå±æ€§çš„ç›®çš„æ˜¯ä¸è®©é¡µé¢ç­‰å¾…å…¶è„šæœ¬ä¸‹è½½å’Œæ‰§è¡Œï¼Œä»è€Œå¼‚æ­¥åŠ è½½é¡µé¢çš„å…¶ä»–å†…å®¹ã€‚</p><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>ECMAScriptä¸­æœ‰5ç§ç®€å•çš„æ•°æ®ç±»å‹(ä¹Ÿç§°ä¸ºåŸºæœ¬æ•°æ®ç±»å‹)ï¼š<strong>Undefinedã€Nullã€Booleanã€Numberå’ŒString</strong>ã€‚</p><p>è¿˜æœ‰ä¸€ç§å¤æ‚æ•°æ®ç±»å‹ï¼š<strong>Object</strong>ã€‚Objectæœ¬è´¨æ˜¯ç”±ä¸€ç»„æ— åºçš„åå€¼(é”®å€¼)ç»„æˆã€‚</p><h3 id="1-Undefinedç±»å‹"><a href="#1-Undefinedç±»å‹" class="headerlink" title="1. Undefinedç±»å‹"></a>1. Undefinedç±»å‹</h3><p>Undefinedç±»å‹çš„å€¼å°±åªæœ‰ä¸€ä¸ªundefinedã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var name;</span><br><span class="line">alert(name == undefined)    //<span class="literal">true</span></span><br></pre></td></tr></table></figure></p><p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œnameåªå®šä¹‰ï¼Œæœªåˆå§‹åŒ–ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºundefinedã€‚ä¸ä¸‹é¢ä»£ç ä¸€è‡´ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var name=undefined;</span><br><span class="line">alert(name == undefined)    //<span class="literal">true</span></span><br></pre></td></tr></table></figure></p><p>å…¶å®æˆ‘ä»¬å†æ²¡å¿…è¦ä¸ºå®ƒèµ‹å€¼undefinedï¼Œå› ä¸ºå®ƒé»˜è®¤çš„å€¼å°±æ˜¯undefinedã€‚</p><h3 id="2-Nullç±»å‹"><a href="#2-Nullç±»å‹" class="headerlink" title="2. Nullç±»å‹"></a>2. Nullç±»å‹</h3><p>Nullç±»å‹çš„å€¼ä¹Ÿåªæœ‰ä¸€ä¸ªï¼Œå³nullã€‚ä»é€»è¾‘è§’åº¦æ¥çœ‹ï¼Œnullå€¼è¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡æŒ‡é’ˆï¼Œè¿™ä¹Ÿæ˜¯ä½¿ç”¨typeofæ“ä½œç¬¦æ£€æµ‹nullå€¼æ—¶ä¼šè¿”å›objectç±»å‹çš„åŸå› ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var people=null</span><br><span class="line">alert(typeof people)  //object</span><br></pre></td></tr></table></figure></p><p><strong>å¦‚æœå®šä¹‰çš„å˜é‡å‡†å¤‡åœ¨å°†æ¥ç”¨äºä¿å­˜å¯¹è±¡ï¼Œé‚£ä¹ˆæœ€å¥½å°†è¯¥å˜é‡åˆå§‹åŒ–ä¸ºnullè€Œä¸æ˜¯å…¶ä»–å€¼(åƒé»˜è®¤çš„undefined)</strong></p><p><strong>undefinedå€¼æ˜¯æ´¾ç”Ÿè‡ªnullå€¼çš„</strong>ï¼Œå› æ­¤ä¸‹é¢ä»£ç è¿”å›çš„æ˜¯true<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(alert( null == undefined))  //<span class="literal">true</span></span><br></pre></td></tr></table></figure></p><p>ä½†å¦‚æœæ˜¯å…¨ç­‰æ“ä½œçš„è¯ï¼Œè¿”å›çš„æ˜¯false<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(alert( null === undefined))  //<span class="literal">false</span></span><br></pre></td></tr></table></figure></p><p><strong>æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½æ²¡æœ‰å¿…è¦æŠŠä¸€ä¸ªå˜é‡çš„å€¼æ˜¾å¼çš„è®¾ç½®ä¸ºundefined</strong>ï¼Œå¯æ˜¯åŒæ ·çš„è§„åˆ™å¯¹åº”nullå´æ˜¯ä¸é€‚ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œ<strong>åªè¦æ„åœ¨ä¿å­˜å¯¹è±¡çš„å˜é‡è¿˜æ²¡æœ‰çœŸæ­£çš„ä¿å­˜å¯¹è±¡ï¼Œå°±åº”è¯¥ä¸ºå…¶è®¾ç½®nullå€¼</strong>ã€‚è¿™æ ·åšçš„ç›®çš„ä¸ä»…ä½“ç°nullåšä¸ºç©ºå¯¹è±¡æŒ‡é’ˆçš„æƒ¯ä¾‹ï¼Œè€Œä¸”ä¹Ÿæœ‰åŠ©äºè¿›ä¸€æ­¥åŒºåˆ†nullå’Œundefinedã€‚è¿™ä¹Ÿæ˜¯nullå’Œundefinedçš„åªè¦åŒºåˆ«ã€‚</p><h3 id="3-Booleanç±»å‹"><a href="#3-Booleanç±»å‹" class="headerlink" title="3. Booleanç±»å‹"></a>3. Booleanç±»å‹</h3><p>Booleanç±»å‹æœ‰ä¸¤ä¸ªå€¼å³trueå’Œfalseã€‚Booleanç±»å‹çš„çŸ¥è¯†ç‚¹ä¸»è¦æ˜¯ä¸‹é¢è¿™ä¸ª:</p><p>å¯ä»¥å¯¹ä»»ä½•æ•°æ®ç±»å‹è°ƒç”¨Boolean()å‡½æ•°ï¼Œè€Œä¸”æ€»ä¼šè¿”å›ä¸€ä¸ªBooleanå€¼ã€‚</p><p><strong>é™¤äº† 0ã€-0ã€â€™â€™ã€NaNã€nullã€undefinedã€falseå¯¹å…¶ä½¿ç”¨Booleanå‡½æ•°è¿”å›çš„æ˜¯å‡(false)ï¼Œå…¶ä½™è¿”å›çš„æ˜¯çœŸ(true)</strong></p><p>åœ¨æµæ§åˆ¶è¯­å¥ä¸­(å¦‚ifè¯­å¥)ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰§è¡Œç›¸åº”çš„Booleanè½¬æ¢ã€‚è¯·çœ‹ä¸‹é¢ä»£ç ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var name=<span class="string">'hmz'</span>;</span><br><span class="line"><span class="keyword">if</span> (name)&#123;</span><br><span class="line">    alert(<span class="string">'my name is hmz'</span>)  //my name is hmz</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å› ä¸ºnameè¢«è‡ªåŠ¨æ‰§è¡Œç›¸åº”çš„Booleanè½¬æ¢ï¼Œè¿”å›çš„æ˜¯true</p><h3 id="4-Numberç±»å‹"><a href="#4-Numberç±»å‹" class="headerlink" title="4. Numberç±»å‹"></a>4. Numberç±»å‹</h3><ol><li><p>æµ®ç‚¹æ•°å€¼ï¼š æµ®ç‚¹æ•°å€¼éœ€è¦çš„å†…å­˜ç©ºé—´æ˜¯ä¿å­˜<strong>æ•´æ•°å€¼çš„ä¸¤å€</strong>ï¼Œå› æ­¤ECMAScriptä¼šä¸å¤±æ—¶æœºåœ°å°†æµ®ç‚¹æ•°å€¼è½¬æ¢ä¸ºæ•´æ•°å€¼ã€‚æµ®ç‚¹æ•°å€¼è®¡ç®—ä¼š<strong>äº§ç”Ÿèˆå…¥è¯¯å·®</strong>ï¼Œæ¯”å¦‚0.1+0.2ä¸ä¼šç­‰äº0.3ï¼Œè€Œæ˜¯ç­‰äº0.3000000â€¦0004ï¼Œæ‰€ä»¥åƒä¸‡ä¸è¦ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼Œä½ ä¼šå‘ç°ä»£ç å¹¶ä¸ä¼šå»å®ç°alertï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a=0.1,b=0.2;</span><br><span class="line"><span class="keyword">if</span>(a+b == 0.3)&#123;       //ä¸è¦åšè¿™æ ·çš„æµ‹è¯•</span><br><span class="line">    alert(<span class="string">'go this'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ•°å€¼èŒƒå›´ï¼š isFinite()å‡½æ•°åœ¨å‚æ•°ä½äºæœ€å¤§å€¼(Number.MAX_VALUE)å’Œæœ€å°å€¼(Number.MIN_VALUE)ä¹‹é—´ä¼šè¿”å›trueã€‚</p></li><li><p>NaNï¼š NaN(Not a  Number)æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°å€¼ã€‚NaNæœ‰ä¸¤ä¸ªç‰¹ç‚¹â‘ ä»»ä½•æ¶‰åŠNaNçš„æ“ä½œéƒ½ä¼šè¿”å›NaNï¼›â‘¡NaNè·Ÿä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬ä»–è‡ªå·±æœ¬èº«ã€‚</p></li></ol><p>æ ¹æ®NaNçš„ä¸¤ä¸ªç‰¹ç‚¹ECMAScriptå®šä¹‰äº†isNaN()å‡½æ•°ã€‚isNaN()å‡½æ•°ä¼ å…¥çš„å‚æ•°ä¼šè¢«æƒ³è½¬æ¢ä¸ºæ•°å€¼å†åˆ¤æ–­ï¼Œ<strong>å‚æ•°ä¸ä¼šè½¬æ¢ä¸ºæ•°å€¼çš„å‡½æ•°ä¼šè¿”å›trueï¼Œå¦åˆ™å‡½æ•°ä¼šè¿”å›false</strong>ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alert(isNaN(NaN))  //<span class="literal">true</span>     ä¸èƒ½è¢«è½¬æ¢ä¸ºæ•°å€¼</span><br><span class="line">alert(isNaN(10))   //<span class="literal">false</span>    10æ˜¯æ•°å€¼</span><br><span class="line">alert(isNaN(<span class="string">'blue'</span>))  //<span class="literal">true</span>  ä¸èƒ½è¢«è½¬æ¢ä¸ºæ•°å€¼</span><br><span class="line">alert(isNaN(<span class="string">'10'</span>)) //<span class="literal">false</span>   <span class="string">'10'</span>ä¼šè¢«è½¬æ¢ä¸º10</span><br><span class="line">alert(isNaN(<span class="literal">true</span>))  //<span class="literal">false</span>   <span class="literal">true</span>ä¼šè¢«è½¬æ¢ä¸º1</span><br></pre></td></tr></table></figure></p><ol><li>æ•°å€¼è½¬æ¢<br>å¯ä»¥è½¬æ¢ä¸ºæ•°å€¼çš„å‡½æ•°æœ‰Number()ã€parseInt()ã€parseFloat()ã€‚Number()å‡½æ•°å¯ä»¥ç”¨äºä»»ä½•æ•°æ®ç±»å‹ï¼Œè€ŒparseInt()å’ŒparseFloat()ä¸“é—¨ç”¨äºæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ã€‚</li></ol><p>parseInt()è½¬åŒ–ä¸ºæ•´æ•°ï¼Œå¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå‘Šè¯‰æµè§ˆå™¨æŒ‰å‡ è¿›åˆ¶è¿›è¡Œè§£ææ•°æ®ï¼Œå¦‚æœä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°ï¼Œé»˜è®¤æ˜¯10è¿›åˆ¶<br>parseFloat()è½¬åŒ–ä¸ºæµ®ç‚¹æ•°ï¼Œåªè§£ææ•´æ•°ï¼Œæ•…æ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°ã€‚</p><h3 id="5-Stringç±»å‹"><a href="#5-Stringç±»å‹" class="headerlink" title="5. Stringç±»å‹"></a>5. Stringç±»å‹</h3><p>è½¬æ¢ä¸ºå­—ç¬¦çš„å‡½æ•°æœ‰ï¼štoString()å’ŒString()ã€‚</p><p>toString()ï¼šâ‘ æ•°å€¼ã€å¸ƒå°”ã€å¯¹è±¡ã€å­—ç¬¦ä¸²éƒ½æœ‰toString()æ–¹æ³•ã€‚ä½†æ˜¯<strong>nullå’Œundefined</strong>æ²¡æœ‰toString()æ–¹æ³•ã€‚â‘¡å¤šæ•°æƒ…å†µä¸‹ï¼ŒtoString()æ–¹æ³•ä¸å¿…ä¼ å‚ï¼Œä½†ä¹Ÿå¯ä»¥ä¸ºå…¶ä¼ ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å¯ä»¥å°†num.toString(2|8|10|16)è¿”å›å‡ è¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤º</p><p>String()ï¼šåœ¨ä¸çŸ¥é“è¦è½¬æ¢çš„å€¼æ˜¯ä¸æ˜¯undefinedå’Œnullçš„æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨String()å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°èƒ½å°†ä»»ä½•ç±»å‹çš„å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><h3 id="6-Objectç±»å‹"><a href="#6-Objectç±»å‹" class="headerlink" title="6. Objectç±»å‹"></a>6. Objectç±»å‹</h3><p>ECMAScriptä¸­çš„å¯¹è±¡å…¶å®å°±æ˜¯ä¸€ç»„æ•°æ®å’ŒåŠŸèƒ½çš„é›†åˆã€‚</p><p>Objectçš„æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸‹åˆ—çš„å±æ€§å’Œæ–¹æ³•ï¼š</p><ol><li>constructorï¼šä¿å­˜ç€ç”¨äºåˆ›å»ºå½“å‰å¯¹è±¡çš„å‡½æ•°ï¼Œå³æ„é€ å™¨ã€‚</li><li>hasOwnPropertyï¼šç”¨äºæ£€æŸ¥ç»™å®šçš„å±æ€§åœ¨å½“å‰å¯¹è±¡å®ä¾‹ä¸­æ˜¯å¦å­˜åœ¨(è€Œä¸æ˜¯åœ¨å®ä¾‹çš„åŸå‹ä¸­)ã€‚å¦‚ï¼špeople.hasOwnProperty(â€˜nameâ€™)</li><li>isPrototypeOf(object): æ£€æµ‹ä¼ å…¥çš„å¯¹è±¡æ˜¯å¦æ˜¯å½“æœŸå¯¹è±¡çš„åŸå‹</li><li>propertyIsEnumerable(propertyName): æ£€æµ‹ä¼ å…¥çš„å±æ€§èƒ½å¦ä½¿ç”¨for-inè¿›è¡Œæšä¸¾<br>5.toLocaleString()ï¼šè¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œè¯¥å­—ç¬¦ä¸²ä¸æ‰§è¡Œç¯å¢ƒå¯¹åº”</li><li>toString()ï¼šè¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤º</li><li>valueOfï¼šè¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²ã€æ•°ç»„æˆ–å¸ƒå°”çš„è¡¨ç¤ºã€‚é€šå¸¸ä¸toString()çš„è¿”å›å€¼ç›¸åŒ</li></ol><p>åœ¨ECMAScriptä¸­Objectæ˜¯æ‰€æœ‰å¯¹è±¡çš„åŸºç¡€ï¼Œå› æ­¤æ‰€æœ‰å¯¹è±¡éƒ½å…·æœ‰ä¸Šé¢è¿™äº›åŸºæœ¬çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>å‡½æ•°ä¸­ä¸ªäººæ„Ÿè§‰æƒ³è¦å»æ³¨æ„çš„æ˜¯å‡½æ•°çš„è¿”å›å€¼å’Œå‡½æ•°çš„å‚æ•°ã€‚</p><ol><li>å‡½æ•°çš„è¿”å›å€¼ï¼šå‡½æ•°ä¸­è¦ä¹ˆè®©å‡½æ•°å§‹ç»ˆéƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œè¦ä¹ˆæ°¸è¿œéƒ½ä¸è¦è¿”å›å€¼ã€‚å¦‚æœæœªæŒ‡å®šè¿”å›å€¼çš„å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„undefinedå€¼</li><li>ç†è§£å‚æ•°ï¼š</li></ol><p>ECMAScriptå‡½æ•°ä¼ é€’å‚æ•°æ¯”è¾ƒçµæ´»ï¼Œå®šä¹‰å‡½æ•°å‚æ•°ä¹Ÿæ¯”è¾ƒçµæ´»ã€‚åŸå› åœ¨äºECMAScriptçš„å‚æ•°åœ¨å†…éƒ¨æ˜¯ç”¨ä¸€ä¸ª<strong>æ•°ç»„æ¥è¡¨ç¤º</strong>çš„ã€‚å‡½æ•°æ¥æ”¶åˆ°çš„æ˜¯è¿™ä¸ªæ•°ç»„ï¼Œè€Œä¸å…³å¿ƒæ•°ç»„ä¸­åŒ…å«å“ªäº›å‚æ•°ã€‚å®é™…ä¸Šåœ¨å‡½æ•°ä½“å†…å¯ä»¥é€šè¿‡argumentså¯¹è±¡æ¥è®¿é—®è¿™ä¸ªå‚æ•°æ•°ç»„ï¼Œä»è€Œè·å–ä¼ é€’ç»™å‡½æ•°çš„æ¯ä¸€ä¸ªå‚æ•°ã€‚</p><p>argumentså¯¹è±¡åªæ˜¯ä¸æ•°ç»„ç±»ä¼¼(ä»–å¹¶ä¸æ˜¯Arrayçš„å®ä¾‹)ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨[]æ¥è®¿é—®å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä½¿ç”¨lengthå±æ€§å¯ä»¥ç¡®å®šä¼ é€’è¿›æ¥å¤šå°‘å‚ã€‚argumentsçš„lengthç”±ä¼ å…¥çš„å‚æ•°ä¸ªæ•°å†³å®šçš„ï¼Œä¸æ˜¯ç”±å®šä¹‰å‡½æ•°æ—¶çš„å‘½åå‚æ•°çš„ä¸ªæ•°å†³å®šçš„ã€‚å¯¹äºæ²¡æœ‰ä¼ é€’å€¼çš„å‘½åå‚æ•°å°†è¢«è‡ªåŠ¨èµ‹äºˆundefinedï¼Œè¿™å°±è·Ÿå®šä¹‰äº†å˜é‡ä½†æ²¡æœ‰åˆå§‹åŒ–ä¸€æ ·ã€‚</p><h3 id="å‡½æ•°å®ç°ä¼ªé‡è½½"><a href="#å‡½æ•°å®ç°ä¼ªé‡è½½" class="headerlink" title="å‡½æ•°å®ç°ä¼ªé‡è½½"></a>å‡½æ•°å®ç°ä¼ªé‡è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">doAdd</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> (arguments.length == 1)&#123;</span><br><span class="line">        alert(arguments[0])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (arguments.length == 2)&#123;</span><br><span class="line">        alert(arguments[0] + arguments[1])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">doAdd(10)   //10</span><br><span class="line">doAdd(10,20)  //30</span><br></pre></td></tr></table></figure><p>ä¸Šé¢<strong>åˆ©ç”¨argumentsçš„lengthå¯ä»¥å®ç°ä¼ªé‡è½½</strong>ï¼Œä½†ECMAScriptä¸­æ˜¯<strong>æ²¡æœ‰çœŸæ­£çš„é‡è½½</strong>(æ–¹æ³•åä¸€æ ·ï¼Œæ¥æ”¶çš„å‚æ•°çš„ç±»å‹æˆ–æ•°é‡ä¸åŒ)ï¼Œå› ä¸ºECMAScriptä¸å­˜åœ¨å‡½æ•°ç­¾å(å‡½æ•°ç­¾åç”±å‚æ•°ä¸ªæ•°ä¸å…¶ç±»å‹ç»„æˆ)çš„ç‰¹æ€§ï¼ï¼ï¼å‡½æ•°åç›¸åŒçš„æƒ…å†µä¸‹ECMAScriptä¸­å‰é¢å®šä¹‰çš„å‡½æ•°ä¼šè¢«åé¢å®šä¹‰çš„å‡½æ•°æ‰€è¦†ç›–ï¼Œæ•…è€Œæ²¡æœ‰çœŸæ­£çš„é‡è½½ï¼Œä½†å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„ä»£ç å®ç°ä¼ªé‡è½½ã€‚</p><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>æ—¶é—´è¿‡çš„å¾ˆå¿«ï¼Œä¸çŸ¥ä¸è§‰å¿«è¦å…«æœˆä¸­æ—¬äº†ï¼Œå„ä¸ªå…¬å¸ä¹Ÿå¼€å§‹é™†ç»­å¼€æ”¾ç½‘ç”³äº†ï¼Œä¸ç”±çš„ä¼šæƒ³å¤ªå¤šä¸œè¥¿ï¼Œæ•…è€Œæ„Ÿè§‰æœ€è¿‘çš„èŠ‚å¥æ„Ÿæ²¡è·Ÿä¸Šï¼Œä¸Šå‘¨åœ¨å­¦Vueæ„Ÿè§‰ä¹Ÿæ˜¯ä¸æ˜¯å¾ˆå¥½ï¼Œæ²¡æœ‰æŠŠçœŸæ­£çš„å¿ƒæ€æ”¾åœ¨å­¦Vueä¸Šé¢ï¼Œæä¸ƒæå…«çš„ä¸€å‘¨ä¹Ÿè¿‡å»äº†ã€‚ç°åœ¨è‡ªå·±å°±æƒ³é™é™ï¼Œå¤–é¢çš„ä¸–ç•Œå¦‚ä½•å¦‚ä½•ï¼Œä½ çš„èƒ½åŠ›æœ‰é™ï¼Œå¤§å¯ä¸å¿…åœ¨ä¹ï¼Œç°åœ¨å‘¢è¦åšçš„åªæœ‰å¥½å¥½çš„é™ä¸‹å¿ƒï¼ŒåšæŒå§ï¼Œä¸€åˆ‡é¡ºå…¶è‡ªç„¶ï¼å†è¯´å†™è¿™ä¸ªJavaScriptç³»åˆ—ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æˆ‘ä¼šå†™å¤šå°‘ï¼Œå½“æˆ‘è¿˜æ˜¯ä¼šå°½è‡ªå·±æœ€å¤§çš„åŠªåŠ›å»æ€»ç»“ã€‚</p><p>äº å¦é—¨é«˜å´æ–°æ‘ è‡ªå·±çš„å°å±‹ã€€</p><p>æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢&gt;&gt; <a href="https://blog.huangmingzhao.cn" target="_blank" rel="noopener">shineTomorrowâ€“ä¸€ä¸ªè·¯ä¸Šæ…¢æ…¢è¡Œèµ°çš„å‰ç«¯äºº</a></p><p>å‚è€ƒæ–‡çŒ®ï¼šã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åŸºäºExpress+mongooseæ­å»ºçš„å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ</title>
      <link href="/Express-mongoose-stu-management.html"/>
      <content type="html"><![CDATA[<p>ä¸Šä¸€å‘¨å­¦äº†ä¸‹mongooseï¼Œè™½ç„¶å­¦äº†ç‚¹çš®æ¯›ï¼Œä½†è¿˜æ˜¯æƒ³å†™å†™æ€»ç»“æ€»ç»“ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æŠ€æœ¯åšå®¢ã€‚è¿˜æ˜¯è›®å¼€å¿ƒçš„ï¼Œhappy~~æ¥ï¼Œåˆ‡å…¥æ­£é¢˜ï¼é¡¹ç›®æºç æˆ‘ä¼šæ”¾åœ¨githubä¸Šã€‚ <a href="https://github.com/ishareme/student_manage/" target="_blank" rel="noopener">github åœ°å€</a></p><a id="more"></a><h2 id="ä»£ç ç›®å½•"><a href="#ä»£ç ç›®å½•" class="headerlink" title="ä»£ç ç›®å½•"></a>ä»£ç ç›®å½•</h2><p><img src="http://oubl6fzsm.bkt.clouddn.com/secondpost.png" alt="secondPost"></p><p>æœ‰äº›ä¸œè¥¿å¯æ ¹æ®è‡ªå·±å–œå¥½è®¾ç½®ï¼Œå¹¶éå¿…é¡»ã€‚</p><h3 id="åˆ›å»ºå¹¶åˆå§‹åŒ–ç›®å½•"><a href="#åˆ›å»ºå¹¶åˆå§‹åŒ–ç›®å½•" class="headerlink" title="åˆ›å»ºå¹¶åˆå§‹åŒ–ç›®å½•"></a>åˆ›å»ºå¹¶åˆå§‹åŒ–ç›®å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir student_manage</span><br><span class="line">$ <span class="built_in">cd</span> student_manage</span><br><span class="line">$ npm init</span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…"><a href="#ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…" class="headerlink" title="ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…"></a>ç¬¬ä¸‰æ–¹æ¨¡å—å®‰è£…</h2><h3 id="1-Express"><a href="#1-Express" class="headerlink" title="1. Express"></a>1. Express</h3><p><strong>1.1</strong>ã€€Express åŸºäº Node.js å¹³å°ï¼Œå¿«é€Ÿã€å¼€æ”¾ã€æç®€çš„ web å¼€å‘æ¡†æ¶ã€‚<br>ã€€<a href="http://www.expressjs.com.cn/4x/api.html" target="_blank" rel="noopener">Express 4.x API ä¸­æ–‡æ‰‹å†Œ</a>ã€€å®‰è£…å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install express --save</span><br></pre></td></tr></table></figure><p><strong>1.2</strong>ã€€body-parserç”¨äºè§£æå®¢æˆ·ç«¯è¯·æ±‚çš„bodyä¸­çš„å†…å®¹,å†…éƒ¨ä½¿ç”¨JSONç¼–ç å¤„ç†,urlç¼–ç å¤„ç†ä»¥åŠå¯¹äºæ–‡ä»¶çš„ä¸Šä¼ å¤„ç†ã€‚å®‰è£…å¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install body-parser --save</span><br></pre></td></tr></table></figure></p><h3 id="2-mongoose"><a href="#2-mongoose" class="headerlink" title="2. mongoose"></a>2. mongoose</h3><p><strong>2.1</strong>ã€€ã€€mongooseæ˜¯åœ¨node.jså¼‚æ­¥ç¯å¢ƒä¸‹å¯¹mongodbè¿›è¡Œä¾¿æ·æ“ä½œçš„å¯¹è±¡æ¨¡å‹å·¥å…·ã€‚<br><a href="http://www.nodeclass.com/api/mongoose.html" target="_blank" rel="noopener">mongooseæ–‡æ¡£</a>ã€€å®‰è£…å¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install mongoose --save</span><br></pre></td></tr></table></figure></p><h2 id="å¼€å§‹å†™ä»£ç å’¯"><a href="#å¼€å§‹å†™ä»£ç å’¯" class="headerlink" title="å¼€å§‹å†™ä»£ç å’¯~~"></a>å¼€å§‹å†™ä»£ç å’¯~~</h2><p>å½“ç„¶åœ¨é¡¹ç›®å¼€å§‹å‰è¦ç¡®å®šç”µè„‘æ˜¯å¦å®‰è£…mongoDBã€€</p><p><a href="https://www.mongodb.com/download-center?jmp=nav#community" target="_blank" rel="noopener">mongoDBä¸‹è½½åœ°å€</a>ã€€<br><a href="https://robomongo.org/download" target="_blank" rel="noopener">mongoDBå›¾å½¢åŒ–ç•Œé¢robomongo</a></p><p>ä¸‹è½½å¥½å…·ä½“æ€ä¹ˆé…ç½®è¿˜è¯·é—®åº¦å¨˜æˆ–Googleå§ï¼Œæœ¬æ–‡ä¸åšä»‹ç»äº†å“ˆã€‚æ³¨æ„ï¼šå®‰è£…å®ŒmongoDBçš„æ—¶å€™è¿›è¡Œé¡¹ç›®æ—¶è¦æŠŠlibç›®å½•ä¸‹çš„mongodæœåŠ¡å™¨æ‰“å¼€å“ˆ~~</p><p>å…ˆå±•ç¤ºä¸‹æœ€ç»ˆå®ç°çš„é¡¹ç›®æ•ˆæœï¼Œä»¥é˜²å¤§å®¶å¿ƒé‡Œæœ‰æ•°ã€‚</p><p><img src="http://oubl6fzsm.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720170808002035.png" alt="é¦–é¡µ"><br>é¦–é¡µ</p><p><img src="http://oubl6fzsm.bkt.clouddn.com/index.png" alt="æ·»åŠ é¡µ"><br>æ·»åŠ é¡µ</p><p><img src="http://oubl6fzsm.bkt.clouddn.com/modify.png" alt="ä¿®æ”¹é¡µ"><br>ä¿®æ”¹é¡µ</p><p>å‰å°å…·ä½“ä»£ç å°±ä¸åˆ—å‡ºæ¥ï¼Œæ¯”è¾ƒç®€å•ï¼Œä¸ºäº†èŠ‚çº¦æ—¶é—´ï¼Œå°±ä½¿ç”¨bootstrapè¿›è¡Œå¿«é€Ÿç”Ÿæˆï¼Œå½“ç„¶å¤§å®¶å¯ä»¥è¿›è¡Œç¾åŒ–ã€‚</p><h2 id="æ ¸å¿ƒä»£ç -æ•²é»‘æ¿"><a href="#æ ¸å¿ƒä»£ç -æ•²é»‘æ¿" class="headerlink" title="æ ¸å¿ƒä»£ç (æ•²é»‘æ¿~~~)"></a>æ ¸å¿ƒä»£ç (æ•²é»‘æ¿~~~)</h2><ol><li>mydb.js å¯¹æ•°æ®åº“è¿›è¡Œè¿æ¥</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">    //å¼•å…¥mongooseæ¨¡å—</span><br><span class="line">var mongoose=require(<span class="string">'mongoose'</span>)</span><br><span class="line"></span><br><span class="line">//æ•°æ®åº“è¿æ¥åœ°å€  é“¾æ¥åˆ°myStudentæ•°æ®åº“</span><br><span class="line">var DB_URL=<span class="string">'mongodb://localhost:27017/myStudent'</span></span><br><span class="line">//æ•°æ®åº“è¿æ¥</span><br><span class="line">mongoose.connect(DB_URL)</span><br><span class="line"></span><br><span class="line">//è¿æ¥æˆåŠŸç»ˆç«¯æ˜¾ç¤ºæ¶ˆæ¯</span><br><span class="line">mongoose.connection.on(<span class="string">'connected'</span>,<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    console.log(<span class="string">'mongoose connection open to '</span>+DB_URL)</span><br><span class="line">&#125;)</span><br><span class="line">//è¿æ¥å¤±è´¥ç»ˆç«¯æ˜¾ç¤ºæ¶ˆæ¯</span><br><span class="line">mongoose.connection.on(<span class="string">'error'</span>,<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    console.log(<span class="string">'mongoose error '</span>)</span><br><span class="line">&#125;)</span><br><span class="line">//è¿æ¥æ–­å¼€ç»ˆç«¯æ˜¾ç¤ºæ¶ˆæ¯</span><br><span class="line">mongoose.connection.on(<span class="string">'disconnected'</span>,<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    console.log(<span class="string">'mongoose disconnected'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//åˆ›å»ºä¸€ä¸ªSchema  æ¯ä¸€ä¸ªschemaä¼šä¸€ä¸€å¯¹åº”mongoä¸­çš„collection</span><br><span class="line">var schema=mongoose.Schema</span><br><span class="line"></span><br><span class="line">//å®ä¾‹åŒ–ä¸€ä¸ªSchema</span><br><span class="line">var studentSchema=new schema(</span><br><span class="line">    &#123;</span><br><span class="line">        //è®¾ç½®studentSchemaä¿¡æ¯çš„æ•°æ®æ ¼å¼</span><br><span class="line">        name:&#123;<span class="built_in">type</span>:String&#125;,</span><br><span class="line">        sex:&#123;<span class="built_in">type</span>:String&#125;,</span><br><span class="line">        age:&#123;<span class="built_in">type</span>:Number&#125;,</span><br><span class="line">        phone:&#123;<span class="built_in">type</span>:String&#125;,</span><br><span class="line">        email:&#123;<span class="built_in">type</span>:String&#125;,</span><br><span class="line">        other:&#123;<span class="built_in">type</span>:String&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    //&#123;versionKey: <span class="literal">false</span>&#125;æ˜¯å¹²å˜›ç”¨ï¼Ÿå¦‚æœä¸åŠ è¿™ä¸ªè®¾ç½®ï¼Œæˆ‘ä»¬é€šè¿‡mongooseç¬¬ä¸€æ¬¡åˆ›å»ºæŸä¸ªé›†åˆæ—¶ï¼Œ</span><br><span class="line">    // å®ƒä¼šç»™è¿™ä¸ªé›†åˆè®¾å®šä¸€ä¸ªversionKeyå±æ€§å€¼ï¼Œæˆ‘ä»¬ä¸éœ€è¦ï¼Œæ‰€ä»¥ä¸è®©å®ƒæ˜¾ç¤º</span><br><span class="line">    &#123;</span><br><span class="line">        versionKey:<span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">//ç”Ÿæˆä¸€ä¸ªå…·ä½“studentçš„modelå¹¶å¯¼å‡º</span><br><span class="line">//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é›†åˆåï¼Œåœ¨æ•°æ®åº“ä¸­ä¼šè‡ªåŠ¨åŠ s</span><br><span class="line">//æŠŠModelåå­—å­—æ¯å…¨éƒ¨å˜å°å†™å’Œåœ¨åé¢åŠ å¤æ•°s</span><br><span class="line">var student=mongoose.model(<span class="string">'student'</span>,studentSchema)</span><br><span class="line">//å°†Studentçš„modelå¯¼å‡º</span><br><span class="line">module.exports=student</span><br></pre></td></tr></table></figure><p>é‡Œé¢çš„ä»£ç æˆ‘å·²é€æ¡è¿›è¡Œæ³¨é‡Šã€‚æœ‰å‡ ä¸ªè¦è¯´æ˜çš„åœ°æ–¹ï¼š1.å¯èƒ½å¤§å®¶çœ‹åˆ°Schemaçš„æ—¶å€™æœ‰ä¸€ç‚¹æ‡µï¼Œä¸è¿‡ä»–ç†è§£èµ·æ¥æŒºç®€å•çš„å°±åƒå…³ç³»å‹æ•°æ®åº“é‡Œé¢çš„è¡¨ã€‚å®šä¹‰å¯ä»¥è¿™ä¹ˆè®²ï¼š<strong>schema</strong>æ˜¯mongooseé‡Œä¼šç”¨åˆ°çš„ä¸€ç§æ•°æ®æ¨¡å¼ï¼Œ<strong>å¯ä»¥ç†è§£ä¸ºè¡¨ç»“æ„çš„å®šä¹‰ï¼›æ¯ä¸ªschemaä¼šæ˜ å°„åˆ°mongodbä¸­çš„ä¸€ä¸ªcollection</strong>ï¼Œå®ƒä¸å…·å¤‡æ“ä½œæ•°æ®åº“çš„èƒ½åŠ›ã€‚2.ç”Ÿæˆä¸€ä¸ªstudentçš„modelçš„æ—¶å€™ï¼Œå¦‚æœmyStudentæ•°æ®åº“é‡Œé¢æ²¡æœ‰student(ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼)é›†åˆçš„è¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªstudentsçš„collectionï¼Œæ³¨æ„åœ¨studentåé¢åŠ äº†<strong>s</strong>ã€‚</p><ol><li>app.js<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">//å¯¼å…¥expressæ¨¡å—</span><br><span class="line">var expres=require(<span class="string">'express'</span>)</span><br><span class="line">var bodyParser=require(<span class="string">'body-parser'</span>)</span><br><span class="line">//å¯¼å…¥ä¹‹å‰å†™çš„mydb.js</span><br><span class="line">var student=require(<span class="string">'./mydb'</span>)</span><br><span class="line"></span><br><span class="line">//è°ƒç”¨å‡½æ•°ï¼Œ expresså®ä¾‹åŒ–</span><br><span class="line">var app=expres()</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123;extended:<span class="literal">false</span>&#125;))</span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"></span><br><span class="line">//å¤„ç†é™æ€ç›®å½•</span><br><span class="line">app.use(expres.static(<span class="string">'www'</span>))</span><br><span class="line"></span><br><span class="line">// å…è®¸è·¨åŸŸè®¿é—®ï¼ï¼ï¼</span><br><span class="line">app.all(<span class="string">'/api/*'</span>, <span class="keyword">function</span> (req, res, next) &#123;</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>)</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Headers'</span>, <span class="string">'x-Request-with'</span>)</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Methods'</span>, <span class="string">'PUT,POST,GET,DELETE,OPTIONS'</span>)</span><br><span class="line">    res.header(<span class="string">'X-Powered-By'</span>, <span class="string">'4.15.2'</span>)</span><br><span class="line">    res.header(<span class="string">'Content-Type'</span>, <span class="string">'application/json;charset=utf-8'</span>)</span><br><span class="line">    next()   //æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//é¦–é¡µå±•ç¤ºè·å–æ•°æ®</span><br><span class="line">app.post(<span class="string">'/index'</span>,<span class="keyword">function</span> (req,res) &#123;</span><br><span class="line">    //mongoose æ•°æ®æŸ¥æ‰¾</span><br><span class="line">    student.find(&#123;&#125;).<span class="built_in">exec</span>(<span class="keyword">function</span> (error,data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (error)&#123;</span><br><span class="line">            console.log(<span class="string">'æ•°æ®è·å–å¤±è´¥'</span>+error)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'æŸ¥è¯¢æˆåŠŸ'</span>,</span><br><span class="line">                //ä¼ é€’è¿”å›çš„æ•°æ®</span><br><span class="line">                data:data</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//ä¿®æ”¹é¡µé¢ è·å–æ•°æ®</span><br><span class="line">app.post(<span class="string">'/modify'</span>,<span class="keyword">function</span> (req,res) &#123;</span><br><span class="line">    //mongooseæ ¹æ®æ¡ä»¶è¿›è¡ŒæŸ¥æ‰¾</span><br><span class="line">    student.find(&#123;_id: req.body.id&#125;).<span class="built_in">exec</span>(<span class="keyword">function</span> (error,data) &#123;</span><br><span class="line">        console.log(<span class="string">'2'</span>)</span><br><span class="line">        <span class="keyword">if</span> (error)&#123;</span><br><span class="line">            console.log(<span class="string">'æ•°æ®è·å–å¤±è´¥'</span>+error)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            console.log(data)</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'æŸ¥è¯¢æˆåŠŸ'</span>,</span><br><span class="line">                data:data</span><br><span class="line">            &#125;)</span><br><span class="line">            console.log(4)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//ä¿®æ”¹æäº¤ä¿®æ”¹æ•°æ®åº“</span><br><span class="line">app.post(<span class="string">'/modifyStu'</span>,<span class="keyword">function</span> (req,res) &#123;</span><br><span class="line">    console.log(<span class="string">'1'</span>)</span><br><span class="line">    console.log(req.body)</span><br><span class="line">    //æŸ¥è¯¢çš„æ¡ä»¶</span><br><span class="line">    var whereStr=&#123;_id:req.body.id&#125;</span><br><span class="line">    //æ›´æ–°çš„å†…å®¹</span><br><span class="line">    var updateStr=&#123;</span><br><span class="line">        <span class="variable">$set</span>:&#123;</span><br><span class="line">            name:req.body.name,</span><br><span class="line">            sex:req.body.sex,</span><br><span class="line">            age: req.body.age,</span><br><span class="line">            phone:req.body.phone,</span><br><span class="line">            email:req.body.email,</span><br><span class="line">            other:req.body.other,</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //å¯¹æ•°æ®åº“è¿›è¡Œæ›´æ–°</span><br><span class="line">    student.update(whereStr,updateStr,<span class="keyword">function</span> (error) &#123;</span><br><span class="line">        <span class="keyword">if</span> (error)&#123;</span><br><span class="line">            console.log(<span class="string">'æ•°æ®ä¿®æ”¹å¤±è´¥:'</span>+error)</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'ä¿®æ”¹å¤±è´¥'</span>,</span><br><span class="line">                data:req.body</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            console.log(<span class="string">'æ•°æ®ä¿®æ”¹æˆåŠŸ'</span>)</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'ä¿®æ”¹æˆåŠŸ'</span>,</span><br><span class="line">                data:req.body</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//åˆ é™¤æ•°æ®åº“å…¶ä¸­çš„é¡¹</span><br><span class="line">app.post(<span class="string">'/del'</span>,<span class="keyword">function</span> (req,res) &#123;</span><br><span class="line">    //mongooseæ ¹æ®æŒ‡å®šæ¡ä»¶è¿›è¡Œåˆ é™¤</span><br><span class="line">    student.remove(&#123;_id: req.body.id&#125;,<span class="keyword">function</span>(error)&#123;</span><br><span class="line">        <span class="keyword">if</span> (error)&#123;</span><br><span class="line">            console.log(<span class="string">'æ•°æ®è·å–å¤±è´¥'</span>+error)</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'åˆ é™¤ä¸æˆåŠŸ'</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'åˆ é™¤æˆåŠŸ'</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//å¯¼èˆªæ searchæ“ä½œ</span><br><span class="line">app.post(<span class="string">'/findName'</span>,<span class="keyword">function</span> (req,res) &#123;</span><br><span class="line">    console.log(req.body.searchName)</span><br><span class="line">    student.find(&#123;name: req.body.searchName&#125;).<span class="built_in">exec</span>(<span class="keyword">function</span> (error,data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (error)&#123;</span><br><span class="line">            console.log(<span class="string">'æŸ¥è¯¢å¤±è´¥'</span>+error)</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'æŸ¥è¯¢å¤±è´¥'</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'æŸ¥è¯¢æˆåŠŸ'</span>,</span><br><span class="line">                data:data</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//æ·»åŠ æ•°æ®åº“æ“ä½œ</span><br><span class="line">app.post(<span class="string">'/addStu'</span>,<span class="keyword">function</span> (req,res) &#123;</span><br><span class="line">    console.log(req.body)</span><br><span class="line">    //å®ä¾‹åŒ–ä¸€ä¸ªstudent</span><br><span class="line">    var newStu=new student(&#123;</span><br><span class="line">        name:req.body.name,</span><br><span class="line">        sex:req.body.sex,</span><br><span class="line">        age:req.body.age,</span><br><span class="line">        phone:req.body.phone,</span><br><span class="line">        email:req.body.email,</span><br><span class="line">        other:req.body.other,</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    //å¯¹å®ä¾‹åŒ–çš„å†…å®¹è¿›è¡Œä¿å­˜</span><br><span class="line">    newStu.save(<span class="keyword">function</span> (error) &#123;</span><br><span class="line">        <span class="keyword">if</span> (error)&#123;</span><br><span class="line">            console.log(<span class="string">'æ•°æ®æ·»åŠ å¤±è´¥:'</span>+error)</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'æ·»åŠ å¤±è´¥'</span>,</span><br><span class="line">                data:req.body</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            console.log(<span class="string">'æ•°æ®æ·»åŠ æˆåŠŸ'</span>)</span><br><span class="line">            res.json(&#123;</span><br><span class="line">                status:<span class="string">'y'</span>,</span><br><span class="line">                message:<span class="string">'æ·»åŠ æˆåŠŸ'</span>,</span><br><span class="line">                data:req.body</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//æœåŠ¡å™¨ç›‘å¬ç«¯å£</span><br><span class="line">app.listen(3000,()=&gt;&#123;</span><br><span class="line">    console.log(<span class="string">'node is ok'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>åˆ°å¤„æœåŠ¡å™¨æ­å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¯¹å„ä¸ªjsä»£ç è¿›è¡Œæ“ä½œï¼Œajaxè·å–è¡¨å•æ•°æ®è¯·æ±‚æœåŠ¡å™¨ï¼Œajaxè·å–åœ°å€æ è¯·æ±‚æœåŠ¡å™¨ç­‰ç­‰ã€‚ç„¶åajaxåœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œå¯¹æ­¤è¿›è¡Œæ¸²æŸ“åˆ°å‰å°é¡µé¢ï¼Œæ­¤é¡¹ç›®æˆ‘ç”¨çš„æ˜¯ <strong>artTemplate</strong> è¿›è¡Œæ¨¡æ¿æ¸²æŸ“ã€‚</p><p>å°±ä¸¾ä¸€ä¸ªæ —å­å§~~</p><ol><li>æ·»åŠ é¡µçš„ addAjax.js<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$(<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line"></span><br><span class="line">    //æ·»åŠ è¡¨å•éªŒè¯æ–¹æ³•   æ‰‹æœºå·çš„éªŒè¯</span><br><span class="line">    $.validator.addMethod(<span class="string">'isPhone'</span>,<span class="keyword">function</span> (value,ele) &#123;</span><br><span class="line">        var length=value.length</span><br><span class="line">        var reg=/^1[34578]\d&#123;9&#125;$/</span><br><span class="line">        <span class="keyword">if</span> (length &gt;= 11 &amp;&amp; reg.test(value))&#123;</span><br><span class="line">            <span class="built_in">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    //å¯¹è¡¨å•è¿›è¡ŒéªŒè¯</span><br><span class="line">    $(<span class="string">'#addForm'</span>).validate(&#123;</span><br><span class="line">        debug:<span class="literal">true</span>,</span><br><span class="line">        //éªŒè¯çš„è§„åˆ™</span><br><span class="line">        rules:&#123;</span><br><span class="line">            name:&#123;</span><br><span class="line">                required:<span class="literal">true</span>,</span><br><span class="line">                minlength:3</span><br><span class="line">            &#125;,</span><br><span class="line">            age:&#123;</span><br><span class="line">                required:<span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            phone:&#123;</span><br><span class="line">                required:<span class="literal">true</span>,</span><br><span class="line">                isPhone:<span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            email:&#123;</span><br><span class="line">                required:<span class="literal">true</span>,</span><br><span class="line">                email:<span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        //é”™è¯¯çš„æç¤ºä¿¡æ¯</span><br><span class="line">        messages:&#123;</span><br><span class="line">            name:&#123;</span><br><span class="line">                required:<span class="string">'å§“åä¸èƒ½ä¸ºç©º'</span>,</span><br><span class="line">                minlength:<span class="string">'å§“åä¸èƒ½å°‘äº3ä½'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            age:&#123;</span><br><span class="line">                required:<span class="string">'å¹´é¾„ä¸èƒ½ä¸ºç©º'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            phone:&#123;</span><br><span class="line">                required:<span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span>,</span><br><span class="line">                isPhone:<span class="string">'æ‰‹æœºå·æ ¼å¼é”™è¯¯'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            email:&#123;</span><br><span class="line">                required:<span class="string">'é‚®ç®±ä¸èƒ½ä¸ºç©º'</span>,</span><br><span class="line">                email:<span class="string">'é‚®ç®±æ ¼å¼é”™è¯¯'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        //æ­£ç¡®æ—¶æ‰§è¡Œçš„å‡½æ•°</span><br><span class="line">        submitHandler:<span class="keyword">function</span> (form) &#123;</span><br><span class="line">            //ajaxè¯·æ±‚</span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                <span class="built_in">type</span>:<span class="string">'post'</span>,</span><br><span class="line">                url:<span class="string">'/addStu'</span>,</span><br><span class="line">                dataType:<span class="string">'json'</span>,</span><br><span class="line">                //è¡¨å•æ•°æ®åºåˆ—åŒ–</span><br><span class="line">                data:$(form).serialize(),</span><br><span class="line">                //ajaxè¯·æ±‚æˆåŠŸæ“ä½œ</span><br><span class="line">                success:<span class="keyword">function</span> (res) &#123;</span><br><span class="line">                    $(<span class="string">'.modal-body'</span>).text(res.message)</span><br><span class="line">                    //æ˜¾ç¤ºå‡ºæ¨¡æ€æ¡†</span><br><span class="line">                    $(<span class="string">'.modal'</span>).modal(<span class="string">'show'</span>).on(<span class="string">'hidden.bs.modal'</span>,<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">                        <span class="keyword">if</span> (res.message == <span class="string">'æ·»åŠ æˆåŠŸ'</span>)&#123;</span><br><span class="line">                            location.href=<span class="string">'index.html'</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;,</span><br><span class="line">                //ajaxè¯·æ±‚å¤±è´¥æ“ä½œ</span><br><span class="line">                error:<span class="keyword">function</span> (jqXHR) &#123;</span><br><span class="line">                    console.log(jqXHR.status)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>è¡¨å•éªŒè¯æˆ‘ç”¨äº† <strong>jquery.validate.js</strong></p><ol><li><p>æ·»åŠ å®Œæ¯•ï¼Œé¦–é¡µè¿›è¡Œæ¸²æŸ“  index.html(éƒ¨åˆ†)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;each&#125;&#125;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;<span class="variable">$value</span>.name&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;<span class="variable">$value</span>.sex&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;<span class="variable">$value</span>.age&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;<span class="variable">$value</span>.phone&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;<span class="variable">$value</span>.email&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">            &lt;a href=<span class="string">"/modify.html?id=&#123;&#123;<span class="variable">$value</span>._id&#125;&#125;"</span> class=<span class="string">"modify"</span> data-index=<span class="string">"&#123;&#123;<span class="variable">$value</span>._id&#125;&#125;"</span>&gt;ä¿®æ”¹&lt;/a&gt;</span><br><span class="line">            &lt;a href=<span class="string">""</span> class=<span class="string">"del"</span> data-index=<span class="string">"&#123;&#123;<span class="variable">$value</span>._id&#125;&#125;"</span>&gt;åˆ é™¤&lt;/a&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &#123;&#123;/each&#125;&#125;</span><br></pre></td></tr></table></figure></li><li><p>é¦–é¡µçš„ indexAjax.js(éƒ¨åˆ†)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        <span class="built_in">type</span>:<span class="string">'post'</span>,</span><br><span class="line">        url:<span class="string">'/index'</span>,</span><br><span class="line">        success:<span class="keyword">function</span> (res) &#123;</span><br><span class="line">            //è¿›è¡Œæ¨¡æ¿æ¸²æŸ“</span><br><span class="line">            var strHtml=template(<span class="string">'showStu'</span>,res.data)</span><br><span class="line">            $(<span class="string">'#tb'</span>).html(strHtml)</span><br><span class="line">            </span><br><span class="line">            ......ä»£ç æœ‰ç‚¹é•¿å°±ä¸æ”¾äº†å“ˆ~~........</span><br></pre></td></tr></table></figure></li></ol><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>   å¤œå·²æ·±ã€‚ä¸çŸ¥ä¸è§‰å†™è¿™ä¸ªæ–‡ç« ä¹ŸèŠ±äº†æŒºé•¿æ—¶é—´çš„ï¼Œå“ˆå“ˆå“ˆï¼Œä¸è¿‡è‡ªå·±å¼€å¿ƒå°±è¡Œ~~ è‡ªå·±åœ¨åšè¿™ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œä»¥ä¸ºä¼šå¾ˆå¿«æå®Œï¼Œä½†æ˜¯è¿˜æ˜¯é‡åˆ°äº†é—®é¢˜ï¼Œå“ï¼Œçº ç»“äº†å¥½ä¹…ï¼Œç°åœ¨ä¹Ÿæ²¡å¾—å‡ºä¸ªç­”æ¡ˆï¼Œåæ¥ç”¨äº†å¦ä¸€ç§çš„è§£å†³æ–¹æ³•ï¼Œæ„Ÿè§‰æœ‰ç‚¹åƒæŠ•æœºå–å·§ï¼Œä½†å¥½åƒä¹Ÿä¸èƒ½æ€ä¹ˆè¯´ï¼Œå“ˆå“ˆâ€¦ä¸ªäººæŠ€æœ¯æ°´å¹³çœŸçš„å¾ˆæ¸£ï¼Œå†™æ–‡ç« ä¸€æ–¹é¢æ˜¯åˆ†äº«ï¼Œä¸€æ–¹é¢æ˜¯å†æ¬¡é‡æ¸©è‡ªå·±çš„æ€è·¯ã€‚è¯·å‹¿å–·å“ˆ~~è‡ªå·±çš„ç¬¬ä¸€ç¯‡æŠ€æœ¯åšå®¢ï¼Œå†™çš„æœ‰ç‚¹åŒ†å¿™ï¼Œä¸è¿‡è¿˜æ˜¯å¸Œæœ›å¯ä»¥ç»™å¤§å®¶å¸¦æ¥å¸®åŠ©ã€‚<br>   ã€€ã€€ã€€ã€€ã€€ã€€<br>   ã€€ã€€ã€€ã€€ã€€ã€€<br>   ã€€ã€€ã€€ã€€ã€€ã€€<br>   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€äº å¦é—¨é«˜å´æ–°æ‘ è‡ªå·±çš„å°å±‹   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€   ã€€ã€€ã€€ã€€ã€€ã€€                        ã€€ã€€ã€€ã€€ã€€</p><p>æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ã€€&gt;&gt; <a href="http://www.huangmingzhao.cn/">é»„æ˜ç…§â€“ä¸€ä¸ªåœ¨è·¯ä¸Šæ…¢æ…¢è¡Œèµ°çš„å‰ç«¯äºº</a></p>]]></content>
      
      <categories>
          
          <category> æ¸£æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mongoose </tag>
            
            <tag> Express </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡</title>
      <link href="/fistpost.html"/>
      <content type="html"><![CDATA[<p>2017-07-28 æ²¡æœ‰ç‰¹åˆ«æ—¥å­ï¼Œå¾ˆå¹³æ·¡ï¼Œè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡åšæ–‡ï¼Œä»Šå¤©å¯¹æˆ‘æˆ–è®¸è¿˜æœ‰ç‚¹æ„ä¹‰ã€‚å‰é˜µæ—¥å­åœ¨æ­å»ºæ­¤åšå®¢ï¼Œå…¶å®æœ‰æƒ³æ­å»ºä¸ªäººåšå®¢çš„æƒ³æ³•å¥½æ—©å°±æœ‰äº†ï¼Œç°åœ¨æ‰å»å®ç°ï¼Œæ„Ÿè§‰ç¡®å®æ˜¯æœ‰ç‚¹æ™šäº†ã€‚ä¸è¿‡ç»ˆäºè¿˜æ˜¯è¿ˆå¼€äº†æ­¥å­ï¼Œæœ‰å»åšçš„äº‹æƒ…ï¼Œä¸ç®¡ä»€ä¹ˆæ—¶å€™å»åšæˆ‘æ„Ÿè§‰éƒ½æ˜¯å¥½çš„ï¼Œæ¥ä¸‹æ¥çš„äº‹æƒ…å°±çœ‹è‡ªå·±çš„åšæŒä¸å†åšæŒã€‚æˆ‘ä¹Ÿä¸çŸ¥é“ç¬¬ä¸€ç¯‡åšæ–‡è¦å†™ä»€ä¹ˆï¼Œå“ˆå“ˆâ€¦æ–‡ç¬”ä¸å¥½åªèƒ½èƒ¡å†™ä¸€é€šäº†~~è¯´è¯´æ­å»ºåšå®¢çš„ç›®çš„å§ï¼Œä¸»è¦æœ‰ä¸‰ç‚¹å§ï¼š</p><a id="more"></a><ul><li><h3 id="Record"><a href="#Record" class="headerlink" title="Record"></a>Record</h3><p>è®°å½•è‡ªå·±çš„ç”Ÿæ´»ï¼Œå¯¹ç”Ÿæ´»çš„ä½“éªŒå’Œæ„Ÿå—ï¼Œè‡ªå·±çš„çˆ±å¥½ï¼Œä»¥åŠè‡ªå·±åœ¨å‰ç«¯è·¯ä¸Šè¡Œèµ°å­¦åˆ°çš„ä¸€äº›æ¸£æŠ€æœ¯ï¼Œå¯¹æŠ€æœ¯çš„æ€»ç»“ã€‚</p></li><li><h3 id="Share"><a href="#Share" class="headerlink" title="Share"></a>Share</h3><p>è‡ªå·±æ¸£æŠ€æœ¯çš„åˆ†äº«ï¼Œä¸è¿‡ï¼Œè‡ªå·±çš„æŠ€æœ¯ä¸æ€ä¹ˆæ ·ï¼Œä½†è¿˜æ˜¯ä¼šç”¨å¿ƒåˆ†äº«è¿ª~~</p></li><li><h3 id="Think"><a href="#Think" class="headerlink" title="Think"></a>Think</h3><p>æœ‰è®°å½•å°±æœ‰æ€»ç»“ï¼Œæœ‰æ€»ç»“å°±ä¼šæœ‰æ€è€ƒï¼Œæœ‰æ€è€ƒå°±ä¼šæœ‰æ”¶è·ï¼Œæˆ‘æƒ³è¿™å°±æ˜¯å†™åšå®¢çš„æ„ä¹‰ã€‚</p></li></ul><p>å†™åœ¨æœ€åï¼š</p><blockquote><p>å³ä¾¿æœ€å¹³å‡¡çš„äººï¼Œä¹Ÿå¾—è¦ä¸ºä»–é‚£ä¸ªå­˜åœ¨çš„ä¸–ç•Œè€Œæˆ˜æ–—ï¼Œä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´åœ¨è¿™äº›å¹³å‡¡çš„ä¸–ç•Œé‡Œï¼Œä¹Ÿæ²¡æœ‰ä¸€å¤©æ˜¯å¹³é™çš„ã€‚                                                              â€”<em>ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹</em></p></blockquote><p><img src="http://oubl6fzsm.bkt.clouddn.com/fistpost.jpg" alt="fistPost"></p><p>æ”¾å¼ è‡ªå·±å½“åˆå†™çš„å­—ï¼Œå…±å‹‰ä¹‹~~</p><p>(ç¬¬ä¸€ç¯‡å½“ç„¶è¦æ¥ç‚¹é¸¡æ±¤å’¯ï¼Œå¥½å–~~ (ï¿£â–½ï¿£)~*)<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€äº å¦é—¨é«˜å´æ–°æ‘ è‡ªå·±çš„å°å±‹</p><p>##</p>]]></content>
      
      <categories>
          
          <category> é—²è¨€è¯­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/hello-world.html"/>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
    </entry>
    
  
  
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <content type="html"><![CDATA[]]></content>
    </entry>
    
    <entry>
      <title>links</title>
      <link href="/links/index.html"/>
      <content type="html"><![CDATA[]]></content>
    </entry>
    
    <entry>
      <title>timeline</title>
      <link href="/timeline/index.html"/>
      <content type="html"><![CDATA[]]></content>
    </entry>
    
    <entry>
      <title>gallery</title>
      <link href="/gallery/index.html"/>
      <content type="html"><![CDATA[]]></content>
    </entry>
    
  
</search>
